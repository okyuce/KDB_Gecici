@using Csb.YerindeDonusum.Application.CustomAddons;
@using Csb.YerindeDonusum.Application.Enums;
@using Csb.YerindeDonusum.WebApp.Areas.Admin.Enums;
@using Csb.YerindeDonusum.WebApp.Services;
@using Microsoft.AspNetCore.Http;
@using Microsoft.Extensions.Primitives
@using System.Diagnostics;
@inject IHttpContextAccessor _httpContextAccessor;
@inject IAuthService _authService
@{
    ViewBag.Title = "Başvuru Değerlendirme";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
    string yeniYapiControllerUrl = "/admin/basvurudegerlendirme";
    string birimIdString = User.Claims.FirstOrDefault(x => x.Type == "BirimId")?.Value ?? "?";
    int birimId = (birimIdString == "?" || birimIdString == "") ? 0 : Int32.Parse(birimIdString);

    _httpContextAccessor.HttpContext.Request.Query.TryGetValue("askiKodu", out StringValues _queryStringAskiKodu);
    _httpContextAccessor.HttpContext.Request.Query.TryGetValue("uavtMahalleNo", out StringValues _queryStringUavtMahalleNo);
}
<div class="modal fade" id="modal_yeni_yapi" style="z-index:9000;" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content rounded">
            <div class="modal-header pb-0 border-0 justify-content-end">
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
            </div>
            <div class="modal-body scroll-y px-10 px-lg-10 pt-0 pb-10">
                <form id="form_yeni_yapi" onsubmit="return false;" novalidate="novalidate" class="form">
                    <input type="hidden" name="BinaDegerlendirmeId" />
                    <div class="mb-13 text-center">
                        <h1 class="mb-3 modal-title">Yeni Yapı Ekle</h1>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">İl</label>
                            <select name="UavtIlNo"
                                    class="form-select select-2"
                                    data-ajax-target="/admin/uavt/GetirListeDepremIl"
                                    data-custom-value="id"
                                    data-custom-text="ad" readonly>
                                <option></option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">İlçe</label>
                            <select name="UavtIlceNo" class="form-select select-2" readonly>
                                <option></option>
                            </select>
                        </div>
                        <div class="col-md-6 mt-4">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                Mahalle
                            </label>
                            <select name="UavtMahalleNo"
                                    data-validate="required"
                                    data-title="Mahalle"
                                    class="form-select select-2" readonly>
                                <option></option>
                                @if (_queryStringUavtMahalleNo.Any())
                                {
                                    <option value="@_queryStringUavtMahalleNo[0]" selected="selected">@_queryStringUavtMahalleNo[0]</option>
                                }
                            </select>
                        </div>
                        <div class="col-md-6 mt-4">
                            <div class="d-flex flex-column fv-row">
                                <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                    ASKI Kodu
                                </label>
                                <input type="text"
                                       placeholder="ASKI Kodu"
                                       class="form-control"
                                       name="HasarTespitAskiKodu" />
                            </div>
                        </div>
                        <div class="col-md-6 mt-4">
                            <div class="d-flex flex-column fv-row">
                                <label class="d-flex align-items-center fs-6 fw-semibold mb-2 ">
                                    Ada
                                </label>
                                <input type="text"
                                       placeholder="Ada"
                                       data-validate="number"
                                       data-title="Ada"
                                       class="form-control integer-mask"
                                       name="Ada" readonly />
                            </div>
                        </div>
                        <div class="col-md-6 mt-4">
                            <div class="d-flex flex-column fv-row">
                                <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                    Parsel
                                </label>
                                <input type="text"
                                       placeholder="Parsel"
                                       data-validate="number"
                                       data-title="Parsel"
                                       class="form-control integer-mask"
                                       name="Parsel" readonly />
                            </div>
                        </div>
                        <div class="col-md-12 mt-4">
                            <div class="d-flex flex-column fv-row">
                                <label class="d-flex align-items-center fs-6 fw-semibold required mb-2">
                                    Dış Kapı No
                                </label>
                                <input type="text"
                                       data-validate="required"
                                       data-title="Dış Kapı No"
                                       placeholder="Dış Kapı No"
                                       class="form-control"
                                       name="BinaDisKapiNo" />
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-8">
                        <button type="button" class="btn btn-light me-3" data-bs-dismiss="modal">İptal</button>
                        <button type="submit" id="modal_yeni_yapi_kaydet"
                                data-confirm="true"
                                data-confirm-function="YeniYapiEkleGuncelleAjax"
                                data-confirm-text="Yeni yapı eklenecek."
                                class="btn btn-primary">
                            Ekle
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modal_yapi_denetim_dosya_degistir" style="z-index:90000;" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content rounded">
            <div class="modal-header pb-0 border-0 justify-content-end">
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
            </div>
            <div class="modal-body scroll-y px-10 px-lg-10 pt-0 pb-10">
                <form id="form_yapi_denetim_dosya_degistir" onsubmit="return false;" novalidate="novalidate" class="form">
                    <input type="hidden" name="BinaYapiDenetimDosyaGuid" />
                    <div class="mb-13 text-center">
                        <h1 class="mb-3 modal-title">Yapı Denetim İlerleme Dosyasını Değiştir</h1>
                    </div>
                    <div class="row">
                        <div class="row mt-4">
                            <div class="col-md-12 d-flex flex-column">
                                <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                    <span>Yapı Denetim İlerleme Belgesi (.pdf, .png, .jpg)</span>
                                </label>
                                <input data-validate="required"
                                       accept="image/png, image/jpeg, application/pdf"
                                       data-title="Yapı Denetim İlerleme Belgesi"
                                       name="YapiDenetimIlerlemeBelgesi"
                                       type="file"
                                       class="form-control form-control-solid" autocomplete="off" placeholder="Yapı Denetim İlerleme Belgesi" />
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-8">
                        <button type="button" class="btn btn-light me-3" data-bs-dismiss="modal">İptal</button>
                        <button type="submit" id="modal_yapi_denetim_dosya_degistir_kaydet"
                                data-confirm="true"
                                data-confirm-function="YapiDenetimIlerlemeBelgesiGuncelleAjax"
                                data-confirm-text="Yapı Denetim İlerleme Belgesi değiştirilecek."
                                class="btn btn-primary">
                            Belgeyi Güncelle
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modal_Yeni_Ada_Parsel" style="z-index:9000;" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content rounded">
            <div class="modal-header pb-0 border-0 justify-content-end">
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
            </div>
            <div class="modal-body scroll-y px-10 px-lg-10 pt-0 pb-10">
                <form id="form_yeni_ada_parsel" onsubmit="return false;" novalidate="novalidate" class="form">
                    <input type="hidden" name="BinaDegerlendirmeId" />
                    <input type="hidden" name="TapuBeyanMahalleAdi" />
                    <input type="hidden" name="TapuBeyanIlceAdi" />
                    <div class="mb-13 text-center">
                        <h1 class="mb-3 modal-title">Ada Parsel Değiştir</h1>
                    </div>
                    <div class="row">
                        <div class="row mt-4">
                            <div class="col-md-6 d-flex flex-column">
                                <label class="d-flex align-items-center fs-6 fw-semibold required mb-2">
                                    <span>İl</span>
                                </label>
                                <select id="TapuBeyanIlIdVal"
                                        data-title="İl"
                                        name="TapuBeyanIlId"
                                        class="form-select select-2"
                                        data-ajax-target="/admin/takbis/Il/GetirListeDepremIl"
                                        data-custom-value="id"
                                        data-custom-text="ad" readonly>
                                    <option></option>
                                </select>
                            </div>
                            <div class="col-md-6 d-flex flex-column">
                                <label class="d-flex align-items-center fs-6 fw-semibold required mb-2">
                                    <span>İlçe</span>
                                </label>
                                <select data-validate="required" data-title="İlçe" name="TapuBeyanIlceId" id="TapuBeyanIlceIdVal" class="form-select select-2">
                                    <option></option>
                                </select>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col-md-12 d-flex flex-column">
                                <label class="d-flex align-items-center fs-6 fw-semibold required mb-2">
                                    <span>Mahalle</span>
                                </label>
                                <select data-validate="required" data-title="Mahalle" name="TapuBeyanMahalleId" class="form-select select-2">
                                    <option></option>
                                </select>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col-md-6 d-flex flex-column">
                                <label class="d-flex align-items-center fs-6 fw-semibold required mb-2">
                                    <span>Ada</span>
                                </label>
                                <select data-validate="required" data-title="Ada" name="TapuBeyanAda"
                                        data-custom-value="adaNo"
                                        data-custom-text="adaNo" class="form-select select-2">
                                    <option></option>
                                </select>
                            </div>
                            <div class="col-md-6 d-flex flex-column">
                                <label class="d-flex align-items-center fs-6 fw-semibold required mb-2">
                                    <span>Parsel</span>
                                </label>
                                <select data-validate="required" data-title="Parsel" name="TapuBeyanParsel"
                                        data-custom-value="parselNo"
                                        data-custom-text="parselNo" class="form-select select-2">
                                    <option></option>
                                </select>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col-md-12 d-flex flex-column">
                                <div class="row">
                                    <label class="d-flex align-items-center fs-6 fw-semibold required mb-4">
                                        <span>Ada Parsel Güncelleme Tipi</span>
                                    </label>
                                    <div class="col-md-3 d-flex flex-column" style="padding:inherit">
                                        <label class="form-check form-check-custom form-check-solid me-3 mb-2">
                                            <input required class="form-check-input h-20px w-20px" type="radio" name="AdaParselGuncellemeTipiId" value="@AdaParselGuncellemeTipiEnum.Tevhid.GetHashCode()">
                                            <span for="@AdaParselGuncellemeTipiEnum.Tevhid.GetHashCode()" class="form-check-label fw-bold">Tevhid</span>
                                        </label>
                                    </div>
                                    <div class="col-md-3 d-flex flex-column" style="padding:inherit">
                                        <label class="form-check form-check-custom form-check-solid me-3 mb-2">
                                            <input required class="form-check-input h-20px w-20px" type="radio" name="AdaParselGuncellemeTipiId" value="@AdaParselGuncellemeTipiEnum.Ifraz.GetHashCode()">
                                            <span for="@AdaParselGuncellemeTipiEnum.Ifraz.GetHashCode()" class="form-check-label fw-bold">İfraz</span>

                                        </label>
                                    </div>
                                    <div class="col-md-3 d-flex flex-column" style="padding:inherit">
                                        <label class="form-check form-check-custom form-check-solid me-3 mb-2">
                                            <input required class="form-check-input h-20px w-20px" type="radio" name="AdaParselGuncellemeTipiId" value="@AdaParselGuncellemeTipiEnum.BaskaParsel.GetHashCode()">
                                            <span for="@AdaParselGuncellemeTipiEnum.BaskaParsel.GetHashCode()" class="form-check-label fw-bold">Başka Parsel</span>
                                        </label>
                                    </div>
                                    <div class="col-md-3 d-flex flex-column" style="padding:inherit">
                                        <label class="form-check form-check-custom form-check-solid mb-2">
                                            <input required class="form-check-input h-20px w-20px mb-auto" type="radio" name="AdaParselGuncellemeTipiId" value="@AdaParselGuncellemeTipiEnum.Kanun22A.GetHashCode()">
                                            <span for="@AdaParselGuncellemeTipiEnum.Kanun22A.GetHashCode()" class="form-check-label fw-bold">3402 sayılı Kanun 22-A</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div id="divBaskaParselFile" style="display:none;">
                                <div class="col-md-12 d-flex flex-column">
                                    <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                        <span>Başka Parsel Belge (.pdf, .png, .jpg)</span>
                                    </label>
                                    <input data-validate="required"
                                           accept="image/png, image/jpeg, application/pdf"
                                           data-title="Başka Parsel Belgesi"
                                           name="BaskaParselDosya"
                                           type="file"
                                           class="form-control form-control-solid" autocomplete="off" placeholder="Başka Parsel Belgesi" />
                                    <div id="anchor_document_download_baska_parsel" class="mt-2"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-8">
                        <button type="button" class="btn btn-light me-3" data-bs-dismiss="modal">İptal</button>
                        <button type="submit" id="modal_yeni_ada_parsel_kaydet"
                                data-confirm="true"
                                data-confirm-function="AdaParselGuncelleAjax"
                                data-confirm-text="Ada parsel değiştirilecek."
                                class="btn btn-primary">
                            Ekle
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modal_basvuru_sonuclandir" style="z-index:9001;" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered mw-800px">
        <div class="modal-content rounded">
            <div class="modal-header pb-0 border-0 justify-content-end">
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
            </div>
            <div class="modal-body scroll-y px-10 px-lg-10 pt-0 pb-10">
                <form id="modal_basvuru_sonuclandir_form" onsubmit="return false;" novalidate="novalidate" class="form" action="#">
                    <input type="hidden" name="BasvuruId" />
                    <input type="hidden" name="BasvuruKamuUstlenecekId" />
                    <div class="mb-13 text-center">
                        <h1 class="mb-3 modal-title">Başvuruyu İptal Et</h1>
                    </div>
                    @*                     <div class="d-flex flex-column mb-8 fv-row">
                    <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                    <span class="required">Açıklama (Minimum 25 karakter)</span>
                    </label>
                    <textarea data-validate="required, minlength=25"
                    data-title="Açıklama"
                    name="SonuclandirmaAciklamasi"
                    rows="3"
                    class="form-control"></textarea>
                    </div> *@
                    <div class="col-md-12 d-flex flex-column mb-8">
                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                            <span class="required">İptal Türü</span>
                        </label>
                        <select required name="BasvuruIptalTurId" class="form-select select-2"
                                data-ajax-target="/admin/Select/GetirBasvuruIptalTurListe"
                                data-custom-value="id"
                                data-custom-text="ad">
                            <option></option>
                        </select>
                    </div>
                    <div class="text-center">
                        <button type="reset" id="modal_basvuru_sonuclandir_iptal" class="btn btn-light me-3">İptal</button>
                        <button type="submit" id="modal_basvuru_sonuclandir_kaydet" class="btn btn-primary">Kaydet</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modal_degerlendirme" style="z-index:9000;" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="width:100% !important; min-width:95%">
        <div class="modal-content rounded">
            <div class="modal-header">
                <h3 class="modal-title">Başvuru Değerlendirme</h3>
                <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                    <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span class="path2"></span></i>
                </div>
            </div>
            <div class="modal-body scroll-y p-10 modal-xl">
                <div class="d-flex flex-column flex-column-fluid">
                    <div class="card mb-5 mb-xl-8">
                        <div class="card-header collapsible cursor-pointer rotate collapsed" data-bs-toggle="collapse" data-bs-target="#malikfilter_collapsible">
                            <h3 class="card-title">Malik Filtrele</h3>
                            <div class="card-toolbar rotate-180">
                                <i class="ki-duotone ki-down fs-1"></i>
                            </div>
                        </div>
                        <div id="malikfilter_collapsible" class="collapse">
                            <form data-name="tableMaliklerFilter" class="card-body py-2 px-6">
                                <input type="hidden" name="UavtMahalleNo" />
                                <input type="hidden" name="TapuAda" />
                                <input type="hidden" name="TapuParsel" />
                                <input type="hidden" name="HasarTespitAskiKodu" />
                                <input type="hidden" name="IptalEdilenlerAlinmasin" value="True" />
                                <input type="hidden" name="BagimsizBolumlerAlinmasin" />

                                <input type="hidden" name="IptalEdilenGelmesin" />

                                <div class="row mt-4">
                                    <div class="col-md-3 d-flex flex-column mb-8">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>T.C. Kimlik No</span>
                                        </label>
                                        <input type="text" data-onenter-submit="true"
                                               data-onenter-click="#malik_sorgula"
                                               class="form-control identity-mask"
                                               placeholder="T.C. Kimlik No"
                                               name="TcKimlikNo" />
                                    </div>
                                    <div class="col-md-3 d-flex flex-column mb-8">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Ad/Soyad/Tüzel Kişi Adı</span>
                                        </label>
                                        <input type="text" data-onenter-submit="true"
                                               data-onenter-click="#malik_sorgula" class="form-control" placeholder="Ad/Soyad/Tüzel Kişi Adı" name="Ad" />
                                    </div>
                                    <div class="col-md-3 d-flex flex-column mb-8">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>E-Posta</span>
                                        </label>
                                        <input type="text" data-onenter-submit="true"
                                               data-onenter-click="#malik_sorgula" class="form-control" placeholder="E-Posta" name="Eposta" />
                                    </div>
                                    <div class="col-md-3 d-flex flex-column mb-8">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Cep Telefonu</span>
                                        </label>
                                        <input type="text" data-onenter-submit="true"
                                               data-onenter-click="#malik_sorgula" class="form-control" placeholder="Cep Telefonu" name="CepTelefonu" />
                                    </div>
                                    <div class="col-md-3 d-flex flex-column mb-8">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Tüzel Kişi Vergi No</span>
                                        </label>
                                        <input type="text" data-onenter-submit="true"
                                               data-onenter-click="#malik_sorgula" class="form-control" placeholder="Tüzel Kişi Vergi No" name="TuzelKisiVergiNo" />
                                    </div>
                                    <div class="col-md-3 d-flex flex-column mb-8">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Tüzel Kişi Mersis No</span>
                                        </label>
                                        <input type="text" data-onenter-submit="true"
                                               data-onenter-click="#malik_sorgula" class="form-control" placeholder="Tüzel Kişi Mersis No" name="TuzelKisiMersisNo" />
                                    </div>
                                    <div class="col-md-3 d-flex flex-column mb-8">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Başvuru Afad Durumu</span>
                                        </label>
                                        <select name="BasvuruAfadDurumId" class="form-select select-2"
                                                data-ajax-target="/admin/Select/GetirBasvuruAfadDurumListe"
                                                data-custom-value="basvuruDurumId"
                                                data-custom-text="ad">
                                            <option></option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 d-flex flex-column mb-8">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Başvuru Değerlendirme Durumu</span>
                                        </label>
                                        <select name="BinaDegerlendirmeDurumId" class="form-select select-2"
                                                data-ajax-target="/admin/select/GetirBinaDegerlendirmeDurumListe"
                                                data-custom-value="basvuruDurumId"
                                                data-custom-text="ad">
                                            <option></option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 d-flex flex-column mb-8">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Dış Kapı No</span>
                                        </label>
                                        <select name="BinaDisKapiNo" class="form-select select-2"></select>
                                    </div>
                                </div>
                                <div class="row mb-4">
                                    <div class="col-md-12 text-right">
                                        <button type="reset" id="malik_filtre_temizle" class="btn btn-dark mr-10">
                                            <i class="ki-duotone ki-trash fs-1"><i class="path1"></i><i class="path2"></i><i class="path3"></i><i class="path4"></i><i class="path5"></i></i> Temizle
                                        </button>
                                        <button type="button" id="malik_sorgula" class="btn btn-primary">
                                            <i class="ki-duotone ki-filter fs-1"><i class="path1"></i><i class="path2"></i></i> Sorgula
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Malik Listesi</h3>
                        <div class="card-toolbar">
                            <button type="button" id="btnKamuUstlenecekMalikEkle" class="btn btn-sm btn-light-primary me-2" data-placement="top" onclick="KamuUstlenecekMalikEkle()" data-toggle="tooltip" title="Kamu Üstlenecek Malik Ekle"><i class="fa fa-plus"></i>Kamu Üstlenecek Malik Ekle</button>
                            <button type="button" id="btnPasifMalikleriListele" class="btn btn-sm btn-light-primary me-2" data-placement="top" onclick="PasifMalikleriListele()" data-toggle="tooltip" title="Pasif Malikleri Listele"><i class="fa fa-list"></i>Pasif Malikleri Listele</button>
                            <label id="modal_degerlendirme_title_id" class="badge badge-dark me-2"></label>
                            <label id="modal_degerlendirme_count" class="badge badge-primary me-2 d-none"></label>
                            <label id="modal_degerlendirme_title" class="badge badge-primary"></label>
                        </div>
                    </div>
                    <div class="card-body py-2 px-4">
                        <div class="table-responsive" style="overflow:hidden">
                            <table class="table table-row-bordered table-striped table-row-gray-200 align-middle"
                                   data-name="tableMalikler"
                                   data-responsive="true"
                                   data-selectable="multiple"
                                   data-searching="true">
                                <thead>
                                    <tr class="fw-semibold fs-6 text-gray-800 border-bottom border-gray-200">
                                        <th data-name="binaDisKapiNo" data-sort="false">Dış Kapı No</th>
                                        <th data-name="tcKimlikNo" data-sort="false">T.C. Kimlik No</th>
                                        <th data-name="ad" data-sort="false">Ad</th>
                                        <th data-name="soyad" data-sort="false">Soyad</th>
                                        <th data-name="cepTelefonu" data-sort="false">Cep Telefonu</th>
                                        <th data-name="eposta" data-sort="false">E-Posta</th>
                                        <th data-name="tapuBlok" data-sort="false">Blok</th>
                                        <th data-name="tapuPayPayda" data-sort="false">Pay / Payda</th>
                                        <th data-name="basvuruKanalAd" data-sort="false">Başvuru Kanalı</th>
                                        <th data-name="basvuruDegerlendirmeDurumAd" data-sort="false">Başvuru Değerlendirme Durumu</th>
                                        <th data-name="basvuruDurumAd" data-sort="false">Başvuru Durumu</th>
                                        <th data-name="basvuruAfadDurumAd">Afad Durumu</th>
                                        <th data-name="hibeOdemeTutar">Hibe Ödeme Tutarı</th>
                                        <th data-name="krediOdemeTutar">Kredi Ödeme Tutarı</th>
                                        <th data-name="bagimsizBolumAlani">Bağımsız Bölüm m²</th>
                                        <th data-name="bagimsizBolumNo">Bağımsız Bölüm No</th>
                                        <th data-name="Buttons" class="all" data-sort="false" data-width="45px"></th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <div id="divDisKapiNoSec" class="row text-center mt-2 mb-8 d-none">
                            <div class="col-md-12">
                                <label id="lblDisKapiUyari" class="fs-4"></label>
                            </div>
                            <div class="col-md-12 mt-2">
                                <button type="button" class="btn btn-primary" id="btnDisKapiNoSec">Dış Kapı Kaydet</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal_pasif_malikler" style="z-index:99000;" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="width:90% !important; min-width:80%">
        <div class="modal-content rounded">
            <div class="modal-header">
                <h3 class="modal-title">Pasif Malik Listesi- Kamu Üstlenecek Olarak Kayıt</h3>
                <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                    <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span class="path2"></span></i>
                </div>
            </div>
            <div class="modal-body scroll-y p-10 modal-xl">
                <form data-name="tablePasifMaliklerFilter" class="card-body py-2 px-6">
                    <input type="hidden" name="UavtMahalleNo" />
                    <input type="hidden" name="TapuAda" />
                    <input type="hidden" name="TapuParsel" />
                    <input type="hidden" name="HasarTespitAskiKodu" />
                    <input type="hidden" name="IptalEdilenlerAlinmasin" value="True" />
                    <input type="hidden" name="BagimsizBolumlerAlinmasin" />

                    <input type="hidden" name="IptalEdilenGelmesin" />
                </form>
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Pasif Malik Listesi</h3>
                        <div class="card-toolbar">
                            <label id="modal_pasif_malikler_title_id" class="badge badge-dark me-2"></label>
                            <label id="modal_pasif_malikler_count" class="badge badge-primary me-2 d-none"></label>
                            <label id="modal_pasif_malikler_title" class="badge badge-primary"></label>
                        </div>
                    </div>
                    <div class="card-body py-2 px-4">
                        <div class="table-responsive" style="overflow:hidden">
                            <table class="table table-row-bordered table-striped table-row-gray-200 align-middle"
                                   data-name="tablePasifMalikler"
                                   data-responsive="true"
                                   data-selectable="multiple"
                                   data-searching="true">
                                <thead>
                                    <tr class="fw-semibold fs-6 text-gray-800 border-bottom border-gray-200">
                                        <th data-name="tcKimlikNo" data-sort="false">T.C. Kimlik No</th>
                                        <th data-name="ad" data-sort="false">Ad</th>
                                        <th data-name="soyad" data-sort="false">Soyad</th>
                                        <th data-name="cepTelefonu" data-sort="false">Cep Telefonu</th>
                                        <th data-name="eposta" data-sort="false">E-Posta</th>
                                        <th data-name="tapuBlok" data-sort="false">Blok</th>
                                        <th data-name="tapuArsaPay" data-sort="false">Pay</th>
                                        <th data-name="tapuArsaPayda" data-sort="false">Payda</th>
                                        <th data-name="tapuBagimsizBolumNo">Bağımsız Bölüm No</th>
                                        <th data-name="Buttons" class="all" data-sort="false" data-width="45px"></th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <div id="divKamuUstlenecekSec" class="row text-center mt-2 mb-8 d-none">
                            <div class="col-md-12">
                                <label id="lblKamuUstlenecekUyari" class="fs-4"></label>
                            </div>
                            <div class="col-md-12 mt-2">
                                <button type="button" class="btn btn-primary" id="btnKamuUstlenecekSec">Kamu Üstlenecek Kaydet</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@*<div class="modal fade" id="modal_degerlendirme_kredi_geri_odeme" style="z-index:9009;" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered  modal-fullscreen" style="width:100% !important; min-width:95%">
        <div class="modal-content rounded">
            <div class="modal-header">
                <h3 class="modal-title">
                    Kredi Geri Ödeme Bilgileri
                </h3>
                <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                    <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span class="path2"></span></i>
                </div>
            </div>
            <div class="modal-body scroll-y">
                <img class="w-100px h-100px float-end" src="~/img/logo-yuvarlak.png" />
                <div class="row mt-6">
                    <div class="row mt-2">
                    <div class="col-md-6">
                        <div class="d-flex flex-column fv-row">
                            <label class="d-flex align-items-center fs-6 fw-semibold required mb-2">
                                                                    <span style="color:green;">Burayı Kendisi Girecek.</span>

                                Sözleşme Numarası:
                            </label>
                            <input name="KrediGeriOdemeSozlesmeNumarasi"
                                    type="number"
                                    data-validate="required, number"
                                    data-title="Sözleşme Numarası"
                                    autocomplete="off"
                                    class="form-control form-control-solid"
                                    placeholder="Sözleşme Numarası" />
                        </div>
                    </div>
                </div>
                    <div class="row mt-2">
                        <div class="col-md-6">
                            <div class="d-flex flex-column fv-row">
                                <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                                                        <span style="color:green;">Burası Düzeltilecek.</span>

                                    <span>Sözleşme Tarihi:</span>
                                </label>
                                <input type="date"
                                        class="form-control form-control-solid"
                                        autocomplete="off"
                                        data-validate="required"
                                        data-title="Sözleşme Tarihi"
                                        placeholder="Sözleşme Tarihi" name="KrediGeriOdemeSozlesmeTarihi" />
                            </div>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-md-6">
                            <div class="d-flex flex-column fv-row">
                                <label class="d-flex align-items-center fs-6 fw-semibold required mb-2">
                                    <span style="color:green;">Burası Düzeltilecek.</span>
                                    Yapı Kimlik No/Bülten No:
                                </label>
                                <input name="KrediGeriOdemeYapiKimlikNo"
                                        type="number"
                                        data-validate="required, number"
                                        data-title="Yapı Kimlik No/Bülten No"
                                        autocomplete="off"
                                        class="form-control form-control-solid"
                                        placeholder="Yapı Kimlik No/Bülten No" disabled />
                            </div>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-md-6">
                            <div class="d-flex flex-column fv-row">
                                <label class="d-flex align-items-center fs-6 fw-semibold required mb-2">
                                    T.C. Kimlik No:
                                </label>
                                <input type="text" class="form-control form-control-solid" placeholder="T.C. Kimlik No" name="KrediGeriOdemeKimlikNo" disabled />
                            </div>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-md-6">
                            <div class="d-flex flex-column fv-row">
                                <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                    <span class="required">
                                        Ad / Soyad:
                                    </span>
                                </label>
                                <input type="text" class="form-control form-control-solid" placeholder="Ad Soyad" name="KrediGeriOdemeAdSoyad" disabled />
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <div class="table-responsive">
                    <table class="table table-row-bordered table-striped table-row-gray-200 align-middle" style="border: 1px solid black;">
                        <thead style="border: 1px solid black;">
                            <tr style="border: 1px solid black;">
                                <th style="font-weight: bold"><span style="color:green;">Burası Düzeltilecek. </span>Ödemesi Dönem: 13.10.2023 - 13.10.2025 (Toplam 2 yıl)</th>
                            </tr>
                        </thead>
                        <tbody style="border: 1px solid black;">
                        @for (int i = 0; i < 96; i++)
                        {
                            <tr style="border: 1px solid black;">
                                <td>@(i + 1). Taksit : <span class="TaksitTutari"></span> TL</td>
                            </tr style="border: 1px solid black;">
                        }
                        <tr style="border: 1px solid black;"><td  style="border: 1px solid black;font-weight: bold">***Ödemeler taksitin ait olduğu ayın son günü itibari ile yapılabilir.</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>*@
<div class="modal fade" id="modal_degerlendirme_islem" style="z-index:9000;" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xxl modal-dialog-centered">
        <div class="modal-content rounded">
            <div class="modal-header pb-0 border-0 justify-content-end">
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
            </div>
            <div class="modal-body scroll-y px-10 px-lg-10 pt-0 pb-10">
                <div class="mb-13 text-center">
                    <h1 class="mb-3 modal-title">Yeni Yapı Bilgileri</h1>
                    <h3 style="font-weight: normal;" id="binaBasvuruDegerlendirmeHeaderDetail"></h3>
                </div>
                <div class="d-flex flex-column flex-column-fluid bg-light card">
                    <div class="p-8">
                        <ul class="nav nav-tabs nav-line-tabs nav-line-tabs-2x mb-5 fs-6">
                            <li class="nav-item me-0" role="presentation">
                                <a class="btn btn-sm btn-flex btn-active-light-primary active" data-bs-toggle="tab" href="#kt_vtab_pane_belge" aria-selected="true" role="tab">
                                    <span class="d-flex flex-column align-items-start">
                                        <span class="fs-5 fw-bold">1. Belge Bilgileri</span>
                                    </span>
                                </a>
                            </li>
                            <li class="nav-item me-0" role="presentation">
                                <a class="btn btn-sm btn-flex btn-active-light-primary @*disabled*@" href="#kt_vtab_pane_muteahhit" data-bs-toggle="" aria-selected="false" role="tab" tabindex="-1">
                                    <span class="d-flex flex-column align-items-start">
                                        <span class="fs-5 fw-bold">2. Müteahhit Bilgileri</span>
                                    </span>
                                </a>
                            </li>
                            <li class="nav-item me-0" role="presentation">
                                <a class="btn btn-sm btn-flex btn-active-light-primary @*disabled*@" href="#kt_vtab_pane_ruhsat" data-bs-toggle="" aria-selected="false" role="tab" tabindex="-1">
                                    <span class="d-flex flex-column align-items-start">
                                        <span class="fs-5 fw-bold">3. Yapı Ruhsat Bilgileri</span>
                                    </span>
                                </a>
                            </li>
                            @*<li class="nav-item me-0" role="presentation">
                            <a class="btn btn-sm btn-flex btn-active-light-primary" href="#kt_vtab_pane_bina" data-bs-toggle="" aria-selected="false" role="tab" tabindex="-1">
                            <span class="d-flex flex-column align-items-start">
                            <span class="fs-5 fw-bold">4. Bina İçin Yapılan Diğer Yardımlar</span>
                            </span>
                            </a>
                            </li>*@
                            @if (birimId == BirimEnum.AltyapiGenelMudurlugu)
                            {
                                <li class="nav-item me-0" role="presentation">
                                    <a class="btn btn-sm btn-flex btn-active-light-primary" href="#kt_vtab_pane_yapi_denetim" data-bs-toggle="" aria-selected="false" role="tab" tabindex="-1">
                                        <span class="d-flex flex-column align-items-start">
                                            <span class="fs-5 fw-bold">4. Yapı Denetim Seviye Tespit Bilgileri</span>
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item me-0" role="presentation">
                                    <a class="btn btn-sm btn-flex btn-active-light-primary" href="#kt_vtab_pane_odeme_bilgileri" data-bs-toggle="" aria-selected="false" role="tab" tabindex="-1">
                                        <span class="d-flex flex-column align-items-start">
                                            <span class="fs-5 fw-bold">5. Ödeme Bilgileri</span>
                                        </span>
                                    </a>
                                </li>
                            }
                            else
                            {
                                <li class="nav-item me-0" role="presentation">
                                    <a class="btn btn-sm btn-flex btn-active-light-primary" href="#kt_vtab_pane_yapi_denetim" data-bs-toggle="" aria-selected="false" role="tab" tabindex="-1">
                                        <span class="d-flex flex-column align-items-start">
                                            <span class="fs-5 fw-bold">4. Yapı Denetim Seviye Tespit Bilgileri</span>
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item me-0" role="presentation">
                                    <a class="btn btn-sm btn-flex btn-active-light-primary" href="#kt_vtab_pane_odeme_bilgileri" data-bs-toggle="" aria-selected="false" role="tab" tabindex="-1">
                                        <span class="d-flex flex-column align-items-start">
                                            <span class="fs-5 fw-bold">5. Ödeme Bilgileri</span>
                                        </span>
                                    </a>
                                </li>
                            }

                        </ul>
                        <div class="tab-content pt-4" id="myTabContent">
                            <div class="tab-pane fade active show" id="kt_vtab_pane_belge" role="tabpanel">
                                <form id="basvuruBelgeBilgileriForm">
                                    <div class="row">
                                        <div class="col-md-6 d-flex flex-column">
                                            <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                                <span>İnşaat Yapım Taahhüt Sözleşme Belgesi (.pdf, .png, .jpg)</span>
                                            </label>
                                            <input data-validate="required"
                                                   accept="image/png, image/jpeg, application/pdf"
                                                   data-title="İnşaat Yapım Taahhüt Sözleşme Belgesi"
                                                   name="BasvuruImzaDosya"
                                                   type="file"
                                                   class="form-control form-control-solid" autocomplete="off" placeholder="Belge" />
                                            <div id="anchor_document_download" class="mt-2"></div>
                                        </div>
                                        <div class="col-md-6 d-flex flex-column">
                                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2 required">
                                                İnşaat Yapım Sözleşmesi Taahhüt Sözleşmesi İmzalayan Kişi Sayısı
                                            </label>
                                            <input name="ImzalayanKisiSayisi"
                                                   type="text"
                                                   class="form-control form-control-solid integer-mask"
                                                   data-validate="required, number"
                                                   data-title="İnşaat Yapım Sözleşmesi Taahhüt Sözleşmesi İmzalayan Kişi Sayısı"
                                                   autocomplete="off"
                                                   placeholder="İnşaat Yapım Sözleşmesi Taahhüt Sözleşmesi İmzalayan Kişi Sayısı" />
                                        </div>
                                    </div>
                                    <div class="row mt-8">
                                        <div class="col-md-12">
                                            <div class="d-flex flex-column fv-row">
                                                <button type="button" data-step="1" class="btn btn-primary" onclick="KaydetBelge()" id="btnKaydetBelge">Kaydet</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="tab-pane fade" id="kt_vtab_pane_muteahhit" role="tabpanel">
                                <form id="muteahhitForm">
                                    <div class="row">
                                        <div class="col-md-12 d-flex flex-column">
                                            <div class="row">
                                                <div class="col-md-12 d-flex flex-column">
                                                    <label class="form-check form-check-custom form-check-solid me-10 mb-2">
                                                        <input class="form-check-input h-20px w-20px" type="radio" name="BinaMuteahhitTapuTurId" value="@MuteahhitBilgileriTipEnum.HazineArazisi.GetHashCode()">
                                                        <span for="@MuteahhitBilgileriTipEnum.HazineArazisi.GetHashCode()" class="form-check-label fw-bold">Hazine arazisine yapılan yapıya ait müteahhit ataması yapmak istiyorum.</span>
                                                    </label>
                                                </div>
                                                <div class="col-md-12 d-flex flex-column">
                                                    <label class="form-check form-check-custom form-check-solid me-10 mb-2">
                                                        <input class="form-check-input h-20px w-20px" type="radio" name="BinaMuteahhitTapuTurId" value="@MuteahhitBilgileriTipEnum.TescilDisi.GetHashCode()">
                                                        <span for="@MuteahhitBilgileriTipEnum.TescilDisi.GetHashCode()" class="form-check-label fw-bold">Tescil olmayan yapıya ait müteahhit ataması yapmak istiyorum.</span>

                                                    </label>
                                                </div>
                                                <div class="col-md-12 d-flex flex-column">
                                                    <label class="form-check form-check-custom form-check-solid me-10 mb-2">
                                                        <input class="form-check-input h-20px w-20px" type="radio" name="BinaMuteahhitTapuTurId" value="@MuteahhitBilgileriTipEnum.Muteahhit.GetHashCode()">
                                                        <span for="@MuteahhitBilgileriTipEnum.Muteahhit.GetHashCode()" class="form-check-label fw-bold">Yetki belge numarası ile müteahhit ataması yapmak istiyorum.</span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-8" id="divYetkiBelgesi" style="display:none;">
                                        <div class="row">
                                            <div class="col-md-12 d-flex flex-column" id="yetkiBelgesi">
                                                <label id="yetkiBelgeNoFilterLabel" class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                                    <span>Yetki Belge No</span>
                                                </label>
                                                <div class="input-group">
                                                    <input type="text"
                                                           data-validate="required"
                                                           data-title="Yetki Belge No"
                                                           class="form-control form-control-solid"
                                                           autocomplete="off"
                                                           data-onenter-submit="true"
                                                           data-onenter-click="#bt_yetkiBelgeNoSorgula"
                                                           placeholder="Yetki Belge No"
                                                           name="YetkiBelgeNoFilter"
                                                           id="yetkiBelgeNoFilter"
                                                           inputmode="text">
                                                    <div class="input-group-append">
                                                        <button id="bt_yetkiBelgeNoSorgula" type="button" class="btn btn-primary">
                                                            Sorgula
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="muteahhit_belge" class="mt-8 d-none">
                                            <hr class="my-8" />
                                            <h5>Kişisel Bilgiler</h5>
                                            <div class="row mt-8">
                                                <div class="col-md-6">
                                                    <div class="d-flex flex-column fv-row">
                                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                                            <span class="required">Ad Soyad Unvan</span>
                                                        </label>
                                                        <input type="text"
                                                               data-validate="required"
                                                               class="form-control form-control-solid"
                                                               placeholder="Ad Soyad Unvan"
                                                               name="adSoyadUnvan" readonly />
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="d-flex flex-column fv-row">
                                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                                            <span>Açıklama</span>
                                                        </label>
                                                        <input type="text" class="form-control form-control-solid" placeholder="Açıklama" name="aciklama" readonly />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-8">
                                                <div class="col-md-12">
                                                    <div class="d-flex flex-column fv-row">
                                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                                            <span>Adres</span>
                                                        </label>
                                                        <textarea class="form-control form-control-solid" placeholder="Adres" name="adres" readonly></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-8">
                                                <div class="col-md-6">
                                                    <div class="d-flex flex-column fv-row">
                                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                                            <span>Cep Telefonu</span>
                                                        </label>
                                                        <input type="text" class="form-control form-control-solid" placeholder="Cep Telefonu" name="cepTelefonu" readonly />
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="d-flex flex-column fv-row">
                                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                                            <span>E-Posta</span>
                                                        </label>
                                                        <input type="text" class="form-control form-control-solid email-mask" placeholder="Eposta" name="eposta" readonly />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-8">
                                                <div class="col-md-6">
                                                    <div class="d-flex flex-column fv-row">
                                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                                            <span class="required">Vergi Kimlik No</span>
                                                        </label>
                                                        <input type="text" data-validate="required" class="form-control form-control-solid vergino-mask" placeholder="Vergi Kimlik No" name="vergiKimlikNo" readonly />
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="d-flex flex-column fv-row">
                                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                                            <span>Yetki Belge No</span>
                                                        </label>
                                                        <input type="text" class="form-control form-control-solid" placeholder="Yetki Belge No" name="yetkiBelgeNo" readonly />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-8">
                                                <div class="col-md-6">
                                                    <div class="d-flex flex-column fv-row">
                                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                                            <span>Telefon</span>
                                                        </label>
                                                        <input type="text" class="form-control form-control-solid phone-mask" placeholder="Telefon" name="telefon" readonly />
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="d-flex flex-column fv-row">
                                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2 required">
                                                            <span>Iban No</span>
                                                        </label>
                                                        <input type="text"
                                                               class="form-control form-control-solid iban-mask"
                                                               placeholder="Iban No"
                                                               data-validate="required"
                                                               data-title="Iban No"
                                                               name="ibanNo" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-8" id="divTCKN">
                                        <div class="col-md-6">
                                            <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                                <span>T.C. Kimlik Numarası</span>
                                            </label>
                                            <div class="input-group">
                                                <input type="text"
                                                       data-validate="required, tckn"
                                                       data-title="T.C. Kimlik Numarası"
                                                       data-onenter-submit="true"
                                                       data-onenter-click="#bt_MuteahhitkisiSorgula"
                                                       class="form-control form-control-solid identity-mask"
                                                       autocomplete="off"
                                                       placeholder="T.C. Kimlik Numarası"
                                                       name="MuteahhitTc" />
                                                <div class="input-group-append">
                                                    <button id="bt_MuteahhitkisiSorgula" type="button" data-step="1" class="btn btn-primary">Sorgula</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6" id="divMTCBilgiler" style="display:none;">
                                            <h5>T.C. Kimlik Numarasına Ait Kişi Bilgileri</h5>
                                            <div class="alert alert-primary mb-0">
                                                <label id="m_adSoyad"></label>
                                            </div>
                                        </div>
                                        <div id="muteahhit_tckn" class="mt-8 d-none">
                                            <hr class="my-8" />
                                            <h5>Kişisel Bilgiler</h5>
                                            <div class="row mt-8">
                                                <div class="col-md-6">
                                                    <div class="d-flex flex-column fv-row">
                                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2 required">
                                                            <span>Iban No</span>
                                                        </label>
                                                        <input type="text"
                                                               class="form-control form-control-solid iban-mask"
                                                               placeholder="Iban No"
                                                               data-validate="required"
                                                               data-title="Iban No"
                                                               name="ibanNoTckn" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12 mt-8">
                                        <div class="d-flex flex-column fv-row">
                                            <button type="button" data-step="1" class="btn btn-primary" onclick="KaydetMuteahhitBilgileri()" id="btnKaydetMuteahhit">
                                                Kaydet
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="tab-pane fade" id="kt_vtab_pane_ruhsat" role="tabpanel">
                                <form id="yapiRuhsatForm">
                                    <div id="divIzinBelgesiCheckbox" class="row mb-8">
                                        <div class="col-md-12 d-flex flex-column">
                                            <label class="form-check form-check-custom form-check-solid me-10">
                                                <input class="form-check-input h-20px w-20px" type="checkbox" name="IzinBelgesiSeciliMi" value="true">
                                                <span class="form-check-label fw-bold">İzin Belgesi</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div id="divIzinBelgesi" class="row mb-8 d-none">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="d-flex flex-column fv-row">
                                                    <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                                        <span>İzin Belgesi (.pdf, .png, .jpg)</span>
                                                    </label>
                                                    <input data-validate="required"
                                                           data-title="İzni Belgesi"
                                                           accept="image/png, image/jpeg, application/pdf"
                                                           name="BelgeYapiRuhsatIzinDosya"
                                                           type="file"
                                                           class="form-control form-control-solid" autocomplete="off" placeholder="İzin Belgesi" />

                                                    <button type="button" data-step="1" class="btn btn-success" onclick="KaydetYapiRuhsatBelge()" id="btnKaydetYapiRuhsatBelge">
                                                        Belgeyi Güncelle
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div id="izin_belgesi_indir"></div>
                                            </div>
                                        </div>
                                        <div class="row mt-6">
                                            <div class="col-md-6">
                                                <div class="d-flex flex-column fv-row">
                                                    <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                                        <span>Tarih</span>
                                                    </label>
                                                    <input type="date"
                                                           class="form-control"
                                                           autocomplete="off"
                                                           data-validate="required"
                                                           data-title="Tarih"
                                                           placeholder="Tarih" name="IzinBelgesiTarih" />
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="d-flex flex-column fv-row">
                                                    <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                                        <span>Sayı</span>
                                                    </label>
                                                    <input type="text"
                                                           data-validate="required, number"
                                                           data-title="Sayı"
                                                           class="form-control integer-mask"
                                                           autocomplete="off"
                                                           placeholder="Lütfen izin belgesine ilişkin sayınızı giriniz."
                                                           name="IzinBelgesiSayi"
                                                           inputmode="number">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="divBultenNo" class="row mb-8">
                                        <div class="col-md-12 d-flex flex-column">
                                            <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                                <span>Bülten No</span>
                                            </label>
                                            <div class="input-group">
                                                <input type="text"
                                                       data-validate="required, number"
                                                       data-title="Bülten No"
                                                       class="form-control form-control-solid integer-mask"
                                                       autocomplete="off"
                                                       data-onenter-submit="true"
                                                       data-onenter-click="#btnYapiRuhsatSorgula"
                                                       placeholder="Lütfen ruhsat verilen binaya ilişkin bülten numarasını giriniz."
                                                       name="BultenNo"
                                                       inputmode="text">
                                                <div class="input-group-append">
                                                    <button id="btnYapiRuhsatSorgula" type="button" class="btn btn-primary">
                                                        Sorgula
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="div-yapi-ruhsat-bilgi-sonuc" class="mb-8 d-none">
                                        <div class="alert alert-primary">
                                            <div class="row">
                                                <div class="col-md-6 d-flex flex-column">
                                                    <label class="d-flex align-items-center fs-6 fw-bold mb-2">
                                                        <span>Yapı Kimlik No</span>
                                                    </label>
                                                    <label name="yapiKimlikNo"></label>
                                                </div>
                                                <div class="col-md-6 d-flex flex-column">
                                                    <label class="d-flex align-items-center fs-6 fw-bold mb-2">
                                                        <span>Yapı İnşaat Alanı</span>
                                                    </label>
                                                    <label name="toplamYapiInsaatAlan"></label>
                                                </div>
                                            </div>
                                            <div class="row mt-4">
                                                <div class="col-md-6 d-flex flex-column">
                                                    <label class="d-flex align-items-center fs-6 fw-bold mb-2">
                                                        <span>Bağımsız Bölüm Sayısı</span>
                                                    </label>
                                                    <label name="toplamBBSayi"></label>
                                                </div>
                                                <div class="col-md-6 d-flex flex-column">
                                                    <label class="d-flex align-items-center fs-6 fw-bold mb-2">
                                                        <span>Kat Sayısı</span>
                                                    </label>
                                                    <label name="toplamKatSayi"></label>
                                                </div>
                                            </div>
                                            <div class="row mt-4">
                                                <div class="col-md-6 d-flex flex-column">
                                                    <label class="d-flex align-items-center fs-6 fw-bold mb-2">
                                                        <span>Kot Üstü Kat Sayısı</span>
                                                    </label>
                                                    <label name="yolKotUstKatSayi"></label>
                                                </div>
                                                <div class="col-md-6 d-flex flex-column">
                                                    <label class="d-flex align-items-center fs-6 fw-bold mb-2">
                                                        <span>Kot Altı Kat Sayısı</span>
                                                    </label>
                                                    <label name="yolKotAltKatSayi"></label>
                                                </div>
                                            </div>
                                            <div class="row mt-4">
                                                <div class="col-md-6 d-flex flex-column">
                                                    <label class="d-flex align-items-center fs-6 fw-bold mb-2">
                                                        <span>Açık Adres</span>
                                                    </label>
                                                    <label name="acikAdres"></label>
                                                </div>
                                                <div class="col-md-6 d-flex flex-column">
                                                    <label class="d-flex align-items-center fs-6 fw-bold mb-2">
                                                        <span>Ruhsat Onay Tarihi</span>
                                                    </label>
                                                    <label name="ruhsatOnayTarihi"></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="divKaydetYapiRuhsat" class="row d-none">
                                        <div class="col-md-6">
                                            <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                                <span>Dış Kapı No</span>
                                            </label>
                                            <div class="input-group">
                                                <input type="text"
                                                       data-validate="required"
                                                       data-title="Dış Kapı No"
                                                       class="form-control form-control-solid"
                                                       autocomplete="off"
                                                       placeholder="Lütfen binanın dış kapı numarasını giriniz"
                                                       name="BinaDisKapiNo"
                                                       inputmode="text">
                                            </div>
                                        </div>
                                        <div class="col-md-12 mt-8">
                                            <div class="d-flex flex-column fv-row">
                                                <button type="button" data-step="1" class="btn btn-primary" onclick="KaydetYapiRuhsat()" id="btnKaydetYapiRuhsat">
                                                    Kaydet
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            @* <div class="tab-pane fade" id="kt_vtab_pane_bina" role="tabpanel">
                            <form id="binaIcinYapilanDigerYardimlarForm">
                            <div class="row">
                            <div class="col-md-4 d-flex align-items-center">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                            <input class="form-radio-input h-20px w-20px mr-10" type="radio" name="radio_bina" id="cbYapiDenetimi" data-type-id="1" data-input-date-name="YapiDenetimiTarihi" data-input-number-name="YapiDenetimiTutari">
                            <span for="cbYapiDenetimi">Yapı Denetimi</span>
                            </label>
                            </div>
                            <div class="col-md-4">
                            <div class="d-flex flex-column fv-row">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                            <span>Tarih</span>
                            </label>
                            <input type="date" class="form-control" autocomplete="off" placeholder="Tarih" name="YapiDenetimiTarihi" />
                            </div>
                            </div>
                            <div class="col-md-4">
                            <div class="d-flex flex-column fv-row">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                            <span>Tutar</span>
                            </label>
                            <input type="text" class="form-control double-mask" autocomplete="off" placeholder="Tutar" name="YapiDenetimiTutari" min="0" />
                            </div>
                            </div>
                            </div>
                            <div class="row mt-8">
                            <div class="col-md-4 d-flex align-items-center">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                            <input class="form-radio-input h-20px w-20px mr-10" type="radio" id="cbJeolojikEtudRaporu" name="radio_bina" data-type-id="2" data-input-date-name="JeolojikEtudRaporuTarihi" data-input-number-name="JeolojikEtudRaporuTutari">
                            <span for="cbJeolojikEtudRaporu">Jeolojik Etüd Raporu</span>
                            </label>
                            </div>
                            <div class="col-md-4">
                            <div class="d-flex flex-column fv-row">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                            <span>Tarih</span>
                            </label>
                            <input type="date" class="form-control" autocomplete="off" placeholder="Tarih" name="JeolojikEtudRaporuTarihi" />
                            </div>
                            </div>
                            <div class="col-md-4">
                            <div class="d-flex flex-column fv-row">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                            <span>Tutar</span>
                            </label>
                            <input type="text" class="form-control double-mask" autocomplete="off" placeholder="Tutar" name="JeolojikEtudRaporuTutari" min="0" />
                            </div>
                            </div>
                            </div>
                            <div class="row mt-8">
                            <div class="col-md-4 d-flex align-items-center">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                            <input class="form-radio-input h-20px w-20px mr-10" type="radio" name="radio_bina" id="cbHaritaHazirlanmasi" data-type-id="3" data-input-date-name="HaritaHazirlanmasiTarihi" data-input-number-name="HaritaHazirlanmasiTutari">
                            <span for="cbHaritaHazirlanmasi">Harita Hazırlanması</span>
                            </label>
                            </div>
                            <div class="col-md-4">
                            <div class="d-flex flex-column fv-row">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                            <span>Tarih</span>
                            </label>
                            <input type="date" class="form-control" autocomplete="off" placeholder="Tarih" name="HaritaHazirlanmasiTarihi" />
                            </div>
                            </div>
                            <div class="col-md-4">
                            <div class="d-flex flex-column fv-row">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                            <span>Tutar</span>
                            </label>
                            <input type="text" class="form-control double-mask" autocomplete="off" placeholder="Tutar" name="HaritaHazirlanmasiTutari" min="0" />
                            </div>
                            </div>
                            </div>
                            <div class="row mt-8">
                            <div class="col-md-12">
                            <div class="d-flex flex-column fv-row">
                            <button type="button" data-step="1" class="btn btn-primary" onclick="KaydetBinaDigerYardimlar()" id="btnKaydetBinaDigerYardimlar">
                            Kaydet
                            </button>
                            </div>
                            </div>
                            </div>
                            </form>
                            <form id="modal_bina_form" onsubmit="return false;" novalidate="novalidate" class="form mt-8">
                            <div class="card mb-5 mb-xl-8">
                            <div class="card-header">
                            <h3 class="card-title">Bina İçin Yapılan Diğer Yardımlar Listesi</h3>
                            </div>
                            <div class="card-body py-2 px-6">
                            <div class="table-responsive" style="overflow:hidden">
                            <table class="table table-row-bordered table-striped table-row-gray-200 align-middle"
                            data-name="tableListBina"
                            data-responsive="true"
                            data-searching="true">
                            <thead>
                            <tr class="fw-semibold fs-6 text-gray-800 border-bottom border-gray-200">
                            <th data-name="adi" data-sort="false">Yardım Adı</th>
                            <th data-name="tarihText" data-sort="false">Yardım Tarihi</th>
                            <th data-name="tutar" data-sort="false">Yardım Tutarı</th>
                            </tr>
                            </thead>
                            </table>
                            </div>
                            </div>
                            </div>
                            </form>
                            </div>*@
                            <div class="tab-pane fade" id="kt_vtab_pane_yapi_denetim" role="tabpanel">
                                <form id="yapiDenetimForm">
                                    <div class="row">
                                        <div class="col-md-12 d-flex flex-column">
                                            <label class="form-check form-check-custom form-check-solid me-10">
                                                <input class="form-check-input h-20px w-20px" type="checkbox" name="FenniMesulSeciliMi" value="true">
                                                <span class="form-check-label fw-bold">Fenni Mesul</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="row mt-8" id="divFenniMesul" style="display:none;">
                                        <div class="col-md-6">
                                            <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                                <span>T.C. Kimlik Numarası</span>
                                            </label>
                                            <div class="input-group">
                                                <input type="text"
                                                       data-validate="required, tckn"
                                                       data-title="T.C. Kimlik Numarası"
                                                       data-onenter-submit="true"
                                                       data-onenter-click="#bt_kisiSorgula"
                                                       class="form-control form-control-solid identity-mask"
                                                       autocomplete="off"
                                                       placeholder="T.C. Kimlik Numarası"
                                                       name="FenniMesulTc" />
                                                <div class="input-group-append">
                                                    <button id="bt_kisiSorgula" type="button" data-step="1" class="btn btn-primary">Sorgula</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6" id="divTCBilgiler" style="display:none;">
                                            <h5>T.C. Kimlik Numarasına Ait Kişi Bilgileri</h5>
                                            <div class="alert alert-primary mb-0">
                                                <label id="lb_adSoyad"></label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-8" id="divYibfNo">
                                        <div class="col-md-6 d-flex flex-column">
                                            <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                                <span>YİBF No</span>
                                            </label>
                                            <div class="input-group">
                                                <input type="text"
                                                       data-validate="required, number"
                                                       data-title="YİBF No"
                                                       class="form-control form-control-solid integer-mask"
                                                       placeholder="YİBF No"
                                                       name="YIBFNo" />
                                                <div class="input-group-append">
                                                    <button type="button" data-step="1" class="btn btn-primary" onclick="YIBFNoSorgula()">
                                                        Sorgula
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 d-flex flex-column">
                                            <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                                <span>Seviye Bilgisi : (%)</span>
                                            </label>
                                            <div class="input-group">
                                                <input type="text"
                                                       data-validate="required, number"
                                                       data-title="YİBF No Seviye Bilgisi"
                                                       class="form-control form-control-solid integer-mask"
                                                       placeholder="YİBF No Seviye Bilgisi"
                                                       name="YIBFNoSeviye" disabled />
                                            </div>
                                        </div>
                                    </div>
                                    <hr />
                                    <div class="row" id="divIlerlemeYuzdesi">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="d-flex flex-column fv-row">
                                                    <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                                        <span class="required">İlerleme Yüzdesi</span>
                                                    </label>
                                                    <select name="YapiDenetimIlerlemeYuzdesi" data-validate="required" data-title="İlerleme Yüzdesi" class="form-control form-control-solid select-2">
                                                        <option></option>
                                                        <option value="20">%20</option>
                                                        <option value="60">%60</option>
                                                        <option value="100">%100</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="d-flex flex-column fv-row">
                                                    <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                                        <span>Onaylı Seviye Tespit Tutanağı Belgesi (.pdf, .png, .jpg)</span>
                                                    </label>
                                                    <input data-validate="required"
                                                           accept="image/png, image/jpeg, application/pdf"
                                                           data-title="Onaylı Seviye Tespit Tutanağı Belgesi"
                                                           name="BelgeYapiDenetimDosya"
                                                           type="file"
                                                           class="form-control form-control-solid" autocomplete="off" placeholder="Belge" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-8">
                                        <div class="col-md-12">
                                            <div class="d-flex flex-column fv-row">
                                                <button type="button"
                                                        class="btn btn-primary" id="btnKaydetYapiDenetim">
                                                    Kaydet ve Ödeme Talebi Oluştur
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <div class="card mt-8 mb-5 mb-xl-8">
                                    <div class="card-header">
                                        <h3 class="card-title">Yapı Denetim Seviye Tespit Bilgileri Listesi</h3>
                                    </div>
                                    <div class="card-body py-2 px-6">
                                        <div class="table-responsive">
                                            <table class="table table-row-bordered table-striped table-row-gray-200 align-middle"
                                                   data-name="tableListYapiDenetim"
                                                   data-responsive="true"
                                                   data-searching="true">
                                                <thead>
                                                    <tr class="fw-semibold fs-6 text-gray-800 border-bottom border-gray-200">
                                                        <th data-name="ilerlemeYuzdesi" data-sort="false">İlerleme Yüzdesi</th>
                                                        <th data-name="dosyaAdi" data-sort="false">Belge Adı</th>
                                                        <th data-name="Buttons" class="all text-center" data-sort="false" data-export="false" data-width="80px">İşlem</th>
                                                    </tr>
                                                </thead>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="kt_vtab_pane_odeme_bilgileri" role="tabpanel">
                                <form data-name="tableListNakdiYardimFilter">
                                    <input type="hidden" name="BinaDegerlendirmeId" />
                                </form>
                                <form id="modal_nakli_yardim_taksit_form" onsubmit="return false;" novalidate="novalidate" class="form">
                                    <div class="card mb-5 mb-xl-8">
                                        <div class="card-header">
                                            <h3 class="card-title">Ödeme Bilgileri Listesi</h3>
                                        </div>
                                        <div class="card-body py-2 px-6">
                                            <div class="table-responsive">
                                                <table class="table table-row-bordered table-striped table-row-gray-200 align-middle"
                                                       data-name="tableListNakdiYardim"
                                                       data-responsive="true"
                                                       data-searching="false">
                                                    <thead>
                                                        <tr class="fw-semibold fs-6 text-gray-800 border-bottom border-gray-200">
                                                            <th data-name="seviyeText" class="dt-center" data-sort="false">Seviye</th>
                                                            <th data-name="hibeOdemeTutariText" class="dt-center" data-sort="false">Hibe Tutarı</th>
                                                            <th data-name="krediOdemeTutariText" class="dt-center" data-sort="false">Kredi Tutarı</th>
                                                            <th data-name="digerHibeOdemeTutariText" class="dt-center" data-sort="false">Diğer Hibe Tutarı</th>
                                                            <th data-name="muteahhitYetkiBelgeNo" class="dt-center" data-sort="false">Müteahhit Yetki Belge No</th>
                                                            <th data-name="yibfNoFenniMesulTc" class="dt-center" data-sort="false">Yibf No/Fenni Mesul</th>
                                                            <th data-name="yapiKimlikIzinBelgesi" class="dt-center" data-sort="false">Yapı Kimlik No/İzin Belgesi No</th>
                                                            <th data-name="odemeTarihiText" class="dt-center" data-sort="false">Ödeme Tarihi</th>
                                                            <th data-name="binaOdemeDurumAd" class="dt-center" data-sort="false">Ödeme Durumu</th>
                                                        </tr>
                                                    </thead>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal_kat_karsiligi_imza" style="z-index:9000;" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content rounded">
            <div class="modal-header pb-0 border-0 justify-content-end">
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
            </div>
            <div class="modal-body scroll-y px-10 px-lg-10 pt-0 pb-10">
                <ul class="nav nav-tabs flex-nowrap text-nowrap">
                    <li class="nav-item">
                        <a class="nav-link btn btn-active-light-primary btn-color-gray-600 btn-active-color-primary rounded-bottom-0 active" data-bs-toggle="tab" href="#kt_tab_imza_veren_detay_form"><span class="fs-5 fw-bold">İmza Veren Detay</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn btn-active-light-primary btn-color-gray-600 btn-active-color-primary rounded-bottom-0 disabled" id="tab_sozlesme" data-bs-toggle="tab" href="#kt_tab_imza_veren_detay_sozlesme"><span class="fs-5 fw-bold">Sözleşmeler</span></a>
                    </li>
                </ul>
                <div class="tab-content mt-6">
                    <div class="tab-pane fade show active" id="kt_tab_imza_veren_detay_form" role="tabpanel">
                        <form id="form_kat_karsiligi_imza" onsubmit="return false;" novalidate="novalidate" class="form">
                            <input type="hidden" name="BasvuruId" />
                            <input type="hidden" name="BasvuruKamuUstlenecekId" />
                            <input type="hidden" name="BasvuruImzaVerenId" />
                            <input type="hidden" name="KendimKarsilamakIstiyorum" />
                            <div id="kat_karsiligi_imza_div_tuzel_kisi" class="mt-8" style="display:none;">
                                <div class="row mt-8">
                                    <div class="col-md-6 d-flex flex-column mt-2">
                                        <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Tüzel Kişi Tipi</span>
                                        </label>
                                        <select data-validate="required"
                                                data-title="Tüzel Kişi Tipi"
                                                name="TuzelKisiTipId"
                                                class="form-select select-2"
                                                data-ajax-target="/admin/select/GetirTuzelKisilikTipiListe"
                                                data-custom-value="tuzelKisilikTipiId"
                                                data-custom-text="tuzelKisilikTipiAd" disabled>
                                            <option></option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 d-flex flex-column mt-2">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Vergi Numarası</span>
                                        </label>
                                        <input type="text"
                                               data-title="Vergi Numarası"
                                               class="form-control"
                                               autocomplete="off"
                                               placeholder="Vergi Numarası"
                                               name="TuzelKisiVergiNo" disabled />
                                    </div>
                                    <div class="col-md-6 d-flex flex-column mt-2">
                                        <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Tüzel Kişi Unvanı</span>
                                        </label>
                                        <input type="text" data-validate="required"
                                               data-title="Tüzel Kişi Unvanı"
                                               class="form-control"
                                               autocomplete="off"
                                               placeholder="Tüzel Kişi Unvanı"
                                               name="TuzelKisiAdi" disabled />
                                    </div>
                                    <div class="col-md-6 d-flex flex-column mt-2">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Tüzel Kişi Yetki Türü</span>
                                        </label>
                                        <select name="TuzelKisiYetkiTuru"
                                                class="form-select select-2" disabled>
                                            <option>Tanımsız</option>
                                            <option value="Münferiden">Münferiden</option>
                                            <option value="Hizmete Yetkili">Hizmete Yetkili</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 d-flex flex-column mt-2">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Tüzel Kişi Adres</span>
                                        </label>
                                        <textarea class="form-control form-control-solid" autocomplete="off" placeholder="Tüzel Kişi Adres" name="TuzelKisiAdres" rows="3" disabled></textarea>
                                    </div>
                                </div>
                            </div>
                            <div id="kat_karsiligi_imza_div_gercek_kisi" class="row">
                                <div class="col-md-6">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>T.C. Kimlik No</span>
                                        </label>
                                        <input type="text" class="form-control" name="TcKimlikNo" disabled />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Ad Soyad</span>
                                        </label>
                                        <input type="text" class="form-control" name="AdSoyad" disabled />
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Destek Türü</span>
                                        </label>
                                        <select name="BasvuruDestekTurId" class="form-select select-2"
                                                data-ajax-target="/admin/Select/GetirBasvuruDestekTurListe"
                                                data-custom-value="basvuruDestekTurId" data-custom-text="ad" disabled>
                                            <option></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Başvuru Türü</span>
                                        </label>
                                        <select name="BasvuruTurId" class="form-select select-2"
                                                data-ajax-target="/admin/Select/GetirBasvuruTurListe"
                                                data-custom-value="basvuruTurId" data-custom-text="ad" disabled>
                                            <option></option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-4">
                                <div class="col-6"></div>
                                <div class="row col-6">
                                    <div id="divAhirliKonut" class="col-6 mt-4 d-none">
                                        <div class="col-md-12">
                                            <label class="form-check form-check-custom form-check-solid me-10">
                                                <input class="form-check-input h-20px w-20px" type="checkbox" name="AhirliKonutMu" value="true">
                                                <span class="form-check-label fw-bold">Ahırlı konut</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div id="divKonut" class="col-3 mt-4 d-none">
                                        <div class="col-md-12">
                                            <label class="form-check form-check-custom form-check-solid me-10">
                                                <input class="form-check-input h-20px w-20px" type="checkbox" name="KonutMu" value="true">
                                                <span class="form-check-label fw-bold">Konut</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div id="divIsyeri" class="col-3 mt-4 d-none">
                                        <div class="col-md-12">
                                            <label class="form-check form-check-custom form-check-solid me-10">
                                                <input class="form-check-input h-20px w-20px" type="checkbox" name="IsyeriMi" value="true">
                                                <span class="form-check-label fw-bold">İşyeri</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-4">
                                <div class="col-md-6 divKatKarsiligiImzaHibeTutari d-none">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Hibe Tutarı</span>
                                        </label>
                                        <input type="number" class="form-control" placeholder="Hibe Tutarı" name="HibeOdemeTutar" id="HibeOdemeTutar" disabled />
                                    </div>
                                </div>
                                <div class="col-md-6 divKatKarsiligiImzaKrediTutari d-none">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Kredi Tutarı</span>
                                        </label>
                                        <input type="number" class="form-control" placeholder="Kredi Tutarı" name="KrediOdemeTutar" id="KrediOdemeTutar" disabled />
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-8">
                                <h3 class="modal-title">Dağıtım Cetveli</h3>
                            </div>
                            <div id="divIbanNo" class="row mt-4">
                                <div class="col-md-12">
                                    <label class="form-check form-check-custom form-check-solid me-10 mb-2">
                                        <input class="form-check-input h-20px w-20px" type="checkbox" name="IbanGirildiMi" value="true">
                                        <span class="form-check-label fw-bold">Yapıma yönelik diğer hibe ödemesinden kendi adıma faydalandım</span>
                                    </label>
                                    <input type="text"
                                           class="form-control form-control-solid iban-mask d-none"
                                           placeholder="Iban No"
                                           data-validate="required"
                                           data-title="Iban No"
                                           name="IbanNo" />
                                </div>
                            </div>
                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span class="required">Bağımsız Bölüm m²</span>
                                        </label>
                                        <input type="text"
                                               data-validate="required, number"
                                               data-title="Bağımsız Bölüm m²"
                                               class="form-control double-mask"
                                               placeholder="Bağımsız Bölüm Alanı"
                                               name="BagimsizBolumAlani" />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span class="required">Bağımsız Bölüm No</span>
                                        </label>
                                        <input type="text" data-validate="required" data-title="Bağımsız Bölüm No" class="form-control" placeholder="Bağımsız Bölüm No" name="BagimsizBolumNo" />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Hisse Pay</span>
                                        </label>
                                        <input type="text" data-title="Hisse Pay" class="form-control" placeholder="Hisse Pay" name="HissePay" />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Hisse Payda</span>
                                        </label>
                                        <input type="text" data-title="Hisse Payda" class="form-control" placeholder="Hisse Payda" name="HissePayda" />
                                    </div>
                                </div>
                            </div>
                            <hr class="mt-6" />
                            <div id="divKrediSozlesmeTarihi">
                                <div class="d-flex flex-column fv-row mt-4">
                                    <label class="d-flex align-items-center fs-6 fw-semibold required">
                                        <span>Kredi Sözleşme Tarihi</span>
                                    </label>
                                    <input type="date" class="form-control mt-2" data-validate="required" data-title="Kredi Sözleşme Tarihi" placeholder="Kredi Sözleşme Tarihi" name="SozlesmeTarihi" />
                                </div>
                            </div>
                            <div class="text-center mt-8">
                                <button type="button" class="btn btn-light me-3" data-bs-dismiss="modal">İptal</button>
                                <button type="submit" id="modal_kat_karsiligi_imza_kaydet" class="btn btn-primary">Kaydet</button>
                            </div>
                        </form>
                    </div>
                    <div class="tab-pane fade" id="kt_tab_imza_veren_detay_sozlesme" role="tabpanel">
                        <form id="form_kat_karsiligi_imza_sozlesme" onsubmit="return false;" novalidate="novalidate" class="form">
                            <div id="divKrediSozlesmesiContainer" class="row mt-8">
                                <div class="col-md-12">
                                    <label class="d-flex align-items-center fs-6 fw-semibold required-optional mb-2">
                                        <span>Kredi Sözleşmesi (.pdf, .png, .jpg) [<a href="#" id="btn-imza-veren-detay-sozlesme-yerinde-yapim-kredi-sozlesme" target="_blank">Taslak Kredi Sözleşmesini İndir</a>]</span>
                                    </label>
                                    <div class="input-group mb-5">
                                        <input accept="image/png, image/jpeg, application/pdf"
                                               data-title="Kredi Sözleşmesi"
                                               name="KrediSozlesmesi"
                                               type="file"
                                               class="form-control form-control-solid" autocomplete="off"
                                               placeholder="Kredi Sözleşmesi" />
                                        <a href="#" id="btn-imza-veren-detay-kredi-sozlesmesi-indir" class="input-group-text bg-primary" target="_blank">
                                            <i class="fas fa-download text-light"></i>
                                        </a>
                                        <label class="col-12 d-flex align-items-center fs-6 fw-semibold mb-2" id="KrediSozlesmesiDosyaAdi"></label>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="d-flex flex-column fv-row">
                                        <a href="#" id="btn-imza-veren-detay-sozlesme-kredi-geri-odeme-bilgileri" class="btn btn-sm btn-info" target="_blank">Kredi Geri Ödeme Bilgileri Planı</a>
                                    </div>
                                </div>
                            </div>
                            <div id="divHibeSozlesmesiContainer" class="row mt-8">
                                <div class="col-md-12">
                                    <label class="d-flex align-items-center fs-6 fw-semibold required-optional mb-2">
                                        <span>Hibe Onayı (.pdf, .png, .jpg) [<a href="#" id="btn-imza-veren-detay-sozlesme-hibe-taahhut-sozlesme" target="_blank">Taslak Hibe Onayını İndir</a>]</span>
                                    </label>
                                    <div class="input-group mb-5">
                                        <input accept="image/png, image/jpeg, application/pdf"
                                               data-title="Hibe Onayı"
                                               name="HibeSozlesmesi"
                                               type="file"
                                               class="form-control form-control-solid" autocomplete="off"
                                               placeholder="Hibe Onayı" />
                                        <a href="#" id="btn-imza-veren-detay-hibe-sozlesmesi-indir" class="input-group-text bg-primary" target="_blank">
                                            <i class="fas fa-download text-light"></i>
                                        </a>
                                        <label class="col-12 d-flex align-items-center fs-6 fw-semibold mb-2" id="HibeSozlesmesiDosyaAdi"></label>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center mt-8">
                                <button type="button" class="btn btn-light me-3" data-bs-dismiss="modal">İptal</button>
                                <button type="submit" id="modal_kat_karsiligi_imza_sozlesme_kaydet" class="btn btn-primary">Kaydet</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal_kendim_karsilamak_istiyorum" style="z-index:9000;" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content rounded">
            <div class="modal-header pb-0 border-0 justify-content-end">
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
            </div>
            <div class="modal-body scroll-y px-10 px-lg-10 pt-0 pb-10">
                <ul class="nav nav-tabs flex-nowrap text-nowrap">
                    <li class="nav-item">
                        <a class="nav-link btn btn-active-light-primary btn-color-gray-600 btn-active-color-primary rounded-bottom-0 active" data-bs-toggle="tab" href="#kt_tab_kendim_karsilamak_istiyorum_form"><span class="fs-5 fw-bold">Kendim Karşılamak İstiyorum</span></a>
                    </li>
                </ul>
                <div class="tab-content mt-6">
                    <div class="tab-pane fade show active" id="kt_tab_kendim_karsilamak_istiyorum_form" role="tabpanel">
                        <form id="form_kendim_karsilamak_istiyorum" onsubmit="return false;" novalidate="novalidate" class="form">
                            <input type="hidden" name="BasvuruId" />
                            <input type="hidden" name="BasvuruKamuUstlenecekId" />
                            <input type="hidden" name="BasvuruImzaVerenId" />
                            <div id="divTaahhutnameBelgesiContainer" class="row mt-8">
                                <div class="col-md-12">
                                    <div class="input-group mb-5">
                                        <input accept="image/png, image/jpeg, application/pdf"
                                               data-title="Taahhütname Belgesi"
                                               name="TaahhutnameBelgesi"
                                               type="file"
                                               class="form-control form-control-solid" autocomplete="off"
                                               placeholder="Taahhütname Belgesi" />
                                        <label class="col-12 d-flex align-items-center fs-6 fw-semibold mb-2" id="TaahhutnameBelgesiDosyaAdi"></label>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center mt-8">
                                <button type="button" class="btn btn-light me-3" data-bs-dismiss="modal">İptal</button>
                                <button type="submit" id="modal_kendim_karsilamak_istiyorum_kaydet" class="btn btn-primary">Kaydet</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modal_afad_durum_guncelle" style="z-index:9000;" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content rounded">
            <div class="modal-header">
                <h3 class="modal-title">AFAD Durumunu İptal Et</h3>
                <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                    <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span class="path2"></span></i>
                </div>
            </div>
            <div class="modal-body p-10">
                <form id="form_afad_durum_guncelle" onsubmit="return false;" novalidate="novalidate" class="form">
                    <div class="d-flex flex-column fv-row">
                        <input type="hidden" name="BasvuruId" />
                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2 required">
                            <span>AFAD Belgesi</span>
                        </label>
                        <input required accept="image/png, image/jpeg, application/pdf"
                               data-title="AFAD Belgesi"
                               name="AfadBelge"
                               type="file"
                               class="form-control form-control-solid" autocomplete="off"
                               placeholder="AFAD Belgesi" />
                    </div>
                    <div class="text-center mt-8">
                        <button type="button" class="btn btn-light me-3" data-bs-dismiss="modal">İptal</button>
                        <button type="submit" id="modal_afad_durum_guncelle_kaydet" class="btn btn-primary">Kaydet</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="app-container container-fluid">
    <div class="d-flex flex-column flex-column-fluid">
        <div class="card mb-5 mb-xl-8">
            <div class="card-header collapsible cursor-pointer rotate collapsed" data-bs-toggle="collapse" data-bs-target="#kt_docs_card_collapsible">
                <h3 class="card-title">Filtrele</h3>
                <div class="card-toolbar rotate-180">
                    <i class="ki-duotone ki-down fs-1"></i>
                </div>
            </div>
            <div id="kt_docs_card_collapsible" class="collapse">
                <form data-name="tableListFilter" class="card-body py-2 px-6">
                    <div class="row mt-4">
                        <div class="col-md-3 d-flex flex-column mb-8">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                <span>İl</span>
                            </label>
                            <select name="UavtIlNo"
                                    class="form-select select-2"
                                    data-ajax-target="/admin/uavt/GetirListeDepremIl"
                                    data-custom-value="id"
                                    data-custom-text="ad">
                                <option></option>
                            </select>
                        </div>
                        <div class="col-md-3 d-flex flex-column mb-8">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                <span>İlçe</span>
                            </label>
                            <select name="UavtIlceNo" class="form-select select-2">
                                <option></option>
                            </select>
                        </div>
                        <div class="col-md-3 d-flex flex-column mb-8">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                <span>Mahalle</span>
                            </label>
                            <select name="UavtMahalleNo"
                                    class="form-select select-2">
                                <option></option>
                                @if (_queryStringUavtMahalleNo.Any())
                                {
                                    <option value="@_queryStringUavtMahalleNo[0]" selected="selected">@_queryStringUavtMahalleNo[0]</option>
                                }
                            </select>
                        </div>
                        <div class="col-md-3 d-flex flex-column mb-8">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                <span>Ada No</span>
                            </label>
                            <input type="text"
                                   class="form-control integer-mask"
                                   data-onenter-submit="true"
                                   data-onenter-click="#rapor_sorgula"
                                   autocomplete="off"
                                   placeholder="Ada No"
                                   name="TapuAda" />
                        </div>
                        <div class="col-md-3 d-flex flex-column mb-8">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                <span>Parsel No</span>
                            </label>
                            <input type="text"
                                   class="form-control integer-mask"
                                   data-onenter-submit="true"
                                   data-onenter-click="#rapor_sorgula"
                                   autocomplete="off"
                                   placeholder="Parsel No"
                                   name="TapuParsel" />
                        </div>
                        <div class="col-md-3 d-flex flex-column mb-8">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                <span>Askı Kodu</span>
                            </label>
                            <input type="text" class="form-control"
                                   data-onenter-submit="true"
                                   data-onenter-click="#rapor_sorgula"
                                   autocomplete="off" placeholder="Askı Kodu" name="HasarTespitAskiKodu" value="@_httpContextAccessor.HttpContext.Request.Query["askiKodu"]" />
                        </div>
                        <div class="col-md-6 d-flex flex-column mb-8">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                <span>Başvuru Değerlendirme Durumu</span>
                            </label>
                            <select name="BinaDegerlendirmeDurumId"
                                    class="form-select select-2"
                                    multiple="multiple"
                                    data-ajax-target="/admin/select/GetirBinaDegerlendirmeDurumListe"
                                    data-custom-value="basvuruDurumId"
                                    data-custom-text="ad">
                            </select>
                        </div>
                        <div class="col-md-3 d-flex flex-column mb-8">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                <span>Vergi Kimlik No</span>
                            </label>
                            <input type="text" class="form-control vergino-mask"
                                   data-onenter-submit="true"
                                   data-onenter-click="#rapor_sorgula"
                                   autocomplete="off" placeholder="Vergi Kimlik No" name="VergiKimlikNo" />
                        </div>
                        <div class="col-md-3 d-flex flex-column mb-8">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                <span>Yetki Belge No</span>
                            </label>
                            <input type="text" class="form-control"
                                   data-onenter-submit="true"
                                   data-onenter-click="#rapor_sorgula"
                                   autocomplete="off" placeholder="Yetki Belge No" name="YetkiBelgeNo" />
                        </div>
                        <div class="col-md-6 d-flex flex-column mb-8">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                <span>IBAN No</span>
                            </label>
                            <input type="text"
                                   class="form-control iban-mask"
                                   data-onenter-submit="true"
                                   data-onenter-click="#rapor_sorgula"
                                   autocomplete="off" placeholder="IBAN" name="Iban" />
                        </div>
                        <div class="col-md-3 d-flex flex-column mb-8">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                <span>Oluşturan Kullanıcı</span>
                            </label>
                            <select name="OlusturanKullaniciId"
                                    class="form-select select-2"
                                    data-ajax-target="/admin/kullanici/getirListe"
                                    data-custom-value="kullaniciId"
                                    data-custom-text="adSoyad">
                            </select>
                        </div>
                        <div class="col-md-3 d-flex flex-column mb-8">
                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                <span>Güncelleyen Kullanıcı</span>
                            </label>
                            <select name="GuncelleyenKullaniciId"
                                    class="form-select select-2"
                                    data-ajax-target="/admin/kullanici/getirListe"
                                    data-custom-value="kullaniciId"
                                    data-custom-text="adSoyad">
                            </select>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-md-12 text-right">
                            <button type="reset" id="rapor_filtre_temizle" class="btn btn-dark mr-10">
                                <i class="ki-duotone ki-trash fs-1"><i class="path1"></i><i class="path2"></i><i class="path3"></i><i class="path4"></i><i class="path5"></i></i> Temizle
                            </button>
                            <button type="button" id="rapor_sorgula" class="btn btn-primary">
                                <i class="ki-duotone ki-filter fs-1"><i class="path1"></i><i class="path2"></i></i> Sorgula
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="card mb-5 mb-xl-8">
        <div class="card-header">
            <h3 class="card-title">Yapı Listesi</h3>
            <div class="card-toolbar">
                <ul id="tabTabloRaporGruplu" class="nav nav-tabs nav-line-tabs nav-stretch fs-6 border-0">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" href="#kt_tab_yapi_listesi">Yapı Listesi</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#kt_tab_yapi_listesi_gruplanmamis">Yapı Listesi İndir</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="card-body py-2 px-6">
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="kt_tab_yapi_listesi" role="tabpanel">
                    <div class="table-responsive" style="overflow:hidden" id="gruplanmis">
                        <!-- data-showdetails: start, end, dblclick -->
                        <table class="table table-row-bordered table-striped table-row-gray-200 align-middle dataTable"
                               data-name="tableList"
                               data-ajax-target="@($"{yeniYapiControllerUrl}/GetirListeYeniYapiServerSideGroupped?bosTabloGetir=false")"
                               data-server-side="true"
                               data-rowid="binaDegerlendirmeId"
                               data-showdetails="start,dblclick"
                               data-custom-button="Yeni Yapı Ekle"
                               data-custom-button-function="YeniYapiEkleModal"
                               data-custom-button-param="0"
                               data-responsive="false"
                               data-searching="false">
                            <thead>
                                <tr class="fw-semibold fs-6 text-gray-800 border-bottom border-gray-200">
                                    <th data-name="tapuIlAdi" data-sort="false" data-width="80px">İl</th>
                                    <th data-name="tapuIlceAdi" data-sort="false" data-width="80px">İlçe</th>
                                    <th data-name="tapuMahalleAdi" data-sort="false" data-width="80px">Mahalle</th>
                                    <th data-name="adaParsel" data-sort="false" data-width="70px">Ada/Parsel</th>
                                    <th data-name="eskiAdaParsel" data-sort="false" data-width="70px">Eski Ada/Parsel</th>
                                    <th data-name="adaParselGuncellemeTipiAdi" data-sort="false" data-width="70px">Ada/Parsel Güncelleme Tipi</th>
                                    @*<th data-name="hasarTespitAskiKodu" data-sort="false" data-width="70px">Askı Kodu</th>*@
                                    <th data-name="olusturanKullaniciAdi" data-sort="false" data-width="80px">Oluşturan</th>
                                    <th data-name="guncelleyenKullaniciAdi" data-sort="false" data-width="80px">Güncelleyen</th>
                                    <th data-name="Buttons" class="all text-center" data-sort="false" data-export="false" data-width="45px">İşlem</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
                <div class="tab-pane fade" id="kt_tab_yapi_listesi_gruplanmamis" role="tabpanel">
                    <div class="table-responsive" style="overflow:hidden" id="gruplanmamis">
                        <table class="table table-row-bordered table-striped table-row-gray-200 align-middle"
                               data-name="tableYapiListesiGruplanmamis"
                               data-custom-filter-name="tableListFilter"
                               data-ajax-target="@($"{yeniYapiControllerUrl}/GetirListeYeniYapiServerSideGruplanmamis?bosTabloGetir=true")"
                               data-responsive="true"
                               data-server-side="true"
                               data-searching="false"
                               data-export-buttons="true">
                            <thead>
                                <tr class="fw-semibold fs-6 text-gray-800 border-bottom border-gray-200">
                                    <th class="dt-center" data-name="uavtIlAdi" data-sort="false">İl</th>
                                    <th class="dt-center" data-name="uavtIlceAdi" data-sort="false">İlçe</th>
                                    <th class="dt-center" data-name="uavtMahalleAdi" data-sort="false">Mahalle</th>
                                    <th class="dt-center" data-name="yapiKimlikNo" data-sort="false">Yapı Kimlik No</th>
                                    <th class="dt-center" data-name="adaParsel" data-sort="false">Ada/Parsel</th>
                                    <th class="dt-center" data-name="hasarTespitAskiKodu" data-sort="false">ASKI Kodu</th>
                                    <th class="dt-center" data-name="binaDisKapiNo" data-sort="false">Dış Kapı No</th>
                                    <th class="dt-center" data-name="basvuruDegerlendirmeDurumAd" data-sort="false">Değerlendirme Sonucu</th>
                                    <th class="dt-center" data-name="olusturanKullaniciAdi" data-sort="false">Oluşturan</th>
                                    <th class="dt-center" data-name="guncelleyenKullaniciAdi" data-sort="false">Güncelleyen</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal_sil_yeni_yapi_ruhsatli" style="z-index:9000;" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content rounded">
            <div class="modal-header pb-0 border-0 justify-content-end">
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
            </div>
            <div class="modal-body scroll-y px-10 px-lg-10 pt-0 pb-10">
                <form id="form_yeni_yapi_sil" onsubmit="return false;" novalidate="novalidate" class="form">
                    <input type="hidden" name="BinaDegerlendirmeId" />
                    <div class="mb-13 text-center">
                        <h1 class="mb-3 modal-title">Yapı Silme</h1>
                    </div>
                    <div class="row">
                        <div class="col-md-12 ">
                            <div class="d-flex flex-column fv-row">
                                <label class="d-flex align-items-center fs-6 fw-semibold required mb-2">
                                    <span>Ruhsatlı Yapı Silme İşlemi İçin Gerekçeli Belge (.pdf, .png, .jpg)</span>
                                </label>
                                <input data-validate="required"
                                       accept="image/png, image/jpeg, application/pdf"
                                       data-title="Ruhsatlı Yapı Silme İşlemi İçin Gerekçeli Belge"
                                       name="RuhsatliYapiSilDosya"
                                       type="file"
                                       class="form-control form-control-solid" autocomplete="off" placeholder="Belge" />
                            </div>
                        </div>
                        <div class="col-md-12 mt-4">
                            <div class="d-flex flex-column fv-row">
                                <label class="d-flex align-items-center fs-6 fw-semibold required mb-2">
                                    <span>Açıklama</span>
                                </label>
                                <input data-validate="required" type="text" class="form-control form-control-solid" placeholder="Açıklama" name="aciklama" />
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-8">
                        <button type="button" class="btn btn-light me-3" data-bs-dismiss="modal">İptal</button>
                        <button type="submit" id="modal_ruhsatli_yapi_sil"
                                data-confirm="true"
                                data-confirm-function="RuhsatliYapiSilAjax"
                                data-confirm-text="Ruhsatlı Yapı Silinecek"
                                class="btn btn-primary">
                            Sil
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal_kamu_ustlenecek_malik" style="z-index:9000;" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content rounded">
            <div class="modal-header pb-0 border-0 justify-content-end">
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
            </div>
            <div class="modal-body scroll-y px-10 px-lg-10 pt-0 pb-10">
                <h3 class="modal-title">Kamu Üstlenecek Malik Ekle</h3>
                @* <a class="nav-link btn btn-active-light-primary btn-color-gray-600 btn-active-color-primary rounded-bottom-0 active" data-bs-toggle="tab" href="#kt_tab_imza_veren_detay_form"><span class="fs-5 fw-bold">Kamu Üstlenecek Malik Ekle</span></a> *@
                <div class="tab-content mt-6">
                    <div class="tab-pane fade show active" id="kt_tab_imza_veren_detay_form" role="tabpanel">
                        <form id="form_kamu_ustlenecek_malik" onsubmit="return false;" novalidate="novalidate" class="form">
                            <input type="hidden" name="UavtMahalleNo" />
                            <input type="hidden" name="TapuAda" />
                            <input type="hidden" name="TapuParsel" />
                            <input type="hidden" name="HasarTespitAskiKodu" />
                            <input type="hidden" name="Ad" />
                            <input type="hidden" name="Soyad" />
                            <input type="hidden" name="DogumTarihi" />
                            <div class="row mt-4">
                                <div class="col-6"></div>
                                <div class="row col-6">
                                    <div class="col-6 mt-4">
                                        <div class="col-md-12">
                                            <label class="form-check form-check-custom form-check-solid me-10">
                                                <input class="form-check-input h-20px w-20px" type="checkbox" name="GercekKisiMi" value="true" checked="true">
                                                <span class="form-check-label fw-bold">Gerçek Kisi</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-6 mt-4">
                                        <div class="col-md-12">
                                            <label class="form-check form-check-custom form-check-solid me-10">
                                                <input class="form-check-input h-20px w-20px" type="checkbox" name="TuzelKisiMi" value="true">
                                                <span class="form-check-label fw-bold">Tüzel Kişi</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="divTuzelKisi" class="mt-8" style="display:none;">
                                <div class="row mt-8">
                                    <div class="col-md-6 d-flex flex-column mt-2">
                                        <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Tüzel Kişi Tipi</span>
                                        </label>
                                        <select data-validate="required"
                                                data-title="Tüzel Kişi Tipi"
                                                name="TuzelKisiTipId"
                                                class="form-select select-2"
                                                data-ajax-target="/admin/select/GetirTuzelKisilikTipiListe"
                                                data-custom-value="tuzelKisilikTipiId"
                                                data-custom-text="tuzelKisilikTipiAd">
                                            <option></option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 d-flex flex-column mt-2">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Vergi Numarası</span>
                                        </label>
                                        <input type="text"
                                               data-title="Vergi Numarası"
                                               class="form-control"
                                               autocomplete="off"
                                               placeholder="Vergi Numarası"
                                               name="TuzelKisiVergiNo" />
                                    </div>
                                    <div class="col-md-6 d-flex flex-column mt-2">
                                        <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Tüzel Kişi Unvanı</span>
                                        </label>
                                        <input type="text" data-validate="required"
                                               data-title="Tüzel Kişi Unvanı"
                                               class="form-control"
                                               autocomplete="off"
                                               placeholder="Tüzel Kişi Unvanı"
                                               name="TuzelKisiAdi" />
                                    </div>
                                    <div class="col-md-6 d-flex flex-column mt-2">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Tüzel Kişi Yetki Türü</span>
                                        </label>
                                        <select name="TuzelKisiYetkiTuru"
                                                class="form-select select-2">
                                            <option>Tanımsız</option>
                                            <option value="Münferiden">Münferiden</option>
                                            <option value="Hizmete Yetkili">Hizmete Yetkili</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 d-flex flex-column mt-2">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Tüzel Kişi Adres</span>
                                        </label>
                                        <textarea class="form-control form-control-solid" autocomplete="off" placeholder="Tüzel Kişi Adres" name="TuzelKisiAdres" rows="3"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div id="divGercekKisi" class="row">
                                <div class="col-md-12 d-flex flex-column">
                                    <label class="required d-flex align-items-center fs-6 fw-semibold mb-2">
                                        <span>T.C. Kimlik Numarası</span>
                                    </label>
                                    <div class="input-group">
                                        <input type="text"
                                               data-onenter-submit="true"
                                               data-onenter-click="#bt_malikSorgula"
                                               data-validate="required, tckn"
                                               data-title="T.C. Kimlik Numarası"
                                               class="form-control form-control-solid identity-mask"
                                               autocomplete="off"
                                               placeholder="T.C. Kimlik Numarası"
                                               name="TcKimlikNoRaw" />
                                        <div class="input-group-append">
                                            <button id="bt_malikSorgula" type="button" data-step="1" class="btn btn-primary">
                                                Sorgula
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-4">
                                    <div class="col-md-6">
                                        <div class="d-flex flex-column fv-row">
                                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                                <span>Ad</span>
                                            </label>
                                            <input type="text" class="form-control" name="Ad" id="Ad" disabled />
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="d-flex flex-column fv-row">
                                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                                <span>Soyad</span>
                                            </label>
                                            <input type="text" class="form-control" name="Soyad" id="Soyad" disabled />
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-4">
                                    <div class="col-md-6">
                                        <div class="d-flex flex-column fv-row">
                                            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                                <span>Doğum Tarihi</span>
                                            </label>
                                            <input type="text" class="form-control" name="DogumTarihi" id="DogumTarihi" disabled />
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Destek Türü</span>
                                        </label>
                                        <select name="BasvuruDestekTurId" class="form-select select-2"
                                                data-ajax-target="/admin/Select/GetirBasvuruDestekTurListe"
                                                data-custom-value="basvuruDestekTurId" data-custom-text="ad">
                                            <option></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Başvuru Türü</span>
                                        </label>
                                        <select name="BasvuruTurId" class="form-select select-2"
                                                data-ajax-target="/admin/Select/GetirBasvuruTurListe"
                                                data-custom-value="basvuruTurId" data-custom-text="ad">
                                            <option></option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-4">
                                <div class="col-6"></div>
                                <div class="row col-6">
                                    <div id="divAhirliKonut" class="col-6 mt-4">
                                        <div class="col-md-12">
                                            <label class="form-check form-check-custom form-check-solid me-10">
                                                <input class="form-check-input h-20px w-20px" type="checkbox" name="AhirliKonutMu" value="true">
                                                <span class="form-check-label fw-bold">Ahırlı konut</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div id="divKonut" class="col-3 mt-4">
                                        <div class="col-md-12">
                                            <label class="form-check form-check-custom form-check-solid me-10">
                                                <input class="form-check-input h-20px w-20px" type="checkbox" name="KonutMu" value="true">
                                                <span class="form-check-label fw-bold">Konut</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div id="divIsyeri" class="col-3 mt-4">
                                        <div class="col-md-12">
                                            <label class="form-check form-check-custom form-check-solid me-10">
                                                <input class="form-check-input h-20px w-20px" type="checkbox" name="IsyeriMi" value="true">
                                                <span class="form-check-label fw-bold">İşyeri</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-4">
                                <div class="col-md-6 divKatKarsiligiImzaHibeTutari d-none">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Hibe Tutarı</span>
                                        </label>
                                        <input type="number" class="form-control" placeholder="Hibe Tutarı" name="HibeOdemeTutar" @* disabled *@ />
                                    </div>
                                </div>
                                <div class="col-md-6 divKatKarsiligiImzaKrediTutari d-none">
                                    <div class="d-flex flex-column fv-row">
                                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                                            <span>Kredi Tutarı</span>
                                        </label>
                                        <input type="number" class="form-control" placeholder="Kredi Tutarı" name="KrediOdemeTutar" @* disabled *@ />
                                    </div>
                                </div>
                            </div>

                            <div class="text-center mt-8">
                                <button type="button" class="btn btn-light me-3" data-bs-dismiss="modal">İptal</button>
                                <button type="button" id="btnKamuUstlenecekEkle" class="btn btn-primary">Kaydet</button>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/admin/metronic/assets/plugins/custom/ckeditor/ckeditor-classic.bundle.js"></script>

    <script type="text/javascript">
        let binaRowData = false;
        let BasvuruImzaDosya = false;
        let BaskaParselDosya = false;
        let YapiDenetimIlerlemeBelgesi = false;
        let BelgeYapiDenetimDosya = false;
        let BelgeNakdiYardimTaksitDosya = false;
        let BelgeYapiRuhsatIzinDosya = false;
        let KrediSozlesmesiDosya = false;
        let TaahhutnameBelgesiDosya = false;
        let HibeSozlesmesiDosya = false;
        let BasvuruAfadDurumGuncelleDosya = false;
        let RuhsatliYapiSilDosya = false;
        let BasvuruTuzelYetkiDosyaListe = false;
        let BinaDegerlendirmeTasinmazAfadBasvuruDurumu = false;
        let KamuUslenecekMi = false;
        const BinaDegerlendirmeControllerUrl = "/admin/binadegerlendirme";
        const yeniYapiControllerUrl = '@yeniYapiControllerUrl';

        //#region ...: Document & Event Methods :...

        $(document).ready(function () {
            tuzelGercekKisiTemizle();
            loadTable("[data-name='tableYapiListesiGruplanmamis']", yeniYapiControllerUrl + "/GetirListeYeniYapiServerSideGruplanmamis?bosTabloGetir=true");

            $(document).on('change', "#form_yeni_yapi select[name='UavtIlNo']", function (e) {
                let ilKod = parseInt($(this).val() || 0);

                if (ilKod <= 0) {
                    $("#form_yeni_yapi select[name='UavtIlceNo']").html("<option></option>").trigger("change");
                    return;
                }

                startLoader("#form_yeni_yapi select[name='UavtIlceNo']");
                fillSelect("#form_yeni_yapi select[name='UavtIlceNo']", "/admin/uavt/GetirListeIlce?ilKod=" + ilKod, null, function () {
                    stopLoader("#form_yeni_yapi select[name='UavtIlceNo']");
                    $("#form_yeni_yapi select[name='UavtIlceNo']").val(binaRowData?.uavtIlceNo).change();
                }, function (jqXHR) {
                    toastr.error(getAjaxErrorMessage(jqXHR));
                    stopLoader("#form_yeni_yapi select[name='UavtIlceNo']");
                });
            });
            $(document).on('change', "#form_yeni_ada_parsel select[name='TapuBeyanIlId']", function (e) {
                let takbisIlId = parseInt($(this).val() || 0);

                if (takbisIlId <= 0) {
                    $("select[name='TapuBeyanIlceId']").html("<option></option>").trigger("change");
                    return;
                }

                fillSelect("select[name='TapuBeyanIlceId']", "/admin/takbis/Ilce/GetirListeByTakbisIlId?takbisIlId=" + takbisIlId);
            });
            $(document).on('change', "select[name='TapuBeyanIlceId']", function (e) {
                let takbisIlceId = parseInt($(this).val() || 0);

                if (takbisIlceId <= 0) {
                    $("select[name='TapuBeyanMahalleId']").html("<option></option>").trigger("change");

                    return;
                }

                $("input[name='TapuBeyanIlceAdi']").val($(this).select2('data')[0]?.text?.trim());
                fillSelect("select[name='TapuBeyanMahalleId']", "/admin/takbis/Mahalle/GetirListeByTakbisIlceId?takbisIlceId=" + takbisIlceId);
            });
            $(document).on('change', "select[name='TapuBeyanMahalleId']", function (e) {
                let takbisMahalleId = parseInt($(this).val() || 0);

                if (takbisMahalleId <= 0) {
                    $("select[name='TapuBeyanAda']").html("<option></option>").trigger("change");
                    return;
                }

                $("input[name='TapuBeyanMahalleAdi']").val($(this).select2('data')[0]?.text?.trim());
                fillSelect("select[name='TapuBeyanAda']", "/admin/takbis/Ada/GetirListeByMahalleId?takbisMahalleId=" + takbisMahalleId);
            });
            $(document).on('change', "select[name='TapuBeyanAda']", function (e) {
                let takbisMahalleId = parseInt($("select[name='TapuBeyanMahalleId']").val() || 0);
                let adaNo = parseInt($(this).val() || 0);

                if (takbisMahalleId <= 0 || adaNo < 0) {
                    $("select[name='TapuBeyanParsel']").html("<option></option>").trigger("change");
                    return;
                }

                fillSelect("select[name='TapuBeyanParsel']", "/admin/takbis/Parsel/GetirListeByMahalleId?takbisMahalleId=" + takbisMahalleId + "&adaNo=" + adaNo);
            });

            $(document).on('change', "#form_yeni_yapi select[name='UavtIlceNo']", function (e) {
                let ilceKod = parseInt($(this).val() || 0);

                if (ilceKod <= 0) {
        @if (!_queryStringUavtMahalleNo.Any())
        {
            <text>$("#form_yeni_yapi select[name='UavtMahalleNo']").html("<option></option>").trigger("change"); </text>
        }
                                                                                                                                                                                                                                                                    return;
                }

                startLoader("#form_yeni_yapi select[name='UavtMahalleNo']");
                fillSelect("#form_yeni_yapi select[name='UavtMahalleNo']", "/admin/uavt/GetirListeMahalle?ilceKod=" + ilceKod, null, function () {
                    stopLoader("#form_yeni_yapi select[name='UavtMahalleNo']");
                    $("#form_yeni_yapi select[name='UavtMahalleNo']").val(binaRowData?.uavtMahalleNo).change();
                }, function (jqXHR) {
                    toastr.error(getAjaxErrorMessage(jqXHR));
                    stopLoader("[data-name='tableListFilter'] select[name='UavtMahalleNo']");
                });
            });

            $(document).on('click', "#bt_kisiSorgula", function (e) {
                const input = $("input[name='FenniMesulTc']");
                if (!validateSingleInput(input)) {
                    return;
                }

                startLoader("#modal_degerlendirme_islem");
                Request("/admin/kps/GetirKisiAdSoyadTcDen", { tcKimlikNo: input.val() }, 'get')
                    .done(function (response) {
                        stopLoader("#modal_degerlendirme_islem");

                        if (response?.olumTarih != null) {
                            toastr.error("Sorgulanan kişi vefat ettiği için işleme devam edemezsiniz!");
                        }
                        else {
                            $("#divTCBilgiler").show();
                            $("#lb_adSoyad").html(response.ad + " " + response.soyad);
                        }
                    })
                    .fail(function (jqXHR, textStatus) {
                        stopLoader("#modal_degerlendirme_islem");
                        toastr.error(getAjaxErrorMessage(jqXHR));
                        $("#divTCBilgiler").hide();
                        $("#lb_adSoyad").empty();
                    });
            });

            function TasinmazAfadBasvuruDurumuSorgula(binaDegerlendirmeId) {
                Request("/admin/binaDegerlendirme/GetirBinaDegerlendirmeTasinmazAfadBasvuruDurumu", { binaDegerlendirmeId: binaDegerlendirmeId }, 'get')
                    .done(function (response) {
                        BinaDegerlendirmeTasinmazAfadBasvuruDurumu = response?.tasinmazAfadBasvuruDurumu;
                    })
                    .fail(function (jqXHR, textStatus) {
                        toastr.error(getAjaxErrorMessage(jqXHR));
                    });
            }

            $(document).on('click', "#bt_MuteahhitkisiSorgula", function (e) {
                const input = $("input[name='MuteahhitTc']");
                if (!validateSingleInput(input)) {
                    return;
                }
                startLoader("#modal_degerlendirme_islem");
                Request("/admin/kps/GetirKisiAdSoyadTcDen", { tcKimlikNo: input.val() }, 'get')
                    .done(function (response) {
                        stopLoader("#modal_degerlendirme_islem");

                        if (response?.olumTarih != null) {
                            toastr.error("Sorgulanan kişi vefat ettiği için işleme devam edemezsiniz!");
                        }
                        else {
                            $("#divMTCBilgiler").show();
                            $("#m_adSoyad").html(response.ad + " " + response.soyad);
                            $('#muteahhit_tckn :input, textarea, select').prop("readonly", false);
                            $('#muteahhit_tckn').removeClass("d-none");
                        }
                    })
                    .fail(function (jqXHR, textStatus) {
                        $('#muteahhit_tckn').addClass("d-none");
                        stopLoader("#modal_degerlendirme_islem");
                        toastr.error(getAjaxErrorMessage(jqXHR));
                        $("#divMTCBilgiler").hide();
                        $("#m_adSoyad").empty();
                    });
            });

            $(document).on('click', "#rapor_filtre_temizle", function (e) {
                resetForm($("form[data-name='tableListFilter']"));
                TablolariYukle();
            });

            $(document).on('click', "#rapor_sorgula", function (e) {
                TablolariYukle();
            });

            $(document).on('change', "form[data-name='tableListFilter'] select[name='UavtIlNo']", function (e) {
                let ilKod = parseInt($(this).val() || 0);

                if (ilKod <= 0) {
                    $("form[data-name='tableListFilter'] select[name='UavtIlceNo']").html("<option></option>").trigger("change");
                    return;
                }

                startLoader("form[data-name='tableListFilter'] select[name='UavtIlceNo']");
                fillSelect("form[data-name='tableListFilter'] select[name='UavtIlceNo']", "/admin/uavt/GetirListeIlce?ilKod=" + ilKod, null, function () {
                    stopLoader("form[data-name='tableListFilter'] select[name='UavtIlceNo']");
                }, function (jqXHR) {
                    toastr.error(getAjaxErrorMessage(jqXHR));
                    stopLoader("form[data-name='tableListFilter'] select[name='UavtIlceNo']");
                });
            });

            $(document).on('change', "form[data-name='tableListFilter'] select[name='UavtIlceNo']", function (e) {
                let ilceKod = parseInt($(this).val() || 0);

                if (ilceKod <= 0) {
        @if (!_queryStringUavtMahalleNo.Any())
        {
            <text>$("form[data-name='tableListFilter'] select[name='UavtMahalleNo']").html("<option></option>").trigger("change"); </text>
        }
                                                                                                                                                                                                                                                                    return;
                }

                $("form[data-name='tableListFilter'] input[name='UavtIlceAdi']").val($(this).select2('data')[0]?.text?.trim());

                startLoader("form[data-name='tableListFilter'] select[name='UavtMahalleNo']");
                fillSelect("form[data-name='tableListFilter'] select[name='UavtMahalleNo']", "/admin/uavt/GetirListeMahalle?ilceKod=" + ilceKod, null, function () {
                    stopLoader("form[data-name='tableListFilter'] select[name='UavtMahalleNo']");
                }, function (jqXHR) {
                    toastr.error(getAjaxErrorMessage(jqXHR));
                    stopLoader("[data-name='tableListFilter'] select[name='UavtMahalleNo']");
                });
            });

            $(document).on('click', "#basvuru_filtre_temizle", function (e) {
                resetForm($("[data-name='tableListFilter']"));
            });

            $(document).on('click', "#basvuru_sorgula", function (e) {
                reloadTable("[data-name='tableList']");
            });

            $(document).on('click', "#malik_filtre_temizle", function (e) {
                resetForm($("[data-name='tableMaliklerFilter']"));
            });

            $(document).on('click', "#malik_sorgula", function (e) {
                $("[data-name='tableMaliklerFilter'] input[name='BagimsizBolumlerAlinmasin']").val("true");
                clearTable("[data-name='tableMalikler']");
                $("[data-name='tableMaliklerFilter'] input[name='HasarTespitAskiKodu']").val(binaRowData.hasarTespitAskiKodu);
                reloadTableNewAjaxUrl("[data-name='tableMalikler']", "/admin/basvuru/GetirListeMalikler" + serializeFormToQueryString("[data-name='tableMaliklerFilter']"));
                $("[data-name='tableMaliklerFilter'] input[name='BagimsizBolumlerAlinmasin']").val("false");
            });

            $(document).on('click', "#pasif_malik_filtre_temizle", function (e) {
                resetForm($("[data-name='tablePasifMaliklerFilter']"));
            });

            $(document).on('click', "#pasif_malik_sorgula", function (e) {
                $("[data-name='tablePasifMaliklerFilter'] input[name='BagimsizBolumlerAlinmasin']").val("true");
                clearTable("[data-name='tablePasifMalikler']");
                reloadTableNewAjaxUrl("[data-name='tableMalikler']", "/admin/basvuru/GetirListePasifMalikler" + serializeFormToQueryString("[data-name='tablePasifMaliklerFilter']"));
                $("[data-name='tablePasifMaliklerFilter'] input[name='BagimsizBolumlerAlinmasin']").val("false");
            });

            $(document).on('click', ".yeniYapiGuncelleModal", function (e) {
                $("#form_yeni_yapi select[name='UavtIlNo']").val("").change();
                $("#form_yeni_yapi input[name='Ada']").val("");
                $("#form_yeni_yapi input[name='Parsel']").val("");
                $("#form_yeni_yapi input[name='HasarTespitAskiKodu']").val("");
                $("#form_yeni_yapi input[name='BinaDisKapiNo']").val("");
                $("#form_yeni_yapi input[name='BinaDegerlendirmeId']").val("");

                setSelectReadonly("#form_yeni_yapi select[name='UavtIlNo']");
                setSelectReadonly("#form_yeni_yapi select[name='UavtIlceNo']");
                setSelectReadonly("#form_yeni_yapi select[name='UavtMahalleNo']");
                $("#form_yeni_yapi input[name='HasarTespitAskiKodu']");
                $("#form_yeni_yapi input[name='Ada']").prop("readonly", true);
                $("#form_yeni_yapi input[name='Parsel']").prop("readonly", true);

                $("#form_yeni_yapi .modal-title").html("Yapı Bilgileri Güncelle");
                $("#modal_yeni_yapi_kaydet").html("Güncelle");
                $("#modal_yeni_yapi_kaydet").attr("data-confirm-text", "Yapı bilgileri güncellenecek.");

                let selectedGroupData = selectRowByElem({ tableSelector: "[data-name='tableList']", elem: $(this), isElemChild: true });
                if (!selectedGroupData) return;

                let binaDegerlendirmeId = parseInt($(this).data("binadegerlendirmeid") || 0);

                binaRowData = selectedGroupData.yeniYapiList?.find(x => x.binaDegerlendirmeId == binaDegerlendirmeId);
                if (!binaRowData) return;

                $("#form_yeni_yapi select[name='UavtIlNo']").val(binaRowData.uavtIlNo).change();
                $("#form_yeni_yapi input[name='HasarTespitAskiKodu']").val(binaRowData.hasarTespitAskiKodu);
                $("#form_yeni_yapi input[name='BinaDisKapiNo']").val(binaRowData.binaDisKapiNo ?? "");
                $("#form_yeni_yapi input[name='BinaDegerlendirmeId']").val(binaRowData.binaDegerlendirmeId);
                $("#form_yeni_yapi input[name='Ada']").val(binaRowData.ada);
                $("#form_yeni_yapi input[name='Parsel']").val(binaRowData.parsel);

                $("#modal_yeni_yapi").modal("show");
            });

            $(document).on('click', ".basvuruYapanKisiler", function (e) {
                let selectedGroupData = selectRowByElem({ tableSelector: "[data-name='tableList']", elem: $(this), isElemChild: true });
                if (!selectedGroupData) return;

                let binaDegerlendirmeId = parseInt($(this).data("binadegerlendirmeid") || 0);

                binaRowData = selectedGroupData.yeniYapiList?.find(x => x.binaDegerlendirmeId == binaDegerlendirmeId);
                if (!binaRowData) return;

                $("#divDisKapiNoSec").addClass("d-none");
                $("#modal_degerlendirme_count").html("");
                let title = binaRowData.uavtIlAdi + " / " + binaRowData.uavtIlceAdi + " / "
                    + binaRowData.uavtMahalleAdi + " / " + binaRowData.hasarTespitAskiKodu + " / " + (binaRowData.binaDisKapiNo ?? "");
                $("#modal_degerlendirme_title").html(title);
                $("#modal_degerlendirme_title_id").html("Dış Kapı No: " + (binaRowData.binaDisKapiNo ?? ""));

                if (binaRowData.binaDisKapiNo) {
                    $("#lblDisKapiUyari").html("<strong>UYARI:</strong> Seçilen Başvurular Dış Kapı Numarası <strong>" + binaRowData.binaDisKapiNo + "</strong> olan Binaya aktarılacak.");
                }

                $("[data-name='tableMaliklerFilter'] input[name='UavtMahalleNo']").val(binaRowData.uavtMahalleNo);
                $("[data-name='tableMaliklerFilter'] input[name='HasarTespitAskiKodu']").val(binaRowData.hasarTespitAskiKodu);
                $("[data-name='tableMaliklerFilter'] input[name='TapuAda']").val(binaRowData.ada);
                $("[data-name='tableMaliklerFilter'] input[name='TapuParsel']").val(binaRowData.parsel);


                $("#btnPasifMalikleriListele").attr("data-binadegerlendirmeid", binaDegerlendirmeId);
                $("#btnPasifMalikleriListele").attr("data-uavtmahalleno", binaRowData.uavtMahalleNo);
                $("#btnPasifMalikleriListele").attr("data-hasartespitaskikodu", binaRowData.hasarTespitAskiKodu);
                $("#btnPasifMalikleriListele").attr("data-ada", binaRowData.ada);
                $("#btnPasifMalikleriListele").attr("data-parsel", binaRowData.parsel);

                startLoader("[data-name='tableMaliklerFilter'] select[name='BinaDisKapiNo']");
                fillSelect("[data-name='tableMaliklerFilter'] select[name='BinaDisKapiNo']",
                    "/admin/select/GetirListeYeniYapiDisKapiNo?uavtMahalleNo=" + binaRowData.uavtMahalleNo + "&hasarTespitAskiKodu=" + binaRowData.hasarTespitAskiKodu, null, function () {
                        stopLoader("[data-name='tableMaliklerFilter'] select[name='BinaDisKapiNo']");
                    }, function (jqXHR) {
                        toastr.error(getAjaxErrorMessage(jqXHR));
                        stopLoader("[data-name='tableMaliklerFilter'] select[name='UavtIlceNo']");
                    });

                let tableMalikAjaxUrl = "/admin/basvuru/GetirListeMalikler" + serializeFormToQueryString("[data-name='tableMaliklerFilter']");
                if (isDataTable("[data-name='tableMalikler']")) {
                    clearTable("[data-name='tableMalikler']");
                    reloadTableNewAjaxUrl("[data-name='tableMalikler']", tableMalikAjaxUrl);
                }
                else {
                    loadTable("[data-name='tableMalikler']", tableMalikAjaxUrl);
                }

                $("#modal_degerlendirme").modal("show");
            });

            $(document).on("click", ".yeniYapiBilgileriModal", function (e) {
                let selectedGroupData = selectRowByElem({ tableSelector: "[data-name='tableList']", elem: $(this), isElemChild: true });
                if (!selectedGroupData) return;

                let binaDegerlendirmeId = parseInt($(this).data("binadegerlendirmeid") || 0);

                binaRowData = selectedGroupData.yeniYapiList?.find(x => x.binaDegerlendirmeId == binaDegerlendirmeId);
                if (!binaRowData) return;

                if (!binaRowData.degerlendirmeButonuAktifMi) {
                    toastr.error("Lütfen önce 'Başvuru Yapan Kişiler' sekmesini tamamlayınız.");
                    return;
                }

                ResetAllTabs();

                let title = '[' + binaRowData.binaDegerlendirmeId + '] ' + binaRowData.uavtIlAdi + " / "
                    + binaRowData.uavtIlceAdi + " / " + binaRowData.uavtMahalleAdi
                    + " / " + binaRowData.hasarTespitAskiKodu + " / " + (binaRowData.binaDisKapiNo ?? "");
                $("#binaBasvuruDegerlendirmeHeaderDetail").html(title);

                $('a[href="#kt_vtab_pane_muteahhit"],a[href="#kt_vtab_pane_ruhsat"],a[href="#kt_vtab_pane_yapi_denetim"],a[href="#kt_vtab_pane_odeme_bilgileri"]')
                    .attr("data-bs-toggle", "tab");

                $("form[data-name='tableListBinaFilter'] input[name='UavtMahalleNo']").val(binaRowData.uavtMahalleNo);
                $("form[data-name='tableListBinaFilter'] input[name='HasarTespitAskiKodu']").val(binaRowData.hasarTespitAskiKodu);

                $("form[data-name='tableListYapiDenetimFilter'] input[name='UavtMahalleNo']").val(binaRowData.uavtMahalleNo);
                $("form[data-name='tableListYapiDenetimFilter'] input[name='HasarTespitAskiKodu']").val(binaRowData.hasarTespitAskiKodu);

                $("form[data-name='tableListNakdiYardimFilter'] input[name='BinaDegerlendirmeId']").val(binaRowData.binaDegerlendirmeId);

                $("[name='YapiDenetimiTarihi']").attr('disabled', 'disabled');
                $("[name='JeolojikEtudRaporuTarihi']").attr('disabled', 'disabled');
                $("[name='HaritaHazirlanmasiTarihi']").attr('disabled', 'disabled');
                $("[name='YapiDenetimiTutari']").attr('disabled', 'disabled');
                $("[name='JeolojikEtudRaporuTutari']").attr('disabled', 'disabled');
                $("[name='HaritaHazirlanmasiTutari']").attr('disabled', 'disabled');

                $("[name='FenniMesulSeciliMi']").prop('checked', false);
                $("[name='IzinBelgesiSeciliMi']").prop('checked', false);

                GetirDegerlendirmeDetay();
                GetirBinaIcinYapilanDigerYardimlari();
                GetirYapiDenetimSeviyeTespitBilgileri();
                GetirNakdiYardimTaksitleri();
                TasinmazAfadBasvuruDurumuSorgula(binaRowData.binaDegerlendirmeId);

                $("#modal_degerlendirme_islem").modal("show");
            });

            $(document).on('click', "#bt_yetkiBelgeNoSorgula", function (e) {
                e.preventDefault();

                const input = $('#yetkiBelgeNoFilter');
                if (!validateSingleInput(input)) {
                    return;
                }

                startLoader("#modal_degerlendirme_islem");
                Request(BinaDegerlendirmeControllerUrl + "/GetirYetkiBelgeNoile", { yetkiBelgeNo: input.val(), askiKodu: binaRowData?.hasarTespitAskiKodu, mahalleKodu: binaRowData?.uavtMahalleKodu }, 'get')
                    .done(function (response) {
                        stopLoader("#modal_degerlendirme_islem");

                        $('#muteahhit_belge :input, textarea, select').prop("readonly", true);
                        $(':input[type="submit"]').prop('readonly', false);
                        $(':input[type="button"]').prop('readonly', false);
                        $("input[name='ibanNo']").prop("readonly", false);
                        $("select[name='atamaTipi']").prop("readonly", false);

                        $("input[name='adSoyadUnvan']").val(response?.adSoyadUnvan);
                        $("input[name='aciklama']").val(response?.aciklama);
                        $("textarea[name='adres']").val(response?.adres);
                        $("input[name='cepTelefonu']").val(response?.cepTelefonu);
                        $("input[name='eposta']").val(response?.eposta);
                        $("input[name='vergiKimlikNo']").val(response?.vergiKimlikNo);
                        $("input[name='yetkiBelgeNo']").val(response?.yetkiBelgeNo);
                        $("input[name='telefon']").val(response?.telefon);
                        $("input[name='ibanNo']").val(response?.ibanNo);

                        $('#muteahhit_belge').removeClass("d-none");
                    })
                    .fail(function (jqXHR, textStatus) {
                        $('#muteahhit_belge').addClass("d-none");
                        $("input[name='adSoyadUnvan']").val("");
                        $("input[name='aciklama']").val("");
                        $("textarea[name='adres']").val("");
                        $("input[name='cepTelefonu']").val("");
                        $("input[name='eposta']").val("");
                        $("input[name='vergiKimlikNo']").val("");
                        $("input[name='yetkiBelgeNo']").val("");
                        $("input[name='telefon']").val("");
                        $("input[name='ibanNo']").val("");
                        stopLoader("#modal_degerlendirme_islem");
                        toastr.error(getAjaxErrorMessage(jqXHR));
                    });
            });

            $(document).on('click', "#btnYapiRuhsatSorgula", function (e) {
                e.preventDefault();

                const input = $("#yapiRuhsatForm [name='BultenNo']");
                if (!validateSingleInput(input)) {
                    return;
                }

                const formData = {
                    BinaDegerlendirmeId: binaRowData?.binaDegerlendirmeId,
                    bultenNo: input.val(),
                };
                startLoader("#modal_degerlendirme_islem");
                Request("/admin/yapibelge/GetirBinaDegerlendirmeYapiBelgeRuhsatByBultenNo", formData, 'get')
                    .done(function (response) {
                        stopLoader("#modal_degerlendirme_islem");

                        $.each(response, function (key, value) {
                            if(key=="ruhsatOnayTarihi")
                            $("#div-yapi-ruhsat-bilgi-sonuc label[name='" + key + "']").html(value == null ? "" : dateToString(value));
                            else $("#div-yapi-ruhsat-bilgi-sonuc label[name='" + key + "']").html(value ?? "");
                        });

                        $("#div-yapi-ruhsat-bilgi-sonuc, #divKaydetYapiRuhsat").removeClass("d-none");
                    })
                    .fail(function (jqXHR, textStatus) {
                        stopLoader("#modal_degerlendirme_islem");
                        toastr.error(getAjaxErrorMessage(jqXHR));
                    });
            });
            var orginalHibeOdemeTutari = -1;
            var orginalKrediOdemeTutari = -1;

            function KrediHibeTutariHesapla() {
                let hissePay = $("#form_kat_karsiligi_imza [name='HissePay']").val();
                let hissePayda = $("#form_kat_karsiligi_imza [name='HissePayda']").val();
                let hibeTutar = basvuruImzaVerenData.hibeOdemeTutar;
                let krediTutar = basvuruImzaVerenData.krediOdemeTutar;
                if (!KamuUslenecekMi) {
                    $("#form_kat_karsiligi_imza [name='HibeOdemeTutar']").prop('disabled', true).trigger('change');
                    $("#form_kat_karsiligi_imza [name='KrediOdemeTutar']").prop('disabled', true).trigger('change');
                    if ($("#form_kat_karsiligi_imza [name='AhirliKonutMu']").is(':checked')) {
                        hibeTutar = '@(BasvuruTurEnum.AhirlikonutHibeTutari)';
                        krediTutar = '@(BasvuruTurEnum.AhirlikonutKrediTutari)';
                    }
                    else if ($("#form_kat_karsiligi_imza [name='KonutMu']").is(':checked')) {
                        hibeTutar = '@(BasvuruTurEnum.EvHibeTutari)';
                        krediTutar = '@(BasvuruTurEnum.EvKrediTutari)';
                    }
                    else if ($("#form_kat_karsiligi_imza [name='IsyeriMi']").is(':checked')) {
                        hibeTutar = '@(BasvuruTurEnum.TicarethaneHibeTutari)';
                        krediTutar = '@(BasvuruTurEnum.TicarethaneKrediTutari)';
                    }

                    if (!(($("#form_kat_karsiligi_imza [name='HibeOdemeTutar']").val() === 0 || $("#form_kat_karsiligi_imza [name='HibeOdemeTutar']").val() === "0")
                        && ($("#form_kat_karsiligi_imza [name='KrediOdemeTutar']").val() === 0 || $("#form_kat_karsiligi_imza [name='KrediOdemeTutar']").val() === "0"))) {
                        if (!isNaN(krediTutar) && !isNaN(hibeTutar)) {
                            if (hissePay != "" && hissePayda != "") {
                                if (hibeTutar != null) {
                                    $("#form_kat_karsiligi_imza input[name='HibeOdemeTutar']").val((hibeTutar * hissePay / hissePayda));
                                }
                                if (krediTutar != null) {
                                    $("#form_kat_karsiligi_imza input[name='KrediOdemeTutar']").val(parseFloat(krediTutar * hissePay / hissePayda));
                                }
                            }
                            else {
                                if (hibeTutar != null) {
                                    $("#form_kat_karsiligi_imza input[name='HibeOdemeTutar']").val(parseFloat(hibeTutar));
                                }
                                if (krediTutar != null) {
                                    $("#form_kat_karsiligi_imza input[name='KrediOdemeTutar']").val(parseFloat(krediTutar));
                                }
                            }
                        }
                    } else {
                        if (hibeTutar != null) {
                            $("#form_kat_karsiligi_imza [name='HibeOdemeTutar']").prop('disabled', false).trigger('change');
                            $("#form_kat_karsiligi_imza input[name='HibeOdemeTutar']").val(parseFloat(hibeTutar));
                        }
                        if (krediTutar != null) {
                            $("#form_kat_karsiligi_imza [name='KrediOdemeTutar']").prop('disabled', false).trigger('change');
                            $("#form_kat_karsiligi_imza input[name='KrediOdemeTutar']").val(parseFloat(krediTutar));
                        }
                    }
                } else {
                    if (hibeTutar != null) {
                        $("#form_kat_karsiligi_imza [name='HibeOdemeTutar']").prop('disabled', false).trigger('change');
                        $("#form_kat_karsiligi_imza input[name='HibeOdemeTutar']").val(parseFloat(hibeTutar));
                    }
                    if (krediTutar != null) {
                        $("#form_kat_karsiligi_imza [name='KrediOdemeTutar']").prop('disabled', false).trigger('change');
                        $("#form_kat_karsiligi_imza input[name='KrediOdemeTutar']").val(parseFloat(krediTutar));
                    }
                }

            }
            function KrediHibeTutariHesaplaKamu() {
                let hibeTutar = 0;
                let krediTutar = 0;
                if ($("#form_kamu_ustlenecek_malik [name='AhirliKonutMu']").is(':checked')) {
                    hibeTutar = '@(BasvuruTurEnum.AhirlikonutHibeTutari)';
                    krediTutar = '@(BasvuruTurEnum.AhirlikonutKrediTutari)';
                }
                else if ($("#form_kamu_ustlenecek_malik [name='KonutMu']").is(':checked')) {
                    hibeTutar = '@(BasvuruTurEnum.EvHibeTutari)';
                    krediTutar = '@(BasvuruTurEnum.EvKrediTutari)';
                }
                else if ($("#form_kamu_ustlenecek_malik [name='IsyeriMi']").is(':checked')) {
                    hibeTutar = '@(BasvuruTurEnum.TicarethaneHibeTutari)';
                    krediTutar = '@(BasvuruTurEnum.TicarethaneKrediTutari)';
                }
                if (!isNaN(krediTutar) && !isNaN(hibeTutar)) {
                    if (hibeTutar != null) {
                        $("#form_kamu_ustlenecek_malik input[name='HibeOdemeTutar']").val(parseFloat(hibeTutar));
                    }
                    if (krediTutar != null) {
                        $("#form_kamu_ustlenecek_malik input[name='KrediOdemeTutar']").val(parseFloat(krediTutar));
                    }
                }
            }
            $(document).on("keyup", "#form_kat_karsiligi_imza [name='HissePay']", function (e) {
                KrediHibeTutariHesapla();
            });
            $(document).on("keyup", "#form_kat_karsiligi_imza [name='HissePayda']", function (e) {
                KrediHibeTutariHesapla();
            });

            function imzaVerenDataGoster(selectedRow, response, basvuruImzaVerenData) {
                stopLoader("[data-name='tableMalikler']");
                $("#form_kat_karsiligi_imza [name='BasvuruImzaVerenId']").val(response.basvuruImzaVerenId);
                $("#form_kat_karsiligi_imza [name='SozlesmeTarihi']").val(response.sozlesmeTarihi);
                $("#form_kat_karsiligi_imza [name='TcKimlikNo']").val(response.tcKimlikNo);
                $("#form_kat_karsiligi_imza [name='AdSoyad']").val(response.adSoyad);
                $("#form_kat_karsiligi_imza [name='BasvuruId']").val(selectedRow.basvuruId);
                $("#form_kat_karsiligi_imza [name='BasvuruKamuUstlenecekId']").val(selectedRow.basvuruKamuUstlenecekId);
                $("#form_kat_karsiligi_imza [name='BasvuruTurId']").val(response.basvuruTurId).trigger("change");
                $("#form_kat_karsiligi_imza [name='BasvuruDestekTurId']").val(response.basvuruDestekTurId).trigger("change");
                $("#form_kat_karsiligi_imza [name='HibeOdemeTutar']").val(response.hibeOdemeTutar);
                $("#form_kat_karsiligi_imza [name='KrediOdemeTutar']").val(response.krediOdemeTutar);
                $("#form_kat_karsiligi_imza [name='BagimsizBolumAlani']").val(toNumberFormat(response.bagimsizBolumAlani));
                $("#form_kat_karsiligi_imza [name='BinaDisKapiNo']").val(selectedRow.binaDisKapiNo);
                $("#form_kat_karsiligi_imza [name='BagimsizBolumNo']").val(response.bagimsizBolumNo);
                $("#form_kat_karsiligi_imza [name='IbanNo']").val(response.ibanNo);
                $("#form_kat_karsiligi_imza [name='HissePay']").val(response.hissePay);
                $("#form_kat_karsiligi_imza [name='HissePayda']").val(response.hissePayda);
                $("#form_kat_karsiligi_imza [name='TuzelKisiAdi']").val(response.tuzelKisiAdi);
                $("#form_kat_karsiligi_imza [name='TuzelKisiAdres']").val(response.tuzelKisiAdres);
                $("#form_kat_karsiligi_imza [name='TuzelKisiTipId']").val(response.tuzelKisiTipId).trigger("change");
                $("#form_kat_karsiligi_imza [name='TuzelKisiVergiNo']").val(response.tuzelKisiVergiNo);
                $("#form_kat_karsiligi_imza [name='TuzelKisiYetkiTuru']").val(response.tuzelKisiYetkiTuru).trigger("change");

                if(response.tcKimlikNo==""){
                    $("#kat_karsiligi_imza_div_tuzel_kisi").show();
                    $("#kat_karsiligi_imza_div_gercek_kisi").hide();
                }else{
                    $("#kat_karsiligi_imza_div_tuzel_kisi").hide();
                    $("#kat_karsiligi_imza_div_gercek_kisi").show();
                }
                if (response.hibeOdemeTutar == 0 && response.krediOdemeTutar == 0) {
                    $("#form_kat_karsiligi_imza input[name='KendimKarsilamakIstiyorum']").val(true);
                }

                let ticarethaneMi = basvuruImzaVerenData?.basvuruTurIdOrjinal == '@(BasvuruTurEnum.Ticarethane)';
                // basvuru turu ev ise ve basvuruKamuUstlenecek degilse, yani basvuruId > 0 ise ahirli konut acilacak.
                if (!ticarethaneMi && (selectedRow.basvuruId > 0 || selectedRow.basvuruKamuUstlenecekId > 0)) {
                    $("#divAhirliKonut").removeClass("d-none");
                    $("#form_kat_karsiligi_imza [name='AhirliKonutMu']").prop('checked', response.basvuruTurId == '@(BasvuruTurEnum.AhirliKonut)').trigger('change');
                }
                else {
                    $("#divAhirliKonut").addClass("d-none");
                    $("#form_kat_karsiligi_imza [name='AhirliKonutMu']").prop('checked', false).trigger('change');
                }
                if (selectedRow.basvuruId > 0 || selectedRow.basvuruKamuUstlenecekId > 0) {
                    $("#divKonut").removeClass("d-none");
                    $("#divIsyeri").removeClass("d-none");
                    if (response.basvuruTurId == '@(BasvuruTurEnum.Konut)') {
                        $("#form_kat_karsiligi_imza [name='KonutMu']").prop('checked', response.basvuruTurId == '@(BasvuruTurEnum.Konut)').trigger('change');
                    }
                    else if (response.basvuruTurId == '@(BasvuruTurEnum.Ticarethane)') {

                        $("#form_kat_karsiligi_imza [name='IsyeriMi']").prop('checked', response.basvuruTurId == '@(BasvuruTurEnum.Ticarethane)').trigger('change');
                    }

                }
                else {
                    $("#divKonut").addClass("d-none");
                    $("#divIsyeri").addClass("d-none");
                    $("#form_kat_karsiligi_imza [name='KonutMu']").prop('checked', false).trigger('change');
                    $("#form_kat_karsiligi_imza [name='IsyeriMi']").prop('checked', false).trigger('change');
                }

                if (basvuruImzaVerenData?.basvuruImzaVerenId > 0) {
                    if (($("#form_kat_karsiligi_imza [name='HibeOdemeTutar']").val() === 0 || $("#form_kat_karsiligi_imza [name='HibeOdemeTutar']").val() === "0")
                        && ($("#form_kat_karsiligi_imza [name='KrediOdemeTutar']").val() === 0 || $("#form_kat_karsiligi_imza [name='KrediOdemeTutar']").val() === "0")) {
                        $("a[href='#kt_tab_imza_veren_detay_sozlesme']").addClass("disabled");
                        $("#divKrediSozlesmeTarihi").addClass("d-none");
                        $("#divIbanNo").addClass("d-none");
                        let elem = $("#form_kat_karsiligi_imza input[name='SozlesmeTarihi']");
                        let label = elem.parent().find("label");
                        elem.removeAttr("data-validate");
                        label.removeClass("required");
                    }
                    else {
                        $("a[href='#kt_tab_imza_veren_detay_sozlesme']").removeClass("disabled");
                        $("#divKrediSozlesmeTarihi").removeClass("d-none");
                        $("#divIbanNo").removeClass("d-none");
                        let elem = $("#form_kat_karsiligi_imza input[name='SozlesmeTarihi']");
                        let label = elem.parent().find("label");
                        elem.attr("data-validate", "required");
                        label.addClass("required");
                    }
                }
                else {
                    $("#divKrediSozlesmeTarihi").removeClass("d-none");
                    $("#divIbanNo").removeClass("d-none");
                    let elem = $("#form_kat_karsiligi_imza input[name='SozlesmeTarihi']");
                    let label = elem.parent().find("label");
                    elem.attr("data-validate", "required");
                    label.addClass("required");
                }

                if (IsNullOrEmpty(selectedRow.basvuruGuid)) {
                    $("#btn-imza-veren-detay-sozlesme-kredi-geri-odeme-bilgileri").attr("href", "#").addClass("disabled");
                    $("#btn-imza-veren-detay-sozlesme-hibe-taahhut-sozlesme").attr("href", "#").removeAttr("target");
                    $("#btn-imza-veren-detay-sozlesme-yerinde-yapim-kredi-sozlesme").attr("href", "#").removeAttr("target");
                } else {
                    $("#btn-imza-veren-detay-sozlesme-kredi-geri-odeme-bilgileri").attr("href", "/admin/BasvuruImzaVeren/SozlesmeGeriOdemeBilgileri/" + selectedRow.basvuruGuid + "/").removeClass("disabled");
                    $("#btn-imza-veren-detay-sozlesme-hibe-taahhut-sozlesme").attr("href", "/admin/BasvuruImzaVeren/HibeTaahhutnameSozlesme/" + selectedRow.basvuruGuid + "/").attr("target", "_blank");
                    $("#btn-imza-veren-detay-sozlesme-yerinde-yapim-kredi-sozlesme").attr("href", "/admin/BasvuruImzaVeren/YerindeYapimKrediSozlesme/" + selectedRow.basvuruGuid + "/").attr("target", "_blank");
                }

                if (basvuruImzaVerenData?.ibanGirildiMi) {
                    $("#form_kat_karsiligi_imza [name='IbanGirildiMi']").prop('checked', true).trigger('change');
                    $("[name='IbanNo']").removeClass("d-none");
                }

                imzaVerenDetaySozlesmeSozlesmeGorunurlukAyarla();

                $("#modal_kat_karsiligi_imza").modal("show");
            }

            $(document).on("click", ".btnKatKarsiligiImza", function (e) {
                orginalHibeOdemeTutari = -1;
                orginalKrediOdemeTutari = -1;
                let selectedRow = selectRowByElem({ tableSelector: "[data-name='tableMalikler']", elem: $(this) });
                if (!selectedRow) return;

                if (!selectedRow.imzaVerilebilirMi && (selectedRow.basvuruDurumId == @((int)BasvuruDurumEnum.BasvuruIptalEdildi) || selectedRow.basvuruDurumId == @((int)BasvuruDurumEnum.BasvurunuzIptalEdilmistir))) {
                    deselectRows("[data-name='tableMalikler']");
                    toastr.error("Başvurunuz iptal edildiği için bu işleme devam edilemiyor.");
                    return;
                }
                else if (!selectedRow.imzaVerilebilirMi && selectedRow.basvuruAfadDurumId == @((int)BasvuruAfadDurumEnum.Kabul)) {
                    deselectRows("[data-name='tableMalikler']");
                    toastr.error("Lütfen aktif AFAD başvurunuzu iptal ederek yeniden deneyiniz.");
                    return;
                }

                resetForm($("#form_kat_karsiligi_imza"));
                resetForm($("#form_kat_karsiligi_imza_sozlesme"));

                basvuruImzaVerenData = false;

                $("a[href='#kt_tab_imza_veren_detay_form']").addClass("active").attr("aria-selected", "true");
                $("#kt_tab_imza_veren_detay_form").addClass("active show");

                $("a[href='#kt_tab_imza_veren_detay_sozlesme']").removeClass("active").addClass("disabled").removeAttr("aria-selected");
                $("#kt_tab_imza_veren_detay_sozlesme").removeClass("active show");

                KamuUslenecekMi = false;

                if (selectedRow.basvuruDegerlendirmeDurumAd.includes("Kamu Üstlenecek")) {
                    KamuUslenecekMi = true;
                    $("#tab_sozlesme").hide();
                } else {
                    $("#tab_sozlesme").show();
                }

                const formData = {
                    basvuruId: selectedRow.basvuruId,
                    basvuruKamuUstlenecekId: selectedRow.basvuruKamuUstlenecekId
                };

                startLoader("[data-name='tableMalikler']");
                Request("/admin/basvuruimzaveren/GetirBasvuruImzaByBasvuruId", formData, 'get')
                    .done(function (response) {
                        basvuruImzaVerenData = response;
                        if (response.tasinmazinAfadBasvurusuVarMi == true) {
                            Swal.fire({
                                title: "Devam etmek istiyor musunuz?",
                                text: "Aynı taşınmaz için AFAD hak sahipliği başvurusu bulunduğundan işleme devam edilememektedir! Devam etmek istiyor musunuz?",
                                icon: "warning",
                                showCancelButton: true,
                                cancelButtonText: "Vazgeç",
                                confirmButtonColor: "#DD6B55",
                                confirmButtonText: "Evet",
                            }).then((result) => {
                                if (result.isConfirmed) {
                                    imzaVerenDataGoster(selectedRow, response, basvuruImzaVerenData);
                                }
                                else {
                                    stopLoader("[data-name='tableMalikler']");
                                    return false;
                                }
                            });
                        }
                        else {
                            imzaVerenDataGoster(selectedRow, response, basvuruImzaVerenData);
                        }
                    })
                    .fail(function (jqXHR, textStatus) {
                        deselectRows("[data-name='tableMalikler']");
                        stopLoader("[data-name='tableMalikler']");
                        toastr.error(getAjaxErrorMessage(jqXHR));
                    });
                KrediHibeTutariHesapla();
            });
            $(document).on("click", ".btnKendimKarsilamakIstiyorum", function (e) {
                let selectedRow = selectRowByElem({ tableSelector: "[data-name='tableMalikler']", elem: $(this) });
                if (!selectedRow) return;

                if (!selectedRow.imzaVerilebilirMi && (selectedRow.basvuruDurumId == @((int)BasvuruDurumEnum.BasvuruIptalEdildi) || selectedRow.basvuruDurumId == @((int)BasvuruDurumEnum.BasvurunuzIptalEdilmistir))) {
                    deselectRows("[data-name='tableMalikler']");
                    toastr.error("Başvurunuz iptal edildiği için bu işleme devam edilemiyor.");
                    return;
                }

                resetForm($("#form_kendim_karsilamak_istiyorum"));

                basvuruKendimKarsilamakIstiyorumData = false;


                const formData = {
                    basvuruId: selectedRow.basvuruId,
                    basvuruKamuUstlenecekId: selectedRow.basvuruKamuUstlenecekId
                };

                startLoader("[data-name='tableMalikler']");

                Request("/admin/basvuruimzaveren/GetirBasvuruImzaByBasvuruId", formData, 'get')
                    .done(function (response) {
                        basvuruImzaVerenData = response;
                        stopLoader("[data-name='tableMalikler']");
                        $("#form_kendim_karsilamak_istiyorum [name='BasvuruImzaVerenId']").val(response.basvuruImzaVerenId);
                        $("#form_kendim_karsilamak_istiyorum [name='BasvuruId']").val(selectedRow.basvuruId);
                        $("#form_kendim_karsilamak_istiyorum [name='BasvuruKamuUstlenecekId']").val(selectedRow.basvuruKamuUstlenecekId);
                        $("#form_kendim_karsilamak_istiyorum [name='BasvuruTurId']").val(response.basvuruTurId).trigger("change");
                        $("#form_kendim_karsilamak_istiyorum [name='BasvuruDestekTurId']").val(response.basvuruDestekTurId).trigger("change");

                        $("#modal_kendim_karsilamak_istiyorum").modal("show");
                    })
                    .fail(function (jqXHR, textStatus) {
                        deselectRows("[data-name='tableMalikler']");
                        stopLoader("[data-name='tableMalikler']");
                        toastr.error(getAjaxErrorMessage(jqXHR));
                    });

            });

            $(document).on("click", ".btnAktarKamuUstlenecek", function (e) {
                let selectedRow = selectRowByElem({ tableSelector: "[data-name='tableMalikler']", elem: $(this) });
                if (!selectedRow) return;

                fireConfirmSwal({
                    icon: "info",
                    onconfirm: "AktarKamuUstlenecek",
                    param1: selectedRow.basvuruId,
                    text: `Seçilen başvuru 'Kamu Üstlenecek' durumuna getirilecek. Onaylıyor musunuz?`
                });
            });

            $(document).on("click", ".btnBasvuruIptalEt", function (e) {
                let selectedRow = selectRowByElem({ tableSelector: "[data-name='tableMalikler']", elem: $(this) });
                if (!selectedRow) return;

                $("#modal_basvuru_sonuclandir_form input[name='BasvuruId']").val(selectedRow.basvuruId);
                $("#modal_basvuru_sonuclandir_form input[name='BasvuruKamuUstlenecekId']").val(selectedRow.basvuruKamuUstlenecekId);
                $("#modal_basvuru_sonuclandir").modal("show");
            });

            $(document).on("click", ".btnBasvuruAfadDurumGuncelle", function (e) {
                let selectedRow = selectRowByElem({ tableSelector: "[data-name='tableMalikler']", elem: $(this) });
                if (!selectedRow) return;

                $("#form_afad_durum_guncelle input[name='BasvuruId']").val(selectedRow.basvuruId);
                $("#form_afad_durum_guncelle input[name='AfadBelge']").val("");
                $("#modal_afad_durum_guncelle").modal("show");
            });

            $('#modal_kat_karsiligi_imza').on('hidden.bs.modal', function (event) {
                deselectRows("[data-name='tableMalikler']");
            });
            $('#modal_kendim_karsilamak_istiyorum').on('hidden.bs.modal', function (event) {
                deselectRows("[data-name='tableMalikler']");
                stopLoader("[data-name='tableMalikler']");
            });

            $("#form_kat_karsiligi_imza [name='BasvuruDestekTurId']").on("change", function (e) {
                $("#modal_kat_karsiligi_imza").find(".divKatKarsiligiImzaHibeTutari, .divKatKarsiligiImzaKrediTutari").addClass("d-none");

                let val = parseInt($(this).val() || 0);

                if (val == 1) { // hibe
                    $("#modal_kat_karsiligi_imza [name='KrediOdemeTutar']").val("");
                    $("#modal_kat_karsiligi_imza .divKatKarsiligiImzaHibeTutari").removeClass("d-none col-md-6").addClass("col-md-12");
                }
                else if (val == 2) { // kredi
                    $("#modal_kat_karsiligi_imza [name='HibeOdemeTutar']").val("");
                    $("#modal_kat_karsiligi_imza .divKatKarsiligiImzaKrediTutari").removeClass("d-none col-md-6").addClass("col-md-12");
                }
                else if (val == 3) { // hibe ve kredi
                    $("#modal_kat_karsiligi_imza").find(".divKatKarsiligiImzaHibeTutari, .divKatKarsiligiImzaKrediTutari").removeClass("d-none col-md-12").addClass("col-md-6");
                }
            });
            $("#form_kamu_ustlenecek_malik [name='BasvuruDestekTurId']").on("change", function (e) {
                $("#modal_kamu_ustlenecek_malik").find(".divKatKarsiligiImzaHibeTutari, .divKatKarsiligiImzaKrediTutari").addClass("d-none");

                let val = parseInt($(this).val() || 0);

                if (val == 1) { // hibe
                    $("#modal_kamu_ustlenecek_malik [name='KrediOdemeTutar']").val("");
                    $("#modal_kamu_ustlenecek_malik .divKatKarsiligiImzaHibeTutari").removeClass("d-none col-md-6").addClass("col-md-12");
                }
                else if (val == 2) { // kredi
                    $("#modal_kamu_ustlenecek_malik [name='HibeOdemeTutar']").val("");
                    $("#modal_kamu_ustlenecek_malik .divKatKarsiligiImzaKrediTutari").removeClass("d-none col-md-6").addClass("col-md-12");
                }
                else if (val == 3) { // hibe ve kredi
                    $("#modal_kamu_ustlenecek_malik").find(".divKatKarsiligiImzaHibeTutari, .divKatKarsiligiImzaKrediTutari").removeClass("d-none col-md-12").addClass("col-md-6");
                }
            });

            $("#modal_kat_karsiligi_imza_kaydet").on("click", function (e) {
                e.preventDefault();

                if (!validateForm("#form_kat_karsiligi_imza")) {
                    return;
                }

                let formData = serializeFormAsObject("#form_kat_karsiligi_imza");
                formData.basvuruDestekTurId = basvuruImzaVerenData?.basvuruDestekTurId ?? 0;
                formData.binaDegerlendirmeId = binaRowData?.binaDegerlendirmeId ?? 0;

                formData.hibeOdemeTutar= (formData.hibeOdemeTutar == null || formData.hibeOdemeTutar == undefined) ? undefined  : formData.hibeOdemeTutar;
                formData.krediOdemeTutar = (formData.krediOdemeTutar == null || formData.krediOdemeTutar == undefined) ? undefined : formData.krediOdemeTutar;
                formData.kamuUstlenecekMi = formData.basvuruKamuUstlenecekId > 0;
                if (binaRowData.binaDegerlendirmeDurumId == 7) {
                    deselectRows("[data-name='tableMalikler']");
                    toastr.error("Yapı ruhsatınız onaylandığı için işlem yapılamaz.");
                    return;
                }
                startLoader("#modal_kat_karsiligi_imza");
                Request("/admin/BasvuruImzaVeren/KaydetBasvuruImzaVeren", formData, 'POST')
                    .done(function (response) {
                        stopLoader("#modal_kat_karsiligi_imza");

                        toastr.success("İmza veren detay bilgileri başarıyla kaydedildi.");

                        reloadTable("[data-name='tableMalikler']");

                        basvuruImzaVerenData = response;

                        imzaVerenDetaySozlesmeSozlesmeGorunurlukAyarla();
                        if (formData.basvuruKendimKarsilamakIstiyorumData) {
                            $("a[href='#kt_tab_imza_veren_detay_sozlesme']").removeClass("disabled");
                            $('a[href="#kt_tab_imza_veren_detay_sozlesme"]').tab("show");
                        }
                        $("#modal_kat_karsiligi_imza").modal("hide");
                    })
                    .fail(function (jqXHR, textStatus) {
                        stopLoader("#modal_kat_karsiligi_imza");
                        toastr.error(getAjaxErrorMessage(jqXHR));
                    });
            });

            $("#modal_kat_karsiligi_imza_sozlesme_kaydet").on("click", function (e) {
                e.preventDefault();

                //$('a[href="#kt_vtab_pane_muteahhit"]').attr("data-bs-toggle", "");
                //$('a[href="#kt_vtab_pane_ruhsat"]').attr("data-bs-toggle", "");
                //$('a[href="#kt_vtab_pane_bina"]').attr("data-bs-toggle", "");
                //$('a[href="#kt_vtab_pane_yapi_denetim"]').attr("data-bs-toggle", "");
                //$('a[href="#kt_vtab_pane_odeme_bilgileri"]').attr("data-bs-toggle", "");
                if (!validateForm("#form_kat_karsiligi_imza_sozlesme")) {
                    return;
                }

                let formData = serializeFormAsObject("#form_kat_karsiligi_imza_sozlesme", KrediSozlesmesiDosya, HibeSozlesmesiDosya);
                formData.basvuruImzaVerenId = basvuruImzaVerenData?.basvuruImzaVerenId ?? 0;
                if (binaRowData.binaDegerlendirmeDurumId == 7) {
                    toastr.error("Yapı ruhsatınız onaylandığı için işlem yapılamaz.");
                    return;
                }
                startLoader("#modal_kat_karsiligi_imza");
                Request("/admin/BasvuruImzaVeren/KaydetBasvuruImzaVerenSozlesme", formData, 'POST')
                    .done(function (response) {
                        stopLoader("#modal_kat_karsiligi_imza");

                        toastr.success("Sözleşme bilgileri başarıyla kaydedildi.");

                        basvuruImzaVerenData = response;

                        imzaVerenDetaySozlesmeSozlesmeGorunurlukAyarla();
                    })
                    .fail(function (jqXHR, textStatus) {
                        stopLoader("#modal_kat_karsiligi_imza");
                        toastr.error(getAjaxErrorMessage(jqXHR));
                    });
            });

            $("#modal_kendim_karsilamak_istiyorum_kaydet").on("click", function (e) {
                e.preventDefault();

                //$('a[href="#kt_vtab_pane_muteahhit"]').attr("data-bs-toggle", "");
                //$('a[href="#kt_vtab_pane_ruhsat"]').attr("data-bs-toggle", "");
                //$('a[href="#kt_vtab_pane_bina"]').attr("data-bs-toggle", "");
                //$('a[href="#kt_vtab_pane_yapi_denetim"]').attr("data-bs-toggle", "");
                //$('a[href="#kt_vtab_pane_odeme_bilgileri"]').attr("data-bs-toggle", "");
                if (!validateForm("#form_kendim_karsilamak_istiyorum")) {
                    return;
                }

                let formData = serializeFormAsObject("#form_kendim_karsilamak_istiyorum", TaahhutnameBelgesiDosya);

                startLoader("#modal_kendim_karsilamak_istiyorum");
                Request("/admin/BasvuruImzaVeren/KaydetBasvuruKendimKarsilamakIstiyorum", formData, 'POST')
                    .done(function (response) {
                        stopLoader("#modal_kendim_karsilamak_istiyorum");

                        toastr.success("Feragatname bilgileri başarıyla kaydedildi.");

                        reloadTable("[data-name='tableMalikler']");

                        $("#modal_kendim_karsilamak_istiyorum").modal("hide");
                    })
                    .fail(function (jqXHR, textStatus) {
                        stopLoader("#modal_kendim_karsilamak_istiyorum");
                        toastr.error(getAjaxErrorMessage(jqXHR));
                    });
            });

            $("#modal_afad_durum_guncelle_kaydet").on("click", function (e) {
                e.preventDefault();

                if (!validateForm("#form_afad_durum_guncelle")) {
                    return;
                }

                let formData = serializeFormAsObject("#form_afad_durum_guncelle", BasvuruAfadDurumGuncelleDosya);

                startLoader("#modal_afad_durum_guncelle");
                RequestText("/admin/BasvuruImzaVeren/KaydetBasvuruImzaVerenAfadBelge", formData, 'POST')
                    .done(function (response) {
                        stopLoader("#modal_afad_durum_guncelle");

                        toastr.success("AFAD durumu başarıyla iptal edildi.");
                        $("#modal_afad_durum_guncelle").modal("hide");
                        reloadTable("[data-name='tableMalikler']");

                    })
                    .fail(function (jqXHR, textStatus) {
                        stopLoader("#modal_afad_durum_guncelle");
                        toastr.error(getAjaxErrorMessage(jqXHR));
                    });
            });

            function imzaVerenDetaySozlesmeSozlesmeGorunurlukAyarla() {
                $("#btn-imza-veren-detay-kredi-sozlesmesi-indir, #btn-imza-veren-detay-hibe-sozlesmesi-indir").addClass("d-none");
                $("#KrediSozlesmesiDosyaAdi").text('');
                $("#HibeSozlesmesiDosyaAdi").text('');
                $("#divKrediSozlesmesiContainer").hide();
                $("#divHibeSozlesmesiContainer").hide();
                if (basvuruImzaVerenData) {
                    let krediSozlesmesiData = basvuruImzaVerenData?.basvuruImzaVerenDosyas?.find(x => x.dosyaTurDbId == @((long)BasvuruImzaVerenDosyaTurEnum.KrediSozlesmesi));
                    let hibeOnayiData = basvuruImzaVerenData?.basvuruImzaVerenDosyas?.find(x => x.dosyaTurDbId == @((long)BasvuruImzaVerenDosyaTurEnum.HibeOnayi));

                    if (krediSozlesmesiData) {
                        $("#btn-imza-veren-detay-kredi-sozlesmesi-indir").attr("href", "/admin/BasvuruImzaVeren/BelgeIndirKrediSozlesme/" + krediSozlesmesiData.id + "/").removeClass("d-none");
                        $("#KrediSozlesmesiDosyaAdi").text(krediSozlesmesiData.dosyaAdi);
                    }

                    if (hibeOnayiData) {
                        $("#btn-imza-veren-detay-hibe-sozlesmesi-indir").attr("href", "/admin/BasvuruImzaVeren/BelgeIndirHibeSozlesme/" + hibeOnayiData.id + "/").removeClass("d-none");
                        $("#HibeSozlesmesiDosyaAdi").text(hibeOnayiData.dosyaAdi);
                    }

                    if (basvuruImzaVerenData?.basvuruDestekTurId == '@(BasvuruDestekTurEnum.Hibe)' || basvuruImzaVerenData?.basvuruDestekTurId == '@(BasvuruDestekTurEnum.HibeVeKredi)') {
                        $("#divHibeSozlesmesiContainer").show();
                    }

                    if (basvuruImzaVerenData?.basvuruDestekTurId == '@(BasvuruDestekTurEnum.Kredi)' || basvuruImzaVerenData?.basvuruDestekTurId == '@(BasvuruDestekTurEnum.HibeVeKredi)') {
                        $("#divKrediSozlesmesiContainer").show();
                    }
                }
            }

            $("input:radio[name='radio_bina']").on("change", function (e) {
                const checkedRadioBina = $("[name='radio_bina']:checked");
                const dateName = checkedRadioBina.attr("data-input-date-name");
                const numberName = checkedRadioBina.attr("data-input-number-name");

                $("[name='" + dateName + "']").removeAttr('disabled');
                $("[name='" + numberName + "']").removeAttr('disabled');

                if (checkedRadioBina.attr("data-type-id") == "1") {
                    $("[name='JeolojikEtudRaporuTarihi']").attr('disabled', 'disabled');
                    $("[name='HaritaHazirlanmasiTarihi']").attr('disabled', 'disabled');
                    $("[name='JeolojikEtudRaporuTutari']").attr('disabled', 'disabled');
                    $("[name='HaritaHazirlanmasiTutari']").attr('disabled', 'disabled');
                }
                else if (checkedRadioBina.attr("data-type-id") == "2") {
                    $("[name='YapiDenetimiTarihi']").attr('disabled', 'disabled');
                    $("[name='HaritaHazirlanmasiTarihi']").attr('disabled', 'disabled');
                    $("[name='YapiDenetimiTutari']").attr('disabled', 'disabled');
                    $("[name='HaritaHazirlanmasiTutari']").attr('disabled', 'disabled');
                }
                else if (checkedRadioBina.attr("data-type-id") == "3") {
                    $("[name='YapiDenetimiTarihi']").attr('disabled', 'disabled');
                    $("[name='JeolojikEtudRaporuTarihi']").attr('disabled', 'disabled');
                    $("[name='YapiDenetimiTutari']").attr('disabled', 'disabled');
                    $("[name='JeolojikEtudRaporuTutari']").attr('disabled', 'disabled');
                }
            });

            $("input:checkbox[name='FenniMesulSeciliMi']").change(function () {
                if (this.checked) {
                    $("#divFenniMesul").show();
                    $("#divYibfNo").hide();
                }
                else {
                    $("#divFenniMesul").hide();
                    $("#divYibfNo").show();
                }
            });
            $("input:radio[name='AdaParselGuncellemeTipiId']").change(function () {

                switch (this.value) {
                    case String(@AdaParselGuncellemeTipiEnum.BaskaParsel.GetHashCode()):
                        $("#divBaskaParselFile").show();
                        break;
                    default:
                        $("#form_yeni_ada_parsel input[name='BaskaParselDosya']").val("");
                        $("#divBaskaParselFile").hide();
                        break;

                }
            });
            $("input:radio[name='BinaMuteahhitTapuTurId']").change(function () {

                switch (this.value) {
                    case String(@MuteahhitBilgileriTipEnum.HazineArazisi.GetHashCode()):
                        $("#divTCKN").show();
                        $("#divYetkiBelgesi").hide();
                        ResetMuteahhitBilgileri();
                        break;
                    case String(@MuteahhitBilgileriTipEnum.TescilDisi.GetHashCode()):
                        $("#divTCKN").show();
                        $("#divYetkiBelgesi").hide();
                        ResetMuteahhitBilgileri();
                        break;
                    case String(@MuteahhitBilgileriTipEnum.Muteahhit.GetHashCode()):
                        $("#divYetkiBelgesi").show();
                        $("#divTCKN").hide();
                        ResetMuteahhitBilgileri();
                        break;
                }
            });

            $(document).on("click", "[data-name='tableMalikler'] .cbSec", function () {
                const $this = $(this);
                let currentRow = getRow("[data-name='tableMalikler']", $(this), true, false);
                if (!currentRow) return;

                if (binaRowData.binaDegerlendirmeDurumId == 7) {
                    deselectRows("[data-name='tableMalikler']");
                    toastr.error("Yapı ruhsatınız onaylandığı için işlem yapılamaz.");
                    return;
                }

                let selectedRows = getSelectedRows("[data-name='tableMalikler']");
                if (!selectedRows) {
                    $("#divDisKapiNoSec").addClass("d-none");
                    return;
                }

                // girilen yeni yapının dış kapı numarası boşsa seçime izin verilmiyor.
                if (!binaRowData?.binaDisKapiNo) {
                    deselectRows("[data-name='tableMalikler']");
                    toastr.error("Lütfen önce binaya ait 'Dış Kapı No' bilgisini giriniz.");
                    return;
                }

                if (currentRow.basvuruDurumId == '@((long)BasvuruDurumEnum.BasvuruIptalEdildi)'
                    || currentRow.basvuruDurumId == '@((long)BasvuruDurumEnum.BasvurunuzIptalEdilmistir)'
                ) {
                    toastr.error(`Seçilen başvuru iptal edildiği için işlem yapılamaz.`);
                    deselectRowByElem("[data-name='tableMalikler']", $this);
                    return;
                }

                // kapı numarası zaten aynı ise seçmeye izin verilmiyor.
                if (currentRow.binaDisKapiNo == binaRowData?.binaDisKapiNo) {
                    toastr.error(`Seçilen başvuru zaten ${binaRowData?.binaDisKapiNo} nolu binada olduğu için işlem yapılamaz.`);
                    deselectRowByElem("[data-name='tableMalikler']", $this);
                    return;
                }

                $("#divDisKapiNoSec").removeClass("d-none");
            });

            $(document).on("click", "[data-name='tablePasifMalikler'] .cbSec", function () {
                const $this = $(this);
                let currentRow = getRow("[data-name='tablePasifMalikler']", $(this), true, false);
                if (!currentRow) return;

                let selectedRows = getSelectedRows("[data-name='tablePasifMalikler']");
                if (!selectedRows) {
                    $("#divKamuUstlenecekSec").addClass("d-none");
                    return;
                }
                debugger;

                let malikListesi = $("[data-name='tableMalikler']").DataTable().data().toArray();
                if (malikListesi.some(function (malik) { return malik.tcKimlikNoRaw == currentRow.tcKimlikNoRaw && malik.bagimsizBolumNo == currentRow.tapuBagimsizBolumNo })) {
                    toastr.error(`Seçilen malik ${currentRow.ad} ${currentRow.soyad} daha önce seçildiği için işlem yapılamaz.`);
                    deselectRowByElem("[data-name='tablePasifMalikler']", $this);
                    return;
                }

                $("#divKamuUstlenecekSec").removeClass("d-none");
            });

            $(document).on("click", "#btnKamuUstlenecekSec", function () {
                if (!binaRowData) return;

                let selectedRows = getSelectedRows("[data-name='tablePasifMalikler']");
                if (!selectedRows) {
                    toastr.error("Lütfen en az bir adet malik seçiniz.");
                    return;
                }
                fireConfirmSwal({
                    icon: "info",
                    onconfirm: "KaydetPasifMalikKamuUstlenecek",
                    param1: selectedRows,
                    text: selectedRows.length + " adet malik kamu üstlenecek olarak kayıt edilecek, devam etmek istiyor musunuz?"
                });

            });

            $(document).on("click", "#btnKamuUstlenecekEkle", function () {

                if (!validateForm("#form_kamu_ustlenecek_malik")) {
                    return;
                }

                let selectedRows = [];
                let formData = serializeFormAsObject("#form_kamu_ustlenecek_malik", binaRowData);
                formData.basvuruDurumId = @((int)BasvuruDurumEnum.BasvurunuzDegerlendirmeAsamasindadir);
                selectedRows.push(formData);

                if (!selectedRows) {
                    toastr.error("Lütfen en az bir adet malik seçiniz.");
                    return;
                }
                fireConfirmSwal({
                    icon: "info",
                    onconfirm: "KaydetPasifMalikKamuUstlenecek",
                    param1: selectedRows,
                    text: selectedRows.length + " adet malik kamu üstlenecek olarak kayıt edilecek, devam etmek istiyor musunuz?"
                });
            });


            $(document).on("click", "#btnDisKapiNoSec", function () {
                if (!binaRowData) return;

                if (binaRowData.binaDegerlendirmeDurumId == 7) {
                    deselectRows("[data-name='tableMalikler']");
                    toastr.error("Yapı ruhsatınız onaylandığı için işlem yapılamaz.");
                    return;
                }
                let selectedRows = getSelectedRows("[data-name='tableMalikler']");
                if (!selectedRows) {
                    toastr.error("Lütfen en az bir adet başvuru seçiniz.");
                    return;
                }

                const formData = {
                    binaDegerlendirmeId: binaRowData.binaDegerlendirmeId,
                    basvuruIds: selectedRows.map(x => x.basvuruId),
                    basvuruKamuUstlenecekIds: selectedRows.map(x => x.basvuruKamuUstlenecekId),
                };

                startLoader("#modal_degerlendirme");
                Request("/admin/BasvuruDegerlendirme/GuncelleYeniYapiDisKapiNo", formData, 'post')
                    .done(function (response) {
                        stopLoader("#modal_degerlendirme");
                        toastr.success("İşlem başarıyla tamamlandı.");

                        reloadTable("[data-name='tableMalikler']");
                        reloadTable("[data-name='tableList']");
                        $("#divDisKapiNoSec").addClass("d-none");
                    })
                    .fail(function (jqXHR, textStatus) {
                        stopLoader("#modal_degerlendirme");
                        toastr.error(getAjaxErrorMessage(jqXHR));
                    });
            });

            $("#form_kat_karsiligi_imza [name='AhirliKonutMu']").change(function () {
                let ticarethaneMi = basvuruImzaVerenData?.basvuruTurIdOrjinal == '@(BasvuruTurEnum.Ticarethane)';

                if (this.checked) {
                    if (ticarethaneMi /* || basvuruImzaVerenData?.basvuruKamuUstlenecekId > 0 */) return;
                    let hibeTutar = '@(BasvuruTurEnum.AhirlikonutHibeTutari)';
                    let krediTutar = '@(BasvuruTurEnum.AhirlikonutKrediTutari)';

                    $("#form_kat_karsiligi_imza [name='KonutMu']").prop('checked', false).trigger('change');
                    $("#form_kat_karsiligi_imza [name='IsyeriMi']").prop('checked', false).trigger('change');
                    if (!(($("#form_kat_karsiligi_imza [name='HibeOdemeTutar']").val() === 0 || $("#form_kat_karsiligi_imza [name='HibeOdemeTutar']").val() === "0")
                        && ($("#form_kat_karsiligi_imza [name='KrediOdemeTutar']").val() === 0 || $("#form_kat_karsiligi_imza [name='KrediOdemeTutar']").val() === "0"))) {
                        KrediHibeTutariHesapla();
                    }
                    $("#form_kat_karsiligi_imza [name='BasvuruTurId']").val('@(BasvuruTurEnum.AhirliKonut)').change();

                }
                else {
                    let hibeTutar = !ticarethaneMi ? '@(BasvuruTurEnum.EvHibeTutari)' : '@(BasvuruTurEnum.TicarethaneHibeTutari)';
                    let krediTutar = !ticarethaneMi ? '@(BasvuruTurEnum.EvKrediTutari)' : '@(BasvuruTurEnum.TicarethaneKrediTutari)';
                    $("#form_kat_karsiligi_imza [name='BasvuruTurId']").val(basvuruImzaVerenData?.basvuruTurIdOrjinal).change();
                    if (!(($("#form_kat_karsiligi_imza [name='HibeOdemeTutar']").val() === 0 || $("#form_kat_karsiligi_imza [name='HibeOdemeTutar']").val() === "0")
                        && ($("#form_kat_karsiligi_imza [name='KrediOdemeTutar']").val() === 0 || $("#form_kat_karsiligi_imza [name='KrediOdemeTutar']").val() === "0"))) {
                        KrediHibeTutariHesapla();
                    }
                }
            });
            $("#form_kat_karsiligi_imza [name='KonutMu']").change(function () {
                if (this.checked) {
                    // if (basvuruImzaVerenData?.basvuruKamuUstlenecekId > 0) return;

                    $("#form_kat_karsiligi_imza [name='AhirliKonutMu']").prop('checked', false).trigger('change');
                    $("#form_kat_karsiligi_imza [name='IsyeriMi']").prop('checked', false).trigger('change');
                    $("#form_kat_karsiligi_imza [name='BasvuruTurId']").val('@(BasvuruTurEnum.Konut)').change();
                }
                else {
                    $("#form_kat_karsiligi_imza [name='BasvuruTurId']").val(basvuruImzaVerenData?.basvuruTurIdOrjinal).change();
                }
            });
            $("#form_kat_karsiligi_imza [name='IsyeriMi']").change(function () {
                if (this.checked) {
                    // if (basvuruImzaVerenData?.basvuruKamuUstlenecekId > 0) return;

                    $("#form_kat_karsiligi_imza [name='AhirliKonutMu']").prop('checked', false).trigger('change');
                    $("#form_kat_karsiligi_imza [name='KonutMu']").prop('checked', false).trigger('change');
                    $("#form_kat_karsiligi_imza [name='BasvuruTurId']").val('@(BasvuruTurEnum.Ticarethane)').change();
                }
                else {
                    $("#form_kat_karsiligi_imza [name='BasvuruTurId']").val(basvuruImzaVerenData?.basvuruTurIdOrjinal).change();
                }
            });

            $("#form_kamu_ustlenecek_malik [name='AhirliKonutMu']").change(function () {
                let ticarethaneMi = $("#form_kamu_ustlenecek_malik [name='BasvuruTurId']").val() == '@(BasvuruTurEnum.Ticarethane)';

                if (this.checked) {
                    if (ticarethaneMi) return;
                    let hibeTutar = '@(BasvuruTurEnum.AhirlikonutHibeTutari)';
                    let krediTutar = '@(BasvuruTurEnum.AhirlikonutKrediTutari)';

                    $("#form_kamu_ustlenecek_malik [name='KonutMu']").prop('checked', false).trigger('change');
                    $("#form_kamu_ustlenecek_malik [name='IsyeriMi']").prop('checked', false).trigger('change');
                    KrediHibeTutariHesaplaKamu();
                    $("#form_kamu_ustlenecek_malik [name='BasvuruTurId']").val('@(BasvuruTurEnum.AhirliKonut)').change();

                }
                else {
                    let hibeTutar = !ticarethaneMi ? '@(BasvuruTurEnum.EvHibeTutari)' : '@(BasvuruTurEnum.TicarethaneHibeTutari)';
                    let krediTutar = !ticarethaneMi ? '@(BasvuruTurEnum.EvKrediTutari)' : '@(BasvuruTurEnum.TicarethaneKrediTutari)';
                    KrediHibeTutariHesaplaKamu();
                }
            });
            $("#form_kamu_ustlenecek_malik [name='KonutMu']").change(function () {
                if (this.checked) {
                    $("#form_kamu_ustlenecek_malik [name='AhirliKonutMu']").prop('checked', false).trigger('change');
                    $("#form_kamu_ustlenecek_malik [name='IsyeriMi']").prop('checked', false).trigger('change');
                    $("#form_kamu_ustlenecek_malik [name='BasvuruTurId']").val('@(BasvuruTurEnum.Konut)').change();
                }
                else {
                    // $("#form_kamu_ustlenecek_malik [name='BasvuruTurId']").val(basvuruImzaVerenData?.basvuruTurIdOrjinal).change();
                }
            });
            $("#form_kamu_ustlenecek_malik [name='IsyeriMi']").change(function () {
                if (this.checked) {
                    // if (basvuruImzaVerenData?.basvuruKamuUstlenecekId > 0) return;

                    $("#form_kamu_ustlenecek_malik [name='AhirliKonutMu']").prop('checked', false).trigger('change');
                    $("#form_kamu_ustlenecek_malik [name='KonutMu']").prop('checked', false).trigger('change');
                    $("#form_kamu_ustlenecek_malik [name='BasvuruTurId']").val('@(BasvuruTurEnum.Ticarethane)').change();
                }
                else {
                    // $("#form_kamu_ustlenecek_malik [name='BasvuruTurId']").val(basvuruImzaVerenData?.basvuruTurIdOrjinal).change();
                }
            });

            // $(document).on('change', "#cbTuzelKisiBasvuru", function (e) {
            //     let secilen = $(this).is(':checked');
            //     if (secilen === true) {
            //         $("#divTuzelKisi").show();
            //     }
            //     else if (secilen === false) {
            //         $("#divTuzelKisi").hide();
            //         tuzelKisiTemizle();
            //     }
            //     //uavtBeyanMaksDegistir($("input:checkbox[id='cbTuzelKisiBasvuru']")[0].checked)
            // });

            $("#form_kamu_ustlenecek_malik [name='GercekKisiMi']").change(function () {
                let secilen = $(this).is(':checked');
                if (secilen === true) {
                    $("input:checkbox[name='TuzelKisiMi']")[0].checked = false;
                    $("#divTuzelKisi").hide();
                    $("#divGercekKisi").show();
                }
                else if (secilen === false) {
                    $("input:checkbox[name='TuzelKisiMi']")[0].checked = true;
                    $("#divTuzelKisi").show();
                    $("#divGercekKisi").hide();
                }
                tuzelGercekKisiTemizle();
            });
            $("#form_kamu_ustlenecek_malik [name='TuzelKisiMi']").change(function () {
                let secilen = $(this).is(':checked');
                if (secilen === true) {
                    $("input:checkbox[name='GercekKisiMi']")[0].checked = false;
                    $("#divGercekKisi").hide();
                    $("#divTuzelKisi").show();
                }
                else if (secilen === false) {
                    $("input:checkbox[name='GercekKisiMi']")[0].checked = true;
                    $("#divGercekKisi").show();
                    $("#divTuzelKisi").hide();
                }
                tuzelGercekKisiTemizle();
            });

            $("#form_kat_karsiligi_imza [name='IbanGirildiMi']").change(function () {
                if (this.checked) {
                    $("[name='IbanNo']").removeClass("d-none");
                }
                else {
                    $("[name='IbanNo']").addClass("d-none");
                    $("[name='IbanNo']").val("");
                }
            });

            $("input:checkbox[name='IzinBelgesiSeciliMi']").change(function () {
                if (binaRowData?.bultenNo > 0 || binaRowData?.izinBelgesiSayi > 0) {
                    return;
                }

                if (this.checked) {
                    $("#divIzinBelgesi, #divKaydetYapiRuhsat").removeClass("d-none");
                    $("#divBultenNo, #div-yapi-ruhsat-bilgi-sonuc").addClass("d-none");
                }
                else {
                    $("#divIzinBelgesi, #divKaydetYapiRuhsat").addClass("d-none");
                    $("#divBultenNo").removeClass("d-none");
                }
            });

            $('#modal_basvuru_sonuclandir').on('hidden.bs.modal', function (event) {
                $("#modal_basvuru_sonuclandir_form input[name='BasvuruId']").val("");
                $("#modal_basvuru_sonuclandir_form input[name='BasvuruKamuUstlenecekId']").val("");
                $("#modal_basvuru_sonuclandir_form select[name='BasvuruIptalTurId']").val("").change();
            });

            $(document).on('click', "#modal_basvuru_sonuclandir_kaydet", function (e) {
                e.preventDefault();

                if (!validateForm("#modal_basvuru_sonuclandir_form")) {
                    return;
                }

                if ($("select[name='BasvuruIptalTurId']").val() == null || $("select[name='BasvuruIptalTurId']").val() == '') {
                    toastr.error("Başvuru İptal Türü Seçiniz !");
                    return;
                }

                let formData = serializeFormAsObject("#modal_basvuru_sonuclandir_form");

                startLoader("#modal_basvuru_sonuclandir");
                RequestText("/admin/basvuru/BasvuruSonuclandir", formData, 'post')
                    .done(function (response) {
                        stopLoader("#modal_basvuru_sonuclandir");

                        $("#modal_basvuru_sonuclandir").modal("hide");

                        toastr.success(response);
                        reloadTable("[data-name='tableMalikler']");
                    })
                    .fail(function (jqXHR, textStatus) {
                        stopLoader("#modal_basvuru_sonuclandir");
                        toastr.error(getAjaxErrorMessage(jqXHR));
                    });
            });

            $(document).on('click', "#modal_basvuru_sonuclandir_iptal", function (e) {
                $("#modal_basvuru_sonuclandir").modal("hide");
            });

            $(document).on('click', "#btnKaydetYapiDenetim", function (e) {
                if (!validateForm("#yapiDenetimForm")) {
                    return;
                }

                const fenniMesulSeciliMi = $("[name='FenniMesulSeciliMi']").is(":checked");
                if (fenniMesulSeciliMi && !($("#lb_adSoyad").html().length > 0)) {
                    toastr.error("Lütfen önce 'Fenni Mesul Kişi' sorgulaması yapınız.");
                    return;
                }

                const ilerlemeYuzdesi = $("select[name='YapiDenetimIlerlemeYuzdesi']").val();
                fireConfirmSwal({
                    icon: "info",
                    onconfirm: "KaydetYapiDenetim",
                    text: "Seviye %" + ilerlemeYuzdesi + " olarak seçildi, ödeme talebi oluşturmak istiyor musunuz?"
                });
            });

            $(document).on('click', 'a[href="#kt_vtab_pane_bina"]', function (e) {
                if (!(binaRowData?.bultenNo > 0) && !(binaRowData?.izinBelgesiSayi > 0)) {
                    e.preventDefault();
                    toastr.error("Lütfen önce 'Yapı Ruhsat Bilgileri' sekmesini doldurunuz.");
                    return;
                }
            });

            // #region  ...: Dosya Yüklerken İçeride Kullanım İçin Obje Değişekene Atanır. :...
            onFileChange("input[name='BasvuruImzaDosya']", function (returnObj) {
                BasvuruImzaDosya = returnObj;
            });

            onFileChange("input[name='BaskaParselDosya']", function (returnObj) {
                BaskaParselDosya = returnObj;
            });

            onFileChange("input[name='YapiDenetimIlerlemeBelgesi']", function (returnObj) {
                YapiDenetimIlerlemeBelgesi = returnObj;
            });

            onFileChange("input[name='BelgeYapiDenetimDosya']", function (returnObj) {
                BelgeYapiDenetimDosya = returnObj;
            });

            onFileChange("input[name='BelgeNakdiYardimTaksitDosya']", function (returnObj) {
                BelgeNakdiYardimTaksitDosya = returnObj;
            });

            onFileChange("input[name='BelgeYapiRuhsatIzinDosya']", function (returnObj) {
                BelgeYapiRuhsatIzinDosya = returnObj;
            });

            onFileChange("input[name='KrediSozlesmesi']", function (returnObj) {
                KrediSozlesmesiDosya = returnObj;
            }, false);

            onFileChange("input[name='TaahhutnameBelgesi']", function (returnObj) {
                TaahhutnameBelgesiDosya = returnObj;
            }, false);

            onFileChange("input[name='HibeSozlesmesi']", function (returnObj) {
                HibeSozlesmesiDosya = returnObj;
            }, false);

            onFileChange("input[name='AfadBelge']", function (returnObj) {
                BasvuruAfadDurumGuncelleDosya = returnObj;
            }, false);

            onFileChange("input[name='RuhsatliYapiSilDosya']", function (returnObj) {
                RuhsatliYapiSilDosya = returnObj;
            }, false);

            $(document).on("click", "#tabTabloRaporGruplu li a", function () {
                $("[data-name='tableList'], [data-name='tableYapiListesiGruplanmamis']").DataTable().columns.adjust();
            });

            // #endregion  ...: Dosya Yüklerken İçeride Kullanım İçin Obje Değişekene Atanır. :...
        });

        function AktarKamuUstlenecek(basvuruId) {
            startLoader("[data-name='tableMalikler']");
            RequestText("/admin/basvuru/AktarKamuUstlenecek", { basvuruId: basvuruId }, 'post')
                .done(function (response) {
                    stopLoader("[data-name='tableMalikler']");

                    toastr.success("Başvuru 'Kamu Üstlenecek' olarak ayarlandı.");

                    reloadTable("[data-name='tableMalikler']");
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader("[data-name='tableMalikler']");
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }

        function SilYeniYapi(id) {
            startLoader("[data-name='tableList']");
            Request("/admin/basvurudegerlendirme/SilYeniYapi", { binaDegerlendirmeId: id }, 'post')
                .done(function (response) {
                    stopLoader("[data-name='tableList']");
                    toastr.success("Yapı başarıyla silindi.");

                    reloadTable("[data-name='tableList']");
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader("[data-name='tableList']");
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }

        $(document).on('click', ".silYeniYapiRuhsatliModal", function (e) {
            $("#form_yeni_yapi_sil input[name='BinaDegerlendirmeId']").val("");
            let binaDegerlendirmeId = parseInt($(this).data("binadegerlendirmeid") || 0);
            $("#form_yeni_yapi_sil input[name='BinaDegerlendirmeId']").val(binaDegerlendirmeId);
            $("#modal_sil_yeni_yapi_ruhsatli").modal("show");
        });

        function RuhsatliYapiSilAjax() {
            if (!validateForm("#form_yeni_yapi_sil")) {
                return;
            }

            let formData = serializeFormAsObject("#form_yeni_yapi_sil", RuhsatliYapiSilDosya);

            startLoader("#modal_sil_yeni_yapi_ruhsatli");
            Request("/admin/basvurudegerlendirme/SilYeniYapi", formData, 'post')
                .done(function (response) {
                    stopLoader("#modal_sil_yeni_yapi_ruhsatli");
                    toastr.success("Yapı başarıyla silindi.");
                    reloadTable("[data-name='tableList']");
                    $("#modal_sil_yeni_yapi_ruhsatli").modal("hide")
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader("#modal_sil_yeni_yapi_ruhsatli");
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }

        function YeniYapiEkleModal(binaDegerlendirmeId = 0) {
            binaRowData = selectRowByElem({ tableSelector: "[data-name='tableList']", elem: $("#" + binaDegerlendirmeId) });

            $("#form_yeni_yapi select[name='UavtIlNo']").val("").change();
            $("#form_yeni_yapi input[name='HasarTespitAskiKodu']").val("");
            $("#form_yeni_yapi input[name='Ada']").val("");
            $("#form_yeni_yapi input[name='Parsel']").val("");
            $("#form_yeni_yapi input[name='BinaDisKapiNo']").val("");
            $("#form_yeni_yapi input[name='BinaDegerlendirmeId']").val("");

            setSelectReadonly("#form_yeni_yapi select[name='UavtIlNo']", false);
            setSelectReadonly("#form_yeni_yapi select[name='UavtIlceNo']", false);
            setSelectReadonly("#form_yeni_yapi select[name='UavtMahalleNo']", false);

            $("#form_yeni_yapi input[name='HasarTespitAskiKodu']");
            $("#form_yeni_yapi input[name='Ada']").prop("readonly", false);
            $("#form_yeni_yapi input[name='Parsel']").prop("readonly", false);

            $("#form_yeni_yapi .modal-title").html("Yeni Yapı Ekle");
            $("#modal_yeni_yapi_kaydet").html("Ekle");
            $("#modal_yeni_yapi_kaydet").attr("data-confirm-text", "Yeni Yapı eklenecek.");

            if (binaRowData) {
                setSelectReadonly("#form_yeni_yapi select[name='UavtIlNo']");
                setSelectReadonly("#form_yeni_yapi select[name='UavtIlceNo']");
                setSelectReadonly("#form_yeni_yapi select[name='UavtMahalleNo']");

                $("#form_yeni_yapi input[name='HasarTespitAskiKodu']");
                $("#form_yeni_yapi input[name='Ada']").prop("readonly", "readonly");
                $("#form_yeni_yapi input[name='Parsel']").prop("readonly", "readonly");

                $("#form_yeni_yapi select[name='UavtIlNo']").val(binaRowData.uavtIlNo).change();

                $("#form_yeni_yapi input[name='HasarTespitAskiKodu']").val(binaRowData.hasarTespitAskiKodu);
                $("#form_yeni_yapi input[name='Ada']").val(binaRowData.ada);
                $("#form_yeni_yapi input[name='Parsel']").val(binaRowData.parsel);
            }
            else if (window.kullanici.birimIlId > 0) {
                setSelectReadonly("#form_yeni_yapi select[name='UavtIlNo']");
                $("#form_yeni_yapi select[name='UavtIlNo']").val(window.kullanici.birimIlId).change();
            }

            $("#modal_yeni_yapi").modal("show");
        }

        function YeniYapiEkleGuncelleAjax() {
            if (!validateForm("#form_yeni_yapi")) {
                return;
            }

            let formData = serializeFormAsObject("#form_yeni_yapi");

            startLoader("#modal_yeni_yapi");
            Request("/admin/basvurudegerlendirme/" + (formData.binaDegerlendirmeId > 0 ? "GuncelleYeniYapi" : "EkleYeniYapi"), formData, 'post')
                .done(function (response) {
                    stopLoader("#modal_yeni_yapi");

                    if (!(formData.binaDegerlendirmeId > 0)) {
                        toastr.warning("Lütfen başvuru yapan kişilerdeki malik listesinden dış kapı numarası atamasını yapınız!", null, { timeOut: 10000 });
                    }

                    toastr.success("Yeni yapı " + (formData.binaDegerlendirmeId > 0 ? "güncelleme" : "ekleme") + " işlemi başarıyla tamamlandı.");

                    $("#modal_yeni_yapi").modal("hide");
                    binaRowData = false;

                    reloadTable("[data-name='tableList']");
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader("#modal_yeni_yapi");
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }

        function YapiDenetimIlerlemeBelgesiGuncelleAjax() {
            if (!validateForm("#form_yapi_denetim_dosya_degistir")) {
                return;
            }

            let formData = serializeFormAsObject("#form_yapi_denetim_dosya_degistir", YapiDenetimIlerlemeBelgesi);

            startLoader("#modal_yapi_denetim_dosya_degistir");
            Request("/admin/BinaDegerlendirme/YapiDenetimBelgeGuncelle/", formData, 'post')
                .done(function (response) {
                    stopLoader("#modal_yapi_denetim_dosya_degistir");

                    toastr.success("Yapı denetim ilerleme dosyası güncelleme işlemi başarıyla tamamlandı.");

                    $("input[name='YapiDenetimIlerlemeBelgesi']").val("");

                    $("#modal_yapi_denetim_dosya_degistir").modal("hide");
                    //binaRowData = false;

                    reloadTable("[data-name='tableListYapiDenetim']");
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader("#modal_yapi_denetim_dosya_degistir");
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }
        function AdaParselGuncelleAjax() {
            if (!validateForm("#form_yeni_ada_parsel")) {
                return;
            }
            if (!$("input[name='AdaParselGuncellemeTipiId']:checked").val()) {
                toastr.error("Ada parsel güncelleme tipi seçiniz!");
                return;
            }

            let formData = serializeFormAsObject("#form_yeni_ada_parsel", BaskaParselDosya);


            startLoader("#modal_Yeni_Ada_Parsel");
            Request("/admin/basvuru/BasvuruAdaParselGuncelle/", formData, 'post')
                .done(function (response) {
                    stopLoader("#modal_Yeni_Ada_Parsel");

                    toastr.success("Ada Parsel Güncelleme işlemi başarıyla tamamlandı.");

                    $("input[name='BaskaParselDosya']").val("");

                    $("#basvuruBelgeBilgileriForm input[name='BaskaParselDosya']").parent().find("label").removeClass("required");
                    $("#basvuruBelgeBilgileriForm input[name='BaskaParselDosya']").addClass("d-none");
                    $("#modal_Yeni_Ada_Parsel").modal("hide");
                    //binaRowData = false;

                    reloadTable("[data-name='tableList']");
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader("#modal_Yeni_Ada_Parsel");
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }

        function showDetailsTable(rowData, tableElem) {
            let htmlResult = "";
            let tableName = tableElem.data("name");
            if (tableName == "tableList") {
                htmlResult = `<table class="table table-row-bordered table-striped table-row-gray-200 align-middle dataTable no-footer dtr-inline">
                                                                                                                                                                                                                                                                                <thead>
                                                                                                                                                                                                                                                                                    <tr class="fw-semibold fs-6 text-gray-800 border-bottom border-gray-200">
                                                                                                                                                                                                                                                                                        <th>Yapı Id</th>
                                                                                                                                                                                                                                                                                        <th>İl</th>
                                                                                                                                                                                                                                                                                        <th>İlçe</th>
                                                                                                                                                                                                                                                                                        <th>Mahalle</th>
                                                                                                                                                                                                                                                                                        <th>Yapı Kimlik No</th>
                                                                                                                                                                                                                                                                                        <th>Ada/Parsel</th>
                                                                                                                                                                                                                                                                                        <th>ASKI Kodu</th>
                                                                                                                                                                                                                                                                                        <th>Dış Kapı No</th>
                                                                                                                                                                                                                                                                                        <th>Değerlendirme Sonucu</th>
                                                                                                                                                                                                                                                                                        <th>Oluşturan</th>
                                                                                                                                                                                                                                                                                        <th>Güncelleyen</th>
                                                                                                                                                                                                                                                                                        <th>İşlem</th>
                                                                                                                                                                                                                                                                                    </tr>
                                                                                                                                                                                                                                                                                </thead><tbody>`;

                for (let i = 0; i < rowData?.yeniYapiList?.length; i++) {
                    let detailData = rowData.yeniYapiList[i];
                    htmlResult += `<tr class="${(i % 2 == 0 ? 'odd' : 'even')}">
                                                                                                                                                                                                                                                                                        <td>${detailData.binaDegerlendirmeId ?? ""}</td>
                                                                                                                                                                                                                                                                                        <td>${detailData.tapuIlAdi ?? ""}</td>
                                                                                                                                                                                                                                                                                        <td>${detailData.tapuIlceAdi ?? ""}</td>
                                                                                                                                                                                                                                                                                        <td>${detailData.tapuMahalleAdi ?? ""}</td>
                                                                                                                                                                                                                                                                                        <td>${detailData.yapiKimlikNo ?? ""}</td>
                                                                                                                                                                                                                                                                                        <td>${((detailData.ada?.length > 0 ? detailData.ada : "-") + "/" + (detailData.parsel?.length > 0 ? detailData.parsel : "-"))}</td>
                                                                                                                                                                                                                                                                                        <td>${detailData.hasarTespitAskiKodu ?? ""}</td>
                                                                                                                                                                                                                                                                                        <td>${detailData.binaDisKapiNo ?? ""}</td>
                                                                                                                                                                                                                                                                                        <td>${detailData.basvuruDegerlendirmeDurumAd ?? ""}</td>
                                                                                                                                                                                                                                                                                        <td>${detailData.olusturanKullaniciAdi ?? ""}</td>
                                                                                                                                                                                                                                                                                        <td>${detailData.guncelleyenKullaniciAdi ?? ""}</td>
                                                                                                                                                                                                                                                                                        <td>
                                                                                                                                                                                                                                                                                            <div class="d-flex flex-center">
                                                                                                                                                                                                                                                                                                <button type="button" class="basvuruYapanKisiler btn btn-sm btn-icon btn-light-dark me-2"
                                                                                                                                                                                                                                                                                                        data-binadegerlendirmeid="${detailData.binaDegerlendirmeId}"
                                                                                                                                                                                                                                                                                                        data-placement="top"
                                                                                                                                                                                                                                                                                                        data-toggle="tooltip"
                                                                                                                                                                                                                                                                                                        aria-label="Başvuru Yapan Kişiler"
                                                                                                                                                                                                                                                                                                        data-bs-original-title="Başvuru Yapan Kişiler">
                                                                                                                                                                                                                                                                                                    <i class="fa fa-list"></i>
                                                                                                                                                                                                                                                                                                </button>
                                                                                                                                                                                                                                                                                                <button type="button"
                                                                                                                                                                                                                                                                                                        class="yeniYapiBilgileriModal btn btn-sm btn-icon btn-light-${detailData.degerlendirmeButonuAktifMi ? "info" : "secondary"} me-2"
                                                                                                                                                                                                                                                                                                        data-binaDegerlendirmeId="${detailData.binaDegerlendirmeId}"
                                                                                                                                                                                                                                                                                                        data-placement="top"
                                                                                                                                                                                                                                                                                                        data-toggle="tooltip"
                                                                                                                                                                                                                                                                                                        aria-label="Yeni Yapı Bilgileri"
                                                                                                                                                                                                                                                                                                        data-bs-original-title="Yeni Yapı Bilgileri">
                                                                                                                                                                                                                                                                                                    <i class="fa fa-info"></i>
                                                                                                                                                                                                                                                                                                </button>
                                                                                                                                                                                                                                                                                                <button type="button" class="yeniYapiGuncelleModal btn btn-sm btn-icon btn-light-primary me-2"
                                                                                                                                                                                                                                                                                                        data-placement="top"
                                                                                                                                                                                                                                                                                                        data-toggle="tooltip"
                                                                                                                                                                                                                                                                                                        data-binadegerlendirmeid="${detailData.binaDegerlendirmeId}"
                                                                                                                                                                                                                                                                                                        data-bs-original-title="Yapı Bilgileri Güncelle"
                                                                                                                                                                                                                                                                                                        aria-label="Yapı Bilgileri Güncelle">
                                                                                                                                                                                                                                                                                                    <i class="fa fa-edit"></i>
                                                                                                                                                                                                                                                                                                        </button>`;
                    if (detailData.binaDegerlendirmeDurumId == 7 ||
                        detailData.binaDegerlendirmeDurumId == 8 ||
                        detailData.binaDegerlendirmeDurumId == 9 ||
                        detailData.binaDegerlendirmeDurumId == 10 ||
                        detailData.binaDegerlendirmeDurumId == 11) {
                        htmlResult += `
                                                                                                                                                                                                                                                                                                 <button type="button" class="silYeniYapiRuhsatliModal btn btn-sm btn-icon btn-light-danger"
                                                                                                                                                                                                                                                                                                        data-placement="top"
                                                                                                                                                                                                                                                                                                        data-toggle="tooltip"
                                                                                                                                                                                                                                                                                                        data-binadegerlendirmeid="${detailData.binaDegerlendirmeId}"
                                                                                                                                                                                                                                                                                                        data-bs-original-title="Yapı Sil"
                                                                                                                                                                                                                                                                                                        aria-label="Yapı Sil">
                                                                                                                                                                                                                                                                                                    <i class="fa fa-trash"></i>
                                                                                                                                                                                                                                                                                                </button>
                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                        </td>
                                                                                                                                                                                                                                                                                    </tr>`;
                    } else {
                        htmlResult += `
                                                                                                                                                                                                                                                                                               <button type="button" class="btn btn-sm btn-icon btn-light-danger"
                                                                                                                                                                                                                                                                                                        data-placement="top"
                                                                                                                                                                                                                                                                                                        data-toggle="tooltip" data-confirm="true"
                                                                                                                                                                                                                                                                                                        data-confirm-function="SilYeniYapi"
                                                                                                                                                                                                                                                                                                        data-confirm-param="${detailData.binaDegerlendirmeId}"
                                                                                                                                                                                                                                                                                                        data-confirm-text="Yapıyı silmek istediğinize emin misiniz?"
                                                                                                                                                                                                                                                                                                        data-bs-original-title="Yapı Sil"
                                                                                                                                                                                                                                                                                                        aria-label="Yapı Sil">
                                                                                                                                                                                                                                                                                                    <i class="fa fa-trash"></i>
                                                                                                                                                                                                                                                                                                </button>
                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                        </td>
                                                                                                                                                                                                                                                                                    </tr>`;
                    }
                }
                htmlResult += `</tbody></table>`;
            }

            return htmlResult;
        }

        function ajaxTableComplete(data, tableElem) {
            let tableName = tableElem.data("name");
            if (tableName == "tableList") {
                $.each(data, function (index, row) {
                    row.adaParsel = (row.ada?.length > 0 ? row.ada : "-") + "/" + (row.parsel?.length > 0 ? row.parsel : "-");
                    row.eskiAdaParsel = (row.eskiTapuAda?.length > 0 ? row.eskiTapuAda : "-") + "/" + (row.eskiTapuParsel?.length > 0 ? row.eskiTapuParsel : "-");
                    row.oran = `<label class="badge badge-${(row.oran > 50 ? "success" : "danger")}">%${row.oran}</label>`;

                    row.Buttons = `<div class="d-flex flex-center">`;

                    row.Buttons += `<button type="button" class="btn btn-sm btn-icon btn-light-success me-2" data-placement="top" onclick="YeniYapiEkleModal(${row.binaDegerlendirmeId})" data-toggle="tooltip" title="Yeni Yapı Ekle"><i class="fa fa-plus"></i></button>`;
                    if (row.adaParselGuncellemeButonuAktifMi) {
                        row.Buttons += `<button type="button" class="btn btn-sm btn-icon btn-light-primary me-2" data-placement="top" onclick="AdaParselDegistir(${row.binaDegerlendirmeId})" data-toggle="tooltip" title="Ada Parsel Değiştir"><i class="fa fa-refresh"></i></button>`
                    }
                    if (row.adaParselGuncelleDosyaGuid != null) {
                        row.Buttons += `<button onclick="BinaDegerlendirmeDosyaIndir('${row.adaParselGuncelleDosyaGuid}')" type="button" data-toggle="tooltip" title="Ada/Parsel Güncelleme Dosyasını İndir" class="btn btn-icon btn-active-light-primary w-30px h-30px mr-10">
                                                                                                                                                                                                                                                        <i class="ki-duotone ki-folder-down fs-3">
                                                                                                                                                                                                                                                            <span class="path1"></span>
                                                                                                                                                                                                                                                            <span class="path2"></span>
                                                                                                                                                                                                                                                        </i>
                                                                                                                                                                                                                                                    </button>`;
                    }

                    row.Buttons += `</div>`;
                });
            }
            else if (tableName == "tableMalikler") {
                $.each(data, function (index, row) {
                    var imzaVerenDetayKaydiYapabilirMi = (row.binaDisKapiNo==null || row.binaDisKapiNo == undefined ) ? "disabled": "";
                    var kendimKarsilamakIstiyorumMu = row.hibeOdemeTutar == 0 && row.krediOdemeTutar == 0;
                    var kendimKarsilamakIstiyorumDeğilMi = row.hibeOdemeTutar == null && row.krediOdemeTutar == null;
                    row.bagimsizBolumAlani = toNumberFormat(row.bagimsizBolumAlani);
                    row.hibeOdemeTutar = row.hibeOdemeTutar == 0 ? "0 ₺" : toTurkishLira(row.hibeOdemeTutar, 2);
                    row.krediOdemeTutar = row.krediOdemeTutar == 0 ? "0 ₺" : toTurkishLira(row.krediOdemeTutar, 2);
                    row.basvuruDegerlendirmeDurumAd = row.basvuruDegerlendirmeDurumAd == null ? '' : `<label class="badge badge-${(row.durumClassName ?? 'secondary')} text-wrap">${row.basvuruDegerlendirmeDurumAd}</label>`;
                    row.tapuPayPayda = `<label>${row.tapuArsaPay ?? "-"} / ${row.tapuArsaPayda ?? "-"}</label>`;

                    row.Buttons = `<div class="d-flex flex-center">`;


                    if (row.basvuruDurumId == @((int)BasvuruDurumEnum.BasvuruIptalEdildi) || row.basvuruDurumId == @((int)BasvuruDurumEnum.BasvurunuzIptalEdilmistir)) {
                        row.Buttons += `<button type="button" class="btnAktarKamuUstlenecek me-2 btn btn-sm btn-icon btn-warning" data-placement="top" data-toggle="tooltip" title="Kamu Üstlenecek"><i class="fa fa-pen"></i></button>`;
                    }

                    if (kendimKarsilamakIstiyorumMu && row.feragatnameDosyaId != null) {
                        row.Buttons += `<a href="/admin/BasvuruImzaVeren/BelgeIndirFeragatname/${row.feragatnameDosyaId}/"" type="button" data-toggle="tooltip" title="Taahhütname Dosyasını İndir" class="btn btn-icon btn-active-light-primary w-30px h-30px mr-10">
                                                                                                                                                                                                                                                                <i class="ki-duotone ki-folder-down fs-3">
                                                                                                                                                                                                                                                                    <span class="path1"></span>
                                                                                                                                                                                                                                                                    <span class="path2"></span>
                                                                                                                                                                                                                                                                </i>
                                                                                                                                                                                                                                                            </a>`;

                        row.basvuruDegerlendirmeDurumAd = `<label class="badge badge-success text-wrap">Malik Üstlenecek</label>`;
                    }
                    else if (kendimKarsilamakIstiyorumDeğilMi) {
                        row.Buttons += `<button type="button" ${imzaVerenDetayKaydiYapabilirMi} class="btnKendimKarsilamakIstiyorum me-2 btn btn-sm btn-icon 'btn-light-warning' data-placement="top" data-toggle="tooltip" title="Kendim Karşılamak İstiyorum"><i class="fa fa-user"></i></button>`;
                    }
                    row.Buttons += `<button type="button" ${imzaVerenDetayKaydiYapabilirMi} class="btnKatKarsiligiImza me-2 btn btn-sm btn-icon ${(row.imzaVerilebilirMi ? 'btn-light-primary' : 'btn-light-secondary')}" data-placement="top" data-toggle="tooltip" title="İmza Veren Detayı"><i class="fa fa-edit"></i></button>`;

                    if (row.afadDurumDegisebilirMi) {
                        row.Buttons += `<button type="button" class="btnBasvuruAfadDurumGuncelle me-2 btn btn-sm btn-icon btn-light-warning" data-placement="top" data-toggle="tooltip" title="AFAD Durumunu İptal Et"><i class="fas fa-folder-open"></i></button>`;
                    }
                    if (row.afadDurumIptalDosyaId) {
                        row.Buttons += `<button onclick="BasvuruDosyaIndir('${row.afadDurumIptalDosyaId}', '${row.tcKimlikNoRaw}')" type="button" data-toggle="tooltip" title="AFAD İptal Dosyasını İndir" class="btn btn-icon btn-active-light-primary w-30px h-30px mr-10">
                                                                                                                                                                                                                                                <i class="ki-duotone ki-folder-down fs-3">
                                                                                                                                                                                                                                                    <span class="path1"></span>
                                                                                                                                                                                                                                                    <span class="path2"></span>
                                                                                                                                                                                                                                                </i>
                                                                                                                                                                                                                                            </button>`;
                    }


                    if (row.iptalEdilebilirMi) {
                        row.Buttons += `<button type="button" class="btnBasvuruIptalEt btn btn-sm btn-icon btn-light-danger" data-placement="top" data-toggle="tooltip" title="İptal Et"><i class="fa fa-times"></i></button>`;
                    }

                    row.Buttons += `</div>`;
                });

                let totalCount = data.filter(x => x.basvuruAfadDurumId != @((long)BasvuruAfadDurumEnum.Kabul) && x.binaDisKapiNo == binaRowData?.binaDisKapiNo).length;
                let imzasiOlanlarCount = data.filter(x => x.basvuruAfadDurumId != @((long)BasvuruAfadDurumEnum.Kabul) && x.bagimsizBolumAlani > 0
                    && x.binaDisKapiNo == binaRowData?.binaDisKapiNo
                ).length;
                $("#modal_degerlendirme_count").html(imzasiOlanlarCount + " / " + totalCount);

            }
            else if (tableName == "tablePasifMalikler") {
                $.each(data, function (index, row) {
                    row.Buttons = `<div class="d-flex flex-center">`;
                    row.Buttons += `</div>`;
                });

                let totalCount = data.filter(x => x.basvuruAfadDurumId != @((long)BasvuruAfadDurumEnum.Kabul) && x.binaDisKapiNo == binaRowData?.binaDisKapiNo).length;
                let imzasiOlanlarCount = data.filter(x => x.basvuruAfadDurumId != @((long)BasvuruAfadDurumEnum.Kabul) && x.bagimsizBolumAlani > 0
                    && x.binaDisKapiNo == binaRowData?.binaDisKapiNo
                ).length;
                $("#modal_degerlendirme_count").html(imzasiOlanlarCount + " / " + totalCount);

            }
            else if (tableName == "tableListYapiDenetim") {
                $("#btnKaydetYapiDenetim").html((data?.length > 0 ? 'Güncelle' : 'Kaydet') + ' ve Ödeme Talebi Oluştur');
                $.each(data, function (index, row) {
                    row.ilerlemeYuzdesi = toPercentage(row.ilerlemeYuzdesi);
                    row.Buttons = `<a href="/admin/BinaDegerlendirme/YapiDenetimBelgeIndir/${row.binaYapiDenetimDosyaGuid}" class="btn btn-sm btn-icon btn-light-dark mr-2" data-placement="top" data-toggle="tooltip" title="Belge İndir" target="_blank"><i class="fa fa-download"></i></a>`;
                    row.Buttons += `<button type="button" class="btn btn-sm btn-icon btn-light-primary" data-placement="top" onclick="YapiDenetimIlerlemeBelgesiDegistir('${row.binaYapiDenetimDosyaGuid}')" data-toggle="tooltip" title="Belge Değiştir"><i class="fa fa-refresh"></i></button>`

                });
            }
            else if (tableName == "tableListNakdiYardim") {
                if (data?.length > 0)
                    $("#btnKaydetNakdiYardim").html('Güncelle');

                $.each(data, function (index, row) {
                    row.yibfNoFenniMesulTc = row.yibfNo ?? row.fenniMesulTc;
                    row.yapiKimlikIzinBelgesi = row.yapiKimlikNo ?? row.izinBelgesiSayi;
                    row.seviyeText = row.seviye != 0 ? toPercentage(row.seviye) : "";
                    row.hibeOdemeTutariText = toTurkishLira(row.hibeOdemeTutari);
                    row.krediOdemeTutariText = toTurkishLira(row.krediOdemeTutari);
                    row.digerHibeOdemeTutariText = toTurkishLira(row.digerHibeOdemeTutari);
                    row.odemeTarihiText = dateToDate(row.odemeTarihi);
                });
            }
            else if (tableName == "tableListBina") {
                $("#btnKaydetBinaDigerYardimlar").html(data?.length > 0 ? 'Güncelle' : 'Kaydet');
                $.each(data, function (index, row) {
                    row.tarihText = dateToDate(row.tarih);
                    row.tutar = toTurkishLira(row.tutar, 0);
                });
            } else if (tableName == "tableYapiListesiGruplanmamis") {
                $.each(data, function (index, row) {
                });
            }
            return data;
        }
        //#endregion ...: Document & Event Methods :...

        //#region ...: Yeni Yapı Bilgileri Buton/Modal İşlemleri : ...

        //#region ...: Reset Methods :...
        function ResetModalYeniYapi() {
            resetForm("#form_yeni_yapi");
        }
        function ResetModalYeniAdaParsel() {
            resetForm("#form_yeni_ada_parsel");
        }

        function ResetBelgeBilgileri() /* Tab 1 */ {
            let elem = $("input[name='BasvuruImzaDosya']");
            let label = elem.parent().find("label");
            elem.removeAttr("data-validate");
            label.removeClass("required");

            resetForm($("#basvuruBelgeBilgileriForm"));

            elem.attr("data-validate", "required");
            label.addClass("required");
        }
        function ResetBaskaParselDosyaBilgileri() /* Tab 1 */ {
            let elem = $("input[name='BaskaParselDosya']");
            let label = elem.parent().find("label");
            elem.removeAttr("data-validate");
            label.removeClass("required");

            // resetForm($("#basvuruBelgeBilgileriForm"));

            elem.attr("data-validate", "required");
            label.addClass("required");
        }

        function ResetYapiDenetimIlerlemeDosyaBilgileri() /* Tab 1 */ {
            let elem = $("input[name='YapiDenetimIlerlemeBelgesi']");
            let label = elem.parent().find("label");
            elem.removeAttr("data-validate");
            label.removeClass("required");

            // resetForm($("#basvuruBelgeBilgileriForm"));

            elem.attr("data-validate", "required");
            label.addClass("required");
        }

        function ResetMuteahhitBilgileri() /* Tab 2 */ {
            $("#bt_yetkiBelgeNoSorgula").show();
            $("#yetkiBelgeNoFilter").prop("readonly", false);
            resetForm($("#muteahhitForm"));
            $("#m_adSoyad").empty();
            $('#muteahhit_tckn :input, textarea, select').prop("readonly", true);
            $("#divMTCBilgiler").hide();
            $('#muteahhit_tckn').addClass("d-none");
        }

        function ResetYapiRuhsatBilgileri() /* Tab 3 */ {
            resetForm($("#yapiRuhsatForm"));
        }

        function ResetBinaIcinYapilanDigerYardimlar() /* Tab 4 */ {
            resetForm($("#binaIcinYapilanDigerYardimlarForm"));
        }

        function ResetYapiDenetimBilgileri() /* Tab 5 */ {
            let elemYapiDenetim = $("input[name='BelgeYapiDenetimDosya']");
            let labelYapiDenetim = elemYapiDenetim.parent().find("label");
            elemYapiDenetim.removeAttr("data-validate");
            labelYapiDenetim.removeClass("required");

            $("select[name='YapiDenetimIlerlemeYuzdesi']").val("").change();
            elemYapiDenetim.val("");
            elemYapiDenetim.attr("data-validate", "required");
            labelYapiDenetim.addClass("required");
        }

        function ResetNakdiYardimBilgileri() /* Tab 6 */ {
            let elemNakdiYardim = $("input[name='BelgeNakdiYardimTaksitDosya']");
            let labelNakdiYardim = elemNakdiYardim.parent().find("label");
            elemNakdiYardim.removeAttr("data-validate");
            labelNakdiYardim.removeClass("required");

            resetForm($("#nakdiYardimForm"));

            elemNakdiYardim.attr("data-validate", "required");
            labelNakdiYardim.addClass("required");
        }

        function ResetAllTabs() {
            // Tab - 1
            $('#btnKaydetBelge').html('Kaydet');
            $("#btnKaydetBelge").removeClass("d-none");

            $("#anchor_document_download").empty();
            $("#anchor_document_download_baska_parsel").empty();
            $("#basvuruBelgeBilgileriForm input[name='BasvuruImzaDosya']").removeClass("d-none");
            $("#form_yeni_ada_parsel input[name='BaskaParselDosya']").removeClass("d-none");
            $("#basvuruBelgeBilgileriForm input[name='ImzalayanKisiSayisi']").prop('readonly', false);
            $("#basvuruBelgeBilgileriForm input[name='BasvuruImzaDosya']").parent().find("label").addClass("required");
            $("#form_yeni_ada_parsel input[name='BaskaParselDosya']").parent().find("label").addClass("required");
            $("#basvuruBelgeBilgileriForm input[name='ImzalayanKisiSayisi']").parent().find("label").addClass("required");

            // Tab - 2
            $("#btnKaydetMuteahhit").html('Kaydet');

            $("#yetkiBelgeNoFilterLabel").addClass("required");

            // Tab - 3
            $("#btnKaydetYapiRuhsat").html("Kaydet");
            $("#yapiRuhsatForm input[name='IzinBelgesiTarih']").parent().find("label").addClass("required");
            $("#yapiRuhsatForm input[name='IzinBelgesiSayi']").parent().find("label").addClass("required");

            $("#btnKaydetNakdiYardim").html('Kaydet');
            $("#btnKaydetYapiDenetim").html('Kaydet ve Ödeme Talebi Oluştur');
            $("#btnKaydetBinaDigerYardimlar").html('Kaydet');

            $('a[href="#kt_vtab_pane_muteahhit"]').attr("data-bs-toggle", "");
            $('a[href="#kt_vtab_pane_ruhsat"]').attr("data-bs-toggle", "");
            $('a[href="#kt_vtab_pane_bina"]').attr("data-bs-toggle", "");
            $('a[href="#kt_vtab_pane_yapi_denetim"]').attr("data-bs-toggle", "");
            $('a[href="#kt_vtab_pane_nakdi_yardim"]').attr("data-bs-toggle", "");

            $("#divBultenNo label").addClass('required');
            $("#yapiRuhsatForm [name='BultenNo']").removeAttr("readonly");
            $("#yapiRuhsatForm").find("[name='yapiKimlikNo'],[name='toplamYapiInsaatAlan'],[name='toplamBBSayi'],[name='toplamKatSayi'],[name='yolKotUstKatSayi'],[name='yolKotAltKatSayi'],[name='acikAdres'],[name='ruhsatOnayTarihi']").html("");

            $('a[href="#kt_vtab_pane_belge"]').tab("show");

            $("[name='YapiDenetimiTarihi']").attr('disabled', 'disabled');
            $("[name='JeolojikEtudRaporuTarihi']").attr('disabled', 'disabled');
            $("[name='HaritaHazirlanmasiTarihi']").attr('disabled', 'disabled');
            $("[name='YapiDenetimiTutari']").attr('disabled', 'disabled');
            $("[name='JeolojikEtudRaporuTutari']").attr('disabled', 'disabled');
            $("[name='HaritaHazirlanmasiTutari']").attr('disabled', 'disabled');

            $("#yapiRuhsatForm input[name='IzinBelgesiTarih']").prop('readonly', false);
            $("#yapiRuhsatForm input[name='IzinBelgesiSayi']").prop('readonly', false);

            $("#yapiRuhsatForm input[name='BelgeYapiRuhsatIzinDosya']").removeClass("d-none");
            $("#divBultenNo, #btnYapiRuhsatSorgula, #divIzinBelgesiCheckbox").removeClass("d-none");
            $(' #div-yapi-ruhsat-bilgi-sonuc, #divIzinBelgesi, #divKaydetYapiRuhsat, #muteahhit_belge', '#muteahhit_tckn').addClass("d-none");

            $("#izin_belgesi_indir").empty();

            $("[name='FenniMesulSeciliMi']").prop('checked', false).trigger('change');
            $("[name='IzinBelgesiSeciliMi']").prop('checked', false).trigger('change');

            ResetBelgeBilgileri();
            ResetBaskaParselDosyaBilgileri();
            ResetYapiDenetimIlerlemeDosyaBilgileri();
            ResetMuteahhitBilgileri();
            ResetBinaIcinYapilanDigerYardimlar();
            ResetYapiRuhsatBilgileri();
            ResetYapiDenetimBilgileri();
            ResetNakdiYardimBilgileri();
            ResetModalYeniAdaParsel();
        }

        //#endregion ...: Reset Methods :...

        //#region ...: Tab İşlemleri Bilgileri Getir
        function GetirDegerlendirmeDetay() {
            // Tab 1
            $("#basvuruBelgeBilgileriForm input[name='ImzalayanKisiSayisi']").val(binaRowData.imzalayanKisiSayisi);

            if (binaRowData.binaDegerlendirmeDosya) {
                $('#btnKaydetBelge').html('Güncelle');
                //$('#btnKaydetBelge').addClass('d-none');
                //$("#basvuruBelgeBilgileriForm input[name='BasvuruImzaDosya']").addClass("d-none");
                $("#basvuruBelgeBilgileriForm input[name='ImzalayanKisiSayisi']").prop('readonly', 'readonly');

                //$("#basvuruBelgeBilgileriForm input[name='BasvuruImzaDosya']").parent().find("label").removeClass("required");
                $("#basvuruBelgeBilgileriForm input[name='ImzalayanKisiSayisi']").parent().find("label").removeClass("required");

                $("#anchor_document_download").html(`<a href="/admin/BinaDegerlendirme/BelgeIndir/${binaRowData.binaDegerlendirmeDosya.binaDosyaGuid}" data-placement="top" data-toggle="tooltip" title="Belge İndir" target="_blank"><i class="fa fa-download"></i> ${binaRowData.binaDegerlendirmeDosya.dosyaAdi}</a>`);
                //if (binaRowData.imzalayanKisiSayisi != null) {
                //    $("a[href='#kt_vtab_pane_muteahhit']").removeClass("disabled");
                //}
            }

            // Tab 2
            $("input:radio[name='BinaMuteahhitTapuTurId']")[2].checked = true;
            $("#divYetkiBelgesi").show();
            $("#divTCKN").hide();
            if (binaRowData.muteahhit) {
                $('#muteahhit_belge').removeClass("d-none");
                $("#btnKaydetMuteahhit").html(IsNullOrEmpty(binaRowData.muteahhit?.yetkiBelgeNo) ? 'Kaydet' : 'Güncelle');
                $("#bt_yetkiBelgeNoSorgula").hide();
                $("#yetkiBelgeNoFilter").prop("readonly", "readonly");
                $("#yetkiBelgeNoFilter").val(binaRowData.muteahhit.yetkiBelgeNo);

                $("#yetkiBelgeNoFilterLabel").removeClass("required");

                // inputlari doldurmak icin.

                if (binaRowData.muteahhit?.binaMuteahhitTapuTurId != @MuteahhitBilgileriTipEnum.Muteahhit.GetHashCode()) {
                    $('#muteahhit_tckn').removeClass("d-none");
                    $('#muteahhit_belge').addClass("d-none");
                    $("#muteahhitForm [name='MuteahhitTc']").val(binaRowData.muteahhit?.vergiKimlikNo);
                    $("#muteahhitForm [name='ibanNo']").val(binaRowData.muteahhit?.ibanNo);
                    $("#muteahhitForm [name='adSoyadUnvan']").val(binaRowData.muteahhit?.adSoyadUnvan);
                    //if (binaRowData.muteahhit?.ibanNo != null) {
                    $("#bt_MuteahhitkisiSorgula").click();
                    $("input:radio[name='BinaMuteahhitTapuTurId']")[2].checked = true;
                    $("#divYetkiBelgesi").hide();
                    $("#divTCKN").show();
                    binaRowData.muteahhit?.binaMuteahhitTapuTurId == @MuteahhitBilgileriTipEnum.TescilDisi.GetHashCode() ?
                        $("input:radio[name='BinaMuteahhitTapuTurId']")[1].checked = true
                        : $("input:radio[name='BinaMuteahhitTapuTurId']")[0].checked = true;
                    $("#muteahhitForm [name='ibanNoTckn']").val(binaRowData.muteahhit?.ibanNo);
                } else {
                    $.each(binaRowData.muteahhit, function (key, value) {
                        $("#muteahhitForm [name='" + key + "']").val(value ?? "");
                    });
                    $("#muteahhitForm [name='MuteahhitTc']").val("");
                    $('#muteahhit_tckn').addClass("d-none");
                    $('#muteahhit_belge').removeClass("d-none");
                    $("input:radio[name='BinaMuteahhitTapuTurId']")[2].checked = true;
                }

                //    $("a[href='#kt_vtab_pane_ruhsat']").removeClass("disabled");
                //}
            }

            // Tab 3
            $("#yapiRuhsatForm [name='BinaDisKapiNo']").val(binaRowData?.binaDisKapiNo ?? "");
            if (binaRowData.izinBelgesiSayi > 0 && binaRowData.binaYapiRuhsatIzinDosya) {
                $("#yapiRuhsatForm input[name='BelgeYapiRuhsatIzinDosya']").parent().find("label").removeClass("required");
                $("#yapiRuhsatForm input[name='IzinBelgesiTarih']").parent().find("label").removeClass("required");
                $("#yapiRuhsatForm input[name='IzinBelgesiSayi']").parent().find("label").removeClass("required");

                $("#izin_belgesi_indir").html(`<a href="/admin/BinaDegerlendirme/BelgeIndirYapiRuhsat/${binaRowData.binaYapiRuhsatIzinDosya.binaDosyaGuid}" data-placement="top" data-toggle="tooltip" title="Belge İndir" target="_blank"><i class="fa fa-download"></i>${binaRowData.binaYapiRuhsatIzinDosya.dosyaAdi}</a>`);
            }
            else {
                $("#btnKaydetYapiRuhsatBelge").addClass("d-none");
            }

            if (binaRowData.bultenNo > 0) {
                $("#btnKaydetYapiRuhsat").html("Güncelle");

                $("#yapiRuhsatForm [name='BultenNo']").val(binaRowData.bultenNo).prop("readonly", "readonly");
                $("#yapiRuhsatForm [name='yapiKimlikNo']").html(binaRowData.yapiKimlikNo);
                $("#yapiRuhsatForm [name='toplamYapiInsaatAlan']").html(binaRowData.yapiInsaatAlan);
                $("#yapiRuhsatForm [name='toplamBBSayi']").html(binaRowData.bagimsizBolumSayisi);
                $("#yapiRuhsatForm [name='toplamKatSayi']").html(binaRowData.toplamKatSayisi);
                $("#yapiRuhsatForm [name='yolKotUstKatSayi']").html(binaRowData.kotUstKatSayisi);
                $("#yapiRuhsatForm [name='yolKotAltKatSayi']").html(binaRowData.kotAltKatSayisi);
                $("#yapiRuhsatForm [name='acikAdres']").html(binaRowData.acikAdres);
                $("#yapiRuhsatForm [name='ruhsatOnayTarihi']").html(dateToString(binaRowData.ruhsatOnayTarihi));

                $("#divBultenNo label.required").removeClass("required");
                $("#div-yapi-ruhsat-bilgi-sonuc").removeClass("d-none");
                $("#btnYapiRuhsatSorgula, #divIzinBelgesi, #divIzinBelgesiCheckbox").addClass("d-none");

                $('a[href="#kt_vtab_pane_bina"]').attr("data-bs-toggle", "tab");
            }
            else if (binaRowData.izinBelgesiSayi > 0) {
                $("#btnKaydetYapiRuhsat").html("Güncelle");

                $("#yapiDenetimForm [name='BultenNo']").val("");
                $("#yapiRuhsatForm [name='IzinBelgesiSayi']").val(binaRowData.izinBelgesiSayi);
                $("#yapiRuhsatForm [name='IzinBelgesiTarih']").val(dateToDateGlobal(binaRowData.izinBelgesiTarih));

                $('a[href="#kt_vtab_pane_bina"]').attr("data-bs-toggle", "tab");
                $("[name='IzinBelgesiSeciliMi']").prop('checked', true);

                if(binaRowData.binaYapiDenetimSeviyeTespit != null && binaRowData.binaYapiDenetimSeviyeTespit.ilerlemeYuzdesi != null && binaRowData.binaYapiDenetimSeviyeTespit.ilerlemeYuzdesi > 20){
                    $("#yapiRuhsatForm input[name='IzinBelgesiTarih']").prop('readonly', 'readonly');
                    $("#yapiRuhsatForm input[name='IzinBelgesiSayi']").prop('readonly', 'readonly');
                }

                // $("#yapiRuhsatForm input[name='BelgeYapiRuhsatIzinDosya']").addClass("d-none");
                $("#divIzinBelgesiCheckbox, #divBultenNo, #div-yapi-ruhsat-bilgi-sonuc").addClass("d-none");
                $("#divIzinBelgesi").removeClass("d-none");
            }
            else {
                $("#yapiDenetimForm [name='IzinBelgesiTarih']").val();
                $("#yapiDenetimForm [name='IzinBelgesiSayi']").val();

                $("[name='IzinBelgesiSeciliMi']").prop('checked', false);

                $("#divIzinBelgesi, #divKaydetYapiRuhsat").addClass("d-none");
                $("#divBultenNo").removeClass("d-none");
            }

            // Tab 5
            $("#yapiDenetimForm [name='YIBFNo']").val(binaRowData.yibfNo ?? "");
            if (binaRowData.fenniMesulTc) {
                $("#yapiDenetimForm [name='FenniMesulTc']").val(binaRowData.fenniMesulTc);
                $("[name='FenniMesulSeciliMi']").prop('checked', true).trigger('change');
                $("#yapiDenetimForm [name='YIBFNo']").val();
                $("#divFenniMesul").show();
                $("#divYibfNo").hide();
                $("#bt_kisiSorgula").click();
            }
            else {
                $("[name='FenniMesulSeciliMi']").prop('checked', false).trigger('change');
                $("#yapiDenetimForm [name='FenniMesulTc']").val("");
                $("#divFenniMesul").hide();
                $("#divYibfNo").show();
            }
        }

        function GetirBinaIcinYapilanDigerYardimlari() /* Tab 4 */ {
            let tableBinaDigerAjaxUrl = BinaDegerlendirmeControllerUrl + "/GetirBinaIcinYapilanDigerYardimlar?binaDegerlendirmeId=" + binaRowData.binaDegerlendirmeId;
            if (isDataTable("[data-name='tableListBina']")) {
                clearTable("[data-name='tableListBina']", tableBinaDigerAjaxUrl);
                reloadTableNewAjaxUrl("[data-name='tableListBina']", tableBinaDigerAjaxUrl);
            }
            else {
                loadTable("[data-name='tableListBina']", tableBinaDigerAjaxUrl);
            }
        }

        function GetirYapiDenetimSeviyeTespitBilgileri() /* Tab 5 */ {
            let tableYapiDenetimAjaxUrl = BinaDegerlendirmeControllerUrl + "/GetirYapiDenetimSeviyeTespitBilgiler?binaDegerlendirmeId=" + binaRowData.binaDegerlendirmeId;
            if (isDataTable("[data-name='tableListYapiDenetim']")) {
                clearTable("[data-name='tableListYapiDenetimtableListYapiDenetim']", tableYapiDenetimAjaxUrl);
                reloadTableNewAjaxUrl("[data-name='tableListYapiDenetim']", tableYapiDenetimAjaxUrl);
            }
            else {
                loadTable("[data-name='tableListYapiDenetim']", tableYapiDenetimAjaxUrl);
            }
        }

        function GetirNakdiYardimTaksitleri() /* Tab 6 */ {
            let tableNakdiYardimAjaxUrl = BinaDegerlendirmeControllerUrl + "/GetirNakdiYardimTaksitler?binaDegerlendirmeId=" + binaRowData.binaDegerlendirmeId;
            if (isDataTable("[data-name='tableListNakdiYardim']")) {
                clearTable("[data-name='tableListNakdiYardim']");
                reloadTableNewAjaxUrl("[data-name='tableListNakdiYardim']", tableNakdiYardimAjaxUrl);
            }
            else {
                loadTable("[data-name='tableListNakdiYardim']", tableNakdiYardimAjaxUrl);
            }
        }

        function YIBFNoSorgula() /* Tab 5 YIBF No Sorgula */ {
            const input = $("input[name='YIBFNo");
            if (!validateSingleInput(input)) {
                return;
            }

            startLoader($("#modal_degerlendirme_islem"));
            Request("/admin/yapidenetimseviye/GetirSeviyeByYibfNo", { yibfNo: input.val(), binaDegerlendirmeId: binaRowData.binaDegerlendirmeId }, 'get')
                .done(function (response) {
                    stopLoader($("#modal_degerlendirme_islem"));
                    yibfRowData = response;
                    if (yibfRowData != null) {
                        $("input[name='YIBFNoSeviye']").val(yibfRowData?.seviye);
                    }
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader($("#modal_degerlendirme_islem"));
                    yibfRowData = null;
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }
        //#endregion ...: Tab İşlemleri Bilgileri Getir

        //#region ...: Tab İşlemleri Kaydet (Ekle/Güncelle) :...

        function KaydetBelge() /* Tab 1 */ {
            if (!validateForm("#basvuruBelgeBilgileriForm")) {
                return;
            }

            let formData = serializeFormAsObject("#basvuruBelgeBilgileriForm", BasvuruImzaDosya);
            formData.binaDegerlendirmeId = binaRowData?.binaDegerlendirmeId;

            startLoader($("#modal_degerlendirme_islem"));
            Request(BinaDegerlendirmeControllerUrl + "/KaydetBelge", formData, 'post')
                .done(function (response) {
                    stopLoader($("#modal_degerlendirme_islem"));
                    toastr.success("Belge kayıt işlemi başarıyla tamamlandı.");

                    $("input[name='BasvuruImzaDosya']").val("");

                    if (response != null) {
                        $('#anchor_document_download').html((response.binaDosyaGuid != null && response.dosyaAdi != null) ? `<a href="/admin/BinaDegerlendirme/BelgeIndir/${response.binaDosyaGuid}" data-placement="top" data-toggle="tooltip" title="Belge İndir" target="_blank"><i class="fa fa-download"></i> ${response.dosyaAdi}</a>` : "");
                    }

                    $('#btnKaydetBelge').html('Güncelle');
                    $('#btnKaydetBelge').addClass('d-none');

                    $("#basvuruBelgeBilgileriForm input[name='BasvuruImzaDosya']").parent().find("label").removeClass("required");
                    $("#basvuruBelgeBilgileriForm input[name='ImzalayanKisiSayisi']").parent().find("label").removeClass("required");

                    $("#basvuruBelgeBilgileriForm input[name='BasvuruImzaDosya']").addClass("d-none");
                    $("#basvuruBelgeBilgileriForm input[name='ImzalayanKisiSayisi']").prop('readonly', 'readonly');

                    reloadTable("[data-name='tableList']");

                    //if ($("#basvuruBelgeBilgileriForm input[name='ImzalayanKisiSayisi']").val() != null) {
                    //    $("a[href='#kt_vtab_pane_muteahhit']").removeClass("disabled");
                    //}
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader($("#modal_degerlendirme_islem"));
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }

        function KaydetMuteahhitBilgileri() /* Tab 2 */ {
            if (!validateForm("#muteahhitForm")) {
                return;
            }

            let formData = serializeFormAsObject("#muteahhitForm");
            formData.binaMuteahhitTapuTurId == String(@MuteahhitBilgileriTipEnum.Muteahhit.GetHashCode()) ?
                formData.ibanNo = formData.ibanNo
                : formData.ibanNo = formData.ibanNoTckn
            formData.binaDegerlendirmeId = binaRowData?.binaDegerlendirmeId;
            formData.binaMuteahhitTapuTurId = parseInt(formData.binaMuteahhitTapuTurId)

            startLoader($("#modal_degerlendirme_islem"));
            RequestText(BinaDegerlendirmeControllerUrl + "/KaydetMuteahhitBilgileri", formData, 'post')
                .done(function (response) {
                    stopLoader($("#modal_degerlendirme_islem"));
                    toastr.success("Müteahhit bilgileri başarıyla kaydedildi.");

                    $('#btnKaydetMuteahhit').html('Güncelle');
                    $("input[name='YetkiBelgeNoFilter']").prop("readonly", "readonly");
                    $("#bt_yetkiBelgeNoSorgula").hide();

                    reloadTable("[data-name='tableList']");

                    //if ($("#muteahhitForm input[name='ibanNo']").val() != null) {
                    //    $("a[href='#kt_vtab_pane_ruhsat']").removeClass("disabled");
                    //}
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader($("#modal_degerlendirme_islem"));
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }

        function KaydetYapiRuhsat() /* Tab 3 */ {
            if (!validateForm("#yapiRuhsatForm")) {
                return;
            }
            if (BinaDegerlendirmeTasinmazAfadBasvuruDurumu == true) {
                fireConfirmSwal({
                    title: "Uyarı",
                    onconfirm: "YapiRuhsatKayitIslemi",
                    text: "Aynı taşınmaz için AFAD hak sahipliği başvurusu bulunduğundan işleme devam edilememektedir! Devam etmek istiyor musunuz?",
                });
            }
            else {
                YapiRuhsatKayitIslemi();
            }

        }

        function KaydetYapiRuhsatBelge() /* Tab 3 */ {
            if (!validateForm("#yapiRuhsatForm")) {
                return;
            }
            if (BinaDegerlendirmeTasinmazAfadBasvuruDurumu == true) {
                fireConfirmSwal({
                    title: "Uyarı",
                    onconfirm: "YapiRuhsatKayitIslemi",
                    text: "Aynı taşınmaz için AFAD hak sahipliği başvurusu bulunduğundan işleme devam edilememektedir! Devam etmek istiyor musunuz?",
                });
            }
            else {
                YapiRuhsatKayitIslemi();
            }

        }
        function YapiRuhsatKayitIslemi() {
            let formData = serializeFormAsObject("#yapiRuhsatForm", BelgeYapiRuhsatIzinDosya);
            formData.binaDegerlendirmeId = binaRowData?.binaDegerlendirmeId;

            startLoader($("#modal_degerlendirme_islem"));
            Request(BinaDegerlendirmeControllerUrl + "/KaydetYapiRuhsat", formData, 'post')
                .done(function (response) {
                    stopLoader($("#modal_degerlendirme_islem"));
                    toastr.success("Yapı ruhsat kayıt işlemi başarıyla tamamlandı.");

                    binaRowData.bultenNo = formData.bultenNo || 0;
                    binaRowData.izinBelgesiSayi = formData.izinBelgesiSayi || 0;

                    $("#divKaydetYapiRuhsat, #btnYapiRuhsatSorgula, #divIzinBelgesiCheckbox").addClass("d-none");
                    $("#yapiRuhsatForm input[name='BultenNo']").prop('readonly', 'readonly');
                    
                    // $("#yapiRuhsatForm input[name='IzinBelgesiTarih']").prop('readonly', 'readonly');
                    // $("#yapiRuhsatForm input[name='IzinBelgesiSayi']").prop('readonly', 'readonly');

                    //$("#yapiRuhsatForm input[name='BelgeYapiRuhsatIzinDosya']").addClass("d-none");
                    $("#divBultenNo label.required").removeClass('required');

                    $("#yapiRuhsatForm input[name='IzinBelgesiTarih']").parent().find("label").removeClass("required");
                    $("#yapiRuhsatForm input[name='IzinBelgesiSayi']").parent().find("label").removeClass("required");
                    $("#yapiRuhsatForm input[name='BelgeYapiRuhsatIzinDosya']").parent().find("label").removeClass("required");
                    $("#btnKaydetYapiRuhsatBelge").removeClass("d-none");
                    $("#izin_belgesi_indir").html(`<a href="/admin/BinaDegerlendirme/BelgeIndirYapiRuhsat/${response.dosyaGuid}" data-placement="top" data-toggle="tooltip" title="Belge İndir" target="_blank"><i class="fa fa-download"></i>${response.dosyaAdi}</a>`);

                    reloadTable("[data-name='tableList']");
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader($("#modal_degerlendirme_islem"));
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }

        function BasvuruDosyaIndir(basvuruDosyaId, tcKimlikNo) {
            if (!basvuruDosyaId || tcKimlikNo?.length != 11) {
                return;
            }
            //startLoader("[data-name='tableList']");
            Request("/admin/basvurudosya/basvurudosyaindir", { basvuruDosyaId: basvuruDosyaId, tcKimlikNo: tcKimlikNo }, 'post')
                .done(function (response) {
                    let a = document.createElement("a");
                    a.href = "data:image/png;base64," + response?.base64;
                    a.download = response?.dosyaAdi;
                    a.click();
                })
                .fail(function (jqXHR, textStatus) {
                    //stopLoader("[data-name='tableList']");
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }

        function BinaDegerlendirmeDosyaIndir(basvuruDosyaId) {
            if (!basvuruDosyaId) {
                return;
            }

            //startLoader("[data-name='tableList']");
            Request("/admin/basvurudosya/binadegerlendirmedosyaindir", { binaDegerlendirmeDosyaId: basvuruDosyaId }, 'post')
                .done(function (response) {
                    let a = document.createElement("a");
                    a.href = "data:image/png;base64," + response?.base64;
                    a.download = response?.dosyaAdi;
                    a.click();
                })
                .fail(function (jqXHR, textStatus) {
                    //stopLoader("[data-name='tableList']");
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }
        function KaydetBinaDigerYardimlar() /* Tab 4 */ {
            if (!validateForm("#binaIcinYapilanDigerYardimlarForm")) {
                return;
            }

            let formData = serializeFormAsObject("#binaIcinYapilanDigerYardimlarForm");
            formData.binaDegerlendirmeId = binaRowData?.binaDegerlendirmeId;

            const checkedRadioBina = $("[name='radio_bina']:checked");
            const dateName = checkedRadioBina.attr("data-input-date-name");
            const numberName = checkedRadioBina.attr("data-input-number-name");

            formData.binaAdinaYardimTipi = checkedRadioBina.attr("data-type-id");
            formData.yardimTarihi = $("[name='" + dateName + "']").val();
            formData.yardimTutari = $("[name='" + numberName + "']").val();

            startLoader($("#modal_degerlendirme_islem"));
            RequestText(BinaDegerlendirmeControllerUrl + "/KaydetBinaDigerYardimlar", formData, 'post')
                .done(function (response) {
                    stopLoader($("#modal_degerlendirme_islem"));
                    toastr.success("Bina için yapılan diğer yardımların kayıt işlemi başarıyla tamamlandı.");

                    $('#btnKaydetBinaDigerYardimlar').html('Güncelle');
                    $("[name='YapiDenetimiTarihi']").attr('disabled', 'disabled');
                    $("[name='JeolojikEtudRaporuTarihi']").attr('disabled', 'disabled');
                    $("[name='HaritaHazirlanmasiTarihi']").attr('disabled', 'disabled');
                    $("[name='YapiDenetimiTutari']").attr('disabled', 'disabled');
                    $("[name='JeolojikEtudRaporuTutari']").attr('disabled', 'disabled');
                    $("[name='HaritaHazirlanmasiTutari']").attr('disabled', 'disabled');

                    ResetBinaIcinYapilanDigerYardimlar();
                    GetirBinaIcinYapilanDigerYardimlari();

                    reloadTable("[data-name='tableList']");
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader($("#modal_degerlendirme_islem"));
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }

        function KaydetPasifMalikKamuUstlenecek(selectedRows) {
            if (!binaRowData) return;
            if (!selectedRows) {
                toastr.error("Lütfen en az bir adet malik seçiniz.");
                return;
            }
            const formData = {
                binaDegerlendirmeId: binaRowData.binaDegerlendirmeId,
                basvuruKamuUstlenecekList: selectedRows,
            };

            startLoader("#modal_pasif_malikler");
            Request("/admin/BasvuruDegerlendirme/KaydetPasifMalikKamuUstelenecek", formData, 'post')
                .done(function (response) {
                    stopLoader("#modal_pasif_malikler");
                    toastr.success("İşlem başarıyla tamamlandı.");

                    reloadTable("[data-name='tableMalikler']");
                    reloadTable("[data-name='tableList']");
                    $("#divKamuUstlenecekSec").addClass("d-none");
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader("#modal_pasif_malikler");
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }
        function KaydetYapiDenetim() /* Tab 5 */ {
            const yibfNoSeviye = $("input[name='YIBFNoSeviye']").val();
            const ilerlemeYuzdesi = $("select[name='YapiDenetimIlerlemeYuzdesi']").val();
            const fenniMesulSeciliMi = $("[name='FenniMesulSeciliMi']").is(":checked");
            if (BinaDegerlendirmeTasinmazAfadBasvuruDurumu == true) {
                fireConfirmSwal({
                    title: "Uyarı",
                    onconfirm: "YapiDenetimKaydetAjax",
                    text: "Aynı taşınmaz için AFAD hak sahipliği başvurusu bulunduğundan işleme devam edilememektedir! Devam etmek istiyor musunuz?",
                });
            }
            else {
                if (!fenniMesulSeciliMi && ilerlemeYuzdesi != yibfNoSeviye) {
                    //fenni mesül değilse yibf sorgusundan gelen ilerleme yüzdesi ile seçilen ilerleme yüzdesi değilse uyarı gösterilir
                    //gösterilen uyarıya istinaden devam edilmek isteniyorsa kaydetrme işlemi yapılır
                    //fenni mesül değilse ve yibf seviyesiyle seçilen ilerleme yüzdesi aynıysa direkt kaydetme işlemi yapılır
                    fireConfirmSwal({
                        title: "Uyarı",
                        onconfirm: "YapiDenetimKaydetAjax",
                        text: "YİBF No ile sorgulanan yüzde ile kendi girmiş olduğunuz yüzde aynı değildir. İşleme devam etmek istediğinize emin misiniz?",
                    });
                }
                else {
                    YapiDenetimKaydetAjax();
                }

            }
        }

        function YapiDenetimKaydetAjax() /* Tab 5 Ajax Kaydet Metodu */ {
            let formData = serializeFormAsObject("#yapiDenetimForm", BelgeYapiDenetimDosya);
            formData.binaDegerlendirmeId = binaRowData?.binaDegerlendirmeId;

            startLoader($("#modal_degerlendirme_islem"));
            RequestText(BinaDegerlendirmeControllerUrl + "/KaydetYapiDenetim", formData, 'post')
                .done(function (response) {
                    $("#btnKaydetYapiDenetim").html('Güncelle');
                    stopLoader($("#modal_degerlendirme_islem"));

                    toastr.success("Ödeme talebi oluşturma işlemi başarıyla tamamlandı. Ödemeler sayfasına yönlendiriliyorsunuz...");

                    ResetYapiDenetimBilgileri();
                    GetirYapiDenetimSeviyeTespitBilgileri();

                    reloadTable("[data-name='tableList']");

                    setTimeout(function () {
                        window.open("/admin/binaodeme?binaDegerlendirmeId=" + response, "_blank");
                    }, 2500);
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader($("#modal_degerlendirme_islem"));
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }

        function KaydetNakdiYardim() /* Tab 6 */ {
            if (!validateForm("#nakdiYardimForm")) {
                return;
            }

            let formData = serializeFormAsObject("#nakdiYardimForm", BelgeNakdiYardimTaksitDosya);
            formData.binaDegerlendirmeId = binaRowData?.binaDegerlendirmeId;

            startLoader($("#modal_degerlendirme_islem"));
            RequestText(BinaDegerlendirmeControllerUrl + "/KaydetNakdiYardim", formData, 'post')
                .done(function (response) {
                    stopLoader($("#modal_degerlendirme_islem"));
                    toastr.success("Nakdi yardım kayıt işlemi başarıyla tamamlandı.");

                    $('#btnKaydetNakdiYardim').html('Güncelle');

                    ResetNakdiYardimBilgileri();
                    GetirNakdiYardimTaksitleri();

                    reloadTable("[data-name='tableList']");
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader($("#modal_degerlendirme_islem"));
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        }

        function PasifMalikleriListele() {
            let selectedGroupData = selectRowByElem({ tableSelector: "[data-name='tableList']", elem: $(this), isElemChild: true });
            if (!selectedGroupData) return;

            let binaDegerlendirmeId = parseInt($("#btnPasifMalikleriListele").attr("data-binadegerlendirmeid") || 0);
            let uavtMahalleNo = $("#btnPasifMalikleriListele").attr("data-uavtmahalleno");
            let hasarTespitAskiKodu = $("#btnPasifMalikleriListele").attr("data-hasartespitaskikodu");
            let ada = $("#btnPasifMalikleriListele").attr("data-ada");
            let parsel = $("#btnPasifMalikleriListele").attr("data-parsel");

            $("[data-name='tablePasifMaliklerFilter'] input[name='UavtMahalleNo']").val(uavtMahalleNo);
            $("[data-name='tablePasifMaliklerFilter'] input[name='HasarTespitAskiKodu']").val(hasarTespitAskiKodu);
            $("[data-name='tablePasifMaliklerFilter'] input[name='TapuAda']").val(ada);
            $("[data-name='tablePasifMaliklerFilter'] input[name='TapuParsel']").val(parsel);

            startLoader("[data-name='tablePasifMaliklerFilter'] select[name='BinaDisKapiNo']");
            fillSelect("[data-name='tablePasifMaliklerFilter'] select[name='BinaDisKapiNo']",
                "/admin/select/GetirListeYeniYapiDisKapiNo?uavtMahalleNo=" + uavtMahalleNo + "&hasarTespitAskiKodu=" + hasarTespitAskiKodu, null, function () {
                    stopLoader("[data-name='tablePasifMaliklerFilter'] select[name='BinaDisKapiNo']");
                }, function (jqXHR) {
                    toastr.error(getAjaxErrorMessage(jqXHR));
                    stopLoader("[data-name='tablePasifMaliklerFilter'] select[name='UavtIlceNo']");
                });

            let tableMalikAjaxUrl = "/admin/basvuru/GetirListePasifMalikler" + serializeFormToQueryString("[data-name='tablePasifMaliklerFilter']");
            if (isDataTable("[data-name='tablePasifMalikler']")) {
                clearTable("[data-name='tablePasifMalikler']");
                reloadTableNewAjaxUrl("[data-name='tablePasifMalikler']", tableMalikAjaxUrl);
            }
            else {
                loadTable("[data-name='tablePasifMalikler']", tableMalikAjaxUrl);
            }
            $("#modal_pasif_malikler").modal("show");
        }

        function PasifMalikleriListele() {
            let selectedGroupData = selectRowByElem({ tableSelector: "[data-name='tableList']", elem: $(this), isElemChild: true });
            if (!selectedGroupData) return;

            let binaDegerlendirmeId = parseInt($("#btnPasifMalikleriListele").attr("data-binadegerlendirmeid") || 0);
            let uavtMahalleNo = $("#btnPasifMalikleriListele").attr("data-uavtmahalleno");
            let hasarTespitAskiKodu = $("#btnPasifMalikleriListele").attr("data-hasartespitaskikodu");
            let ada = $("#btnPasifMalikleriListele").attr("data-ada");
            let parsel = $("#btnPasifMalikleriListele").attr("data-parsel");

            $("[data-name='tablePasifMaliklerFilter'] input[name='UavtMahalleNo']").val(uavtMahalleNo);
            $("[data-name='tablePasifMaliklerFilter'] input[name='HasarTespitAskiKodu']").val(hasarTespitAskiKodu);
            $("[data-name='tablePasifMaliklerFilter'] input[name='TapuAda']").val(ada);
            $("[data-name='tablePasifMaliklerFilter'] input[name='TapuParsel']").val(parsel);

            startLoader("[data-name='tablePasifMaliklerFilter'] select[name='BinaDisKapiNo']");
            fillSelect("[data-name='tablePasifMaliklerFilter'] select[name='BinaDisKapiNo']",
                "/admin/select/GetirListeYeniYapiDisKapiNo?uavtMahalleNo=" + uavtMahalleNo + "&hasarTespitAskiKodu=" + hasarTespitAskiKodu, null, function () {
                    stopLoader("[data-name='tablePasifMaliklerFilter'] select[name='BinaDisKapiNo']");
                }, function (jqXHR) {
                    toastr.error(getAjaxErrorMessage(jqXHR));
                    stopLoader("[data-name='tablePasifMaliklerFilter'] select[name='UavtIlceNo']");
                });

            let tableMalikAjaxUrl = "/admin/basvuru/GetirListePasifMalikler" + serializeFormToQueryString("[data-name='tablePasifMaliklerFilter']");
            if (isDataTable("[data-name='tablePasifMalikler']")) {
                clearTable("[data-name='tablePasifMalikler']");
                reloadTableNewAjaxUrl("[data-name='tablePasifMalikler']", tableMalikAjaxUrl);
            }
            else {
                loadTable("[data-name='tablePasifMalikler']", tableMalikAjaxUrl);
            }
            $("#modal_pasif_malikler").modal("show");
        }

        function KamuUstlenecekMalikEkle() {
            var aa = binaRowData
            // let selectedGroupData = selectRowByElem({ tableSelector: "[data-name='tableList']", elem: $(this), isElemChild: true });
            // if (!selectedGroupData) return;

            // let binaDegerlendirmeId = parseInt($("#btnPasifMalikleriListele").attr("data-binadegerlendirmeid") || 0);
            // let uavtMahalleNo = $("#btnPasifMalikleriListele").attr("data-uavtmahalleno");
            // let hasarTespitAskiKodu = $("#btnPasifMalikleriListele").attr("data-hasartespitaskikodu");
            // let ada = $("#btnPasifMalikleriListele").attr("data-ada");
            // let parsel = $("#btnPasifMalikleriListele").attr("data-parsel");

            // $("[data-name='tablePasifMaliklerFilter'] input[name='UavtMahalleNo']").val(uavtMahalleNo);
            // $("[data-name='tablePasifMaliklerFilter'] input[name='HasarTespitAskiKodu']").val(hasarTespitAskiKodu);
            // $("[data-name='tablePasifMaliklerFilter'] input[name='TapuAda']").val(ada);
            // $("[data-name='tablePasifMaliklerFilter'] input[name='TapuParsel']").val(parsel);

            // startLoader("[data-name='tablePasifMaliklerFilter'] select[name='BinaDisKapiNo']");
            // fillSelect("[data-name='tablePasifMaliklerFilter'] select[name='BinaDisKapiNo']",
            //     "/admin/select/GetirListeYeniYapiDisKapiNo?uavtMahalleNo=" + uavtMahalleNo + "&hasarTespitAskiKodu=" + hasarTespitAskiKodu, null, function () {
            //         stopLoader("[data-name='tablePasifMaliklerFilter'] select[name='BinaDisKapiNo']");
            //     }, function (jqXHR) {
            //         toastr.error(getAjaxErrorMessage(jqXHR));
            //         stopLoader("[data-name='tablePasifMaliklerFilter'] select[name='UavtIlceNo']");
            //     });

            // let tableMalikAjaxUrl = "/admin/basvuru/GetirListePasifMalikler" + serializeFormToQueryString("[data-name='tablePasifMaliklerFilter']");
            // if (isDataTable("[data-name='tablePasifMalikler']")) {
            //     clearTable("[data-name='tablePasifMalikler']");
            //     reloadTableNewAjaxUrl("[data-name='tablePasifMalikler']", tableMalikAjaxUrl);
            // }
            // else {
            //     loadTable("[data-name='tablePasifMalikler']", tableMalikAjaxUrl);
            // }
            $("#modal_kamu_ustlenecek_malik").modal("show");
        }
        function AdaParselDegistir(binaDegerlendirmeId = 0) {
            binaRowData = selectRowByElem({ tableSelector: "[data-name='tableList']", elem: $("#" + binaDegerlendirmeId) });

            $("#form_yeni_ada_parsel input[name='BaskaParselDosya']").val('');
            $("#form_yeni_ada_parsel input[name='AdaParselGuncellemeTipiId']").prop('checked', false);
            $("#divBaskaParselFile").hide();
            $("#form_yeni_ada_parsel input[name='BinaDegerlendirmeId']").val(binaDegerlendirmeId);
            $("#modal_yeni_ada_parsel_kaydet").html("Ekle");
            $("#form_yeni_ada_parsel select[name='TapuBeyanIlId']").val($('#TapuBeyanIlIdVal option').filter(function () { return $(this).html() == binaRowData.uavtIlAdi; }).val()).change();
            setTimeout(() => {
                $("#form_yeni_ada_parsel select[name='TapuBeyanIlceId']").val($('#TapuBeyanIlceIdVal option').filter(function () { return $(this).html() == binaRowData.uavtIlceAdi; }).val()).change();
            }, 1000);
            $("#modal_Yeni_Ada_Parsel").modal("show");
        }

        function TablolariYukle() {
            if ($("#kt_tab_yapi_listesi_gruplanmamis").hasClass("show")) {
                reloadTableNewAjaxUrl("[data-name='tableYapiListesiGruplanmamis']", yeniYapiControllerUrl + "/GetirListeYeniYapiServerSideGruplanmamis?bosTabloGetir=false");
                reloadTableNewAjaxUrl("[data-name='tableList']", yeniYapiControllerUrl + "/GetirListeYeniYapiServerSideGroupped?bosTabloGetir=true");
            } else {
                reloadTableNewAjaxUrl("[data-name='tableYapiListesiGruplanmamis']", yeniYapiControllerUrl + "/GetirListeYeniYapiServerSideGruplanmamis?bosTabloGetir=true");
                reloadTableNewAjaxUrl("[data-name='tableList']", yeniYapiControllerUrl + "/GetirListeYeniYapiServerSideGroupped?bosTabloGetir=false");
            }
        }

        function YapiDenetimIlerlemeBelgesiDegistir(binaYapiDenetimDosyaGuid) {
            // binaRowData = selectRowByElem({ tableSelector: "[data-name='tableList']", elem: $("#" + binaDegerlendirmeId) });
            $("#form_yapi_denetim_dosya_degistir input[name='BinaYapiDenetimDosyaGuid']").val(binaYapiDenetimDosyaGuid);
            $("#modal_yapi_denetim_dosya_degistir").modal("show");
        }

        $(document).on('click', "#bt_malikSorgula", function (e) {
            // gercekKisiTemizle();
            // tuzelKisiTemizle();
            // askiTemizle();
            // tapuTemizle();

            const input = $("#form_kamu_ustlenecek_malik [name='TcKimlikNoRaw']");
            if (!validateSingleInput(input)) {
                return;
            }

            startLoader("#container-basvuru");
            Request("/admin/kps/GetirKisiAdSoyadTcDen", { tcKimlikNo: input.val() }, 'get')
                .done(function (response) {
                    stopLoader("#container-basvuru");
                    $("#form_kamu_ustlenecek_malik input[name='Ad']").val(response.ad);
                    $("#form_kamu_ustlenecek_malik input[name='Soyad']").val(response.soyad);
                    $("#form_kamu_ustlenecek_malik input[name='DogumTarihi']").val(dateToDate(response.dogumTarih));

                    // $("#Ad").html(response.ad);
                    // $("#Soyad").html(response.soyad);
                    // $("#dogumTarihi").html(dateToDate(response.dogumTarih));

                    if (response.olumTarih != null) {
                        $("#divKisiBilgiSartlariKabulEdiyorum, #divKisiBilgiBtnDevam").addClass("d-none");
                        $("#divKisiBilgiHata").removeClass("d-none");
                    } else {
                        $("#divKisiBilgiSartlariKabulEdiyorum, #divKisiBilgiBtnDevam").removeClass("d-none");
                        $("#divKisiBilgiHata").addClass("d-none");
                    }

                    $("#kisiBilgiDiv").fadeIn(400);
                })
                .fail(function (jqXHR, textStatus) {
                    stopLoader("#container-basvuru");
                    toastr.error(getAjaxErrorMessage(jqXHR));
                });
        });

        function tuzelGercekKisiTemizle() {
            $("input[name='TcKimlikNoRaw']").val('');
            $("input[name='Ad']").val('');
            $("input[name='Soyad']").val('');
            $("input[name='DogumTarihi']").val('');
            $("input[name='TuzelKisiAdres']").val('');
            $("select[name='TuzelKisiTipId']").val('').trigger("change");
            $("select[name='TuzelKisiYetkiTuru']").val('').trigger("change");
            $("input[name='TuzelKisiVergiNo']").val('');
            $("input[name='TuzelKisiAdi']").val('');
            $("input[name='BasvuruTuzelYetkiDosyaListe']").val('');
            BasvuruTuzelYetkiDosyaListe == false;

            // $("#tuzelBilgiDiv").hide();
            // $('a[href="#kt_vtab_pane_2"]').removeAttr("data-bs-toggle");
            // $('a[href="#kt_vtab_pane_3"]').removeAttr("data-bs-toggle");
            // $('a[href="#kt_vtab_pane_4"]').removeAttr("data-bs-toggle");
            // $('a[href="#kt_vtab_pane_5"]').removeAttr("data-bs-toggle");
        }

        //#endregion ...: Tab İşlemleri Kaydet (Ekle/Güncelle) :...

        //#endregion ...: Yeni Yapı Bilgileri Buton/Modal İşlemleri : ...
    </script>
}